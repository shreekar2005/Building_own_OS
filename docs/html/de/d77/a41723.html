<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OSOS Dev: hardware_communication::PCI_Controller</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<script type="text/javascript" src="../../darkmode_toggle.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">OSOS Dev
   </div>
   <div id="projectbrief">Developed by Shreekar</div>
  </td>
 </tr>
   <tr><td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td></tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('de/d77/a41723.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d5/d63/a41720.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">hardware_communication::PCI_Controller</div></div>
</div><!--header-->
<div class="contents">

<p>Manages communication with the PCI bus via the x86 Configuration Space mechanism.  
 <a href="../../de/d77/a41723.html#details">More...</a></p>

<p><code>#include &quot;<a class="el" href="../../d3/d2b/a40781_source.html">kpci.hpp</a>&quot;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for hardware_communication::PCI_Controller:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/db2/a41721.png" border="0" usemap="#ahardware__communication_1_1PCI__Controller_coll__map" alt="Collaboration graph"/></div>
<map name="ahardware__communication_1_1PCI__Controller_coll__map" id="ahardware__communication_1_1PCI__Controller_coll__map">
<area shape="rect" title="Manages communication with the PCI bus via the x86 Configuration Space mechanism." alt="" coords="5,529,328,1555"/>
<area shape="rect" href="../../d0/d66/a41743.html" title="Represents a 32&#45;bit (double&#45;word&#45;sized) I/O Port." alt="" coords="75,283,258,452"/>
<area shape="poly" title=" " alt="" coords="169,452,169,513,164,513,164,452"/>
<area shape="rect" href="../../d9/d1c/a41727.html" title="Base class for hardware I/O port communication." alt="" coords="68,133,265,233"/>
<area shape="poly" title=" " alt="" coords="169,247,169,283,164,283,164,247"/>
<area shape="rect" title=" " alt="" coords="133,5,200,71"/>
<area shape="poly" title=" " alt="" coords="169,71,169,117,164,117,164,71"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a71d89c22009309f0d354da5cbf359dc7" id="r_a71d89c22009309f0d354da5cbf359dc7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d77/a41723.html#a71d89c22009309f0d354da5cbf359dc7">PCI_Controller</a> ()</td></tr>
<tr class="separator:a71d89c22009309f0d354da5cbf359dc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ee06d7487fe4ff999d2176786c2e743" id="r_a3ee06d7487fe4ff999d2176786c2e743"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d77/a41723.html#a3ee06d7487fe4ff999d2176786c2e743">~PCI_Controller</a> ()</td></tr>
<tr class="separator:a3ee06d7487fe4ff999d2176786c2e743"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54eaf77198f4b3816b9276f3d5be1661" id="r_a54eaf77198f4b3816b9276f3d5be1661"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d77/a41723.html#a54eaf77198f4b3816b9276f3d5be1661">deviceHasFunctions</a> (uint8_t bus, uint8_t device)</td></tr>
<tr class="memdesc:a54eaf77198f4b3816b9276f3d5be1661"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if a device is a multi-function device.  <br /></td></tr>
<tr class="separator:a54eaf77198f4b3816b9276f3d5be1661"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e00e862f7af95887e09f3b90f7357fc" id="r_a5e00e862f7af95887e09f3b90f7357fc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/d2b/a40815.html#d4/d8d/a41715">BaseAddressRegister</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d77/a41723.html#a5e00e862f7af95887e09f3b90f7357fc">getBaseAddressRegister</a> (uint8_t bus, uint8_t device, uint8_t function, uint16_t bar)</td></tr>
<tr class="memdesc:a5e00e862f7af95887e09f3b90f7357fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decodes a raw BAR value into a <a class="el" href="../../d1/d2b/a40815.html#d4/d8d/a41715" title="Represents a parsed Base Address Register (BAR) from a PCI device.">BaseAddressRegister</a> object.  <br /></td></tr>
<tr class="separator:a5e00e862f7af95887e09f3b90f7357fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf54e2d1841368c2f8b2d5989a2fa7b0" id="r_adf54e2d1841368c2f8b2d5989a2fa7b0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d9d/a41719.html">PCI_DeviceDescriptor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d77/a41723.html#adf54e2d1841368c2f8b2d5989a2fa7b0">getDeviceDescriptor</a> (uint8_t bus, uint8_t device, uint8_t function)</td></tr>
<tr class="memdesc:adf54e2d1841368c2f8b2d5989a2fa7b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the configuration header to create a descriptor object.  <br /></td></tr>
<tr class="separator:adf54e2d1841368c2f8b2d5989a2fa7b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a5c1a26be6003b1ef1478fdc7ae2466" id="r_a0a5c1a26be6003b1ef1478fdc7ae2466"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d60/a41647.html">driver::Driver</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d77/a41723.html#a0a5c1a26be6003b1ef1478fdc7ae2466">getDriver</a> (<a class="el" href="../../d4/d9d/a41719.html">PCI_DeviceDescriptor</a> dev, <a class="el" href="../../db/ded/a41711.html">hardware_communication::InterruptManager</a> *interrupt_manager)</td></tr>
<tr class="memdesc:a0a5c1a26be6003b1ef1478fdc7ae2466"><td class="mdescLeft">&#160;</td><td class="mdescRight">Factory method that instantiates the correct driver for a given device.  <br /></td></tr>
<tr class="separator:a0a5c1a26be6003b1ef1478fdc7ae2466"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbe08b680f1d06bcd047cd0c8f215bfd" id="r_abbe08b680f1d06bcd047cd0c8f215bfd"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d77/a41723.html#abbe08b680f1d06bcd047cd0c8f215bfd">read16</a> (uint8_t bus, uint8_t device, uint8_t function, uint8_t registerOffset)</td></tr>
<tr class="memdesc:abbe08b680f1d06bcd047cd0c8f215bfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a 16-bit word from the PCI configuration space.  <br /></td></tr>
<tr class="separator:abbe08b680f1d06bcd047cd0c8f215bfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8be9d213f644608726499edca159e1e4" id="r_a8be9d213f644608726499edca159e1e4"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d77/a41723.html#a8be9d213f644608726499edca159e1e4">read32</a> (uint8_t bus, uint8_t device, uint8_t function, uint8_t registerOffset)</td></tr>
<tr class="memdesc:a8be9d213f644608726499edca159e1e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a 32-bit double word from the PCI configuration space.  <br /></td></tr>
<tr class="separator:a8be9d213f644608726499edca159e1e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e21604894939edaafd1d5baae2840dd" id="r_a6e21604894939edaafd1d5baae2840dd"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d77/a41723.html#a6e21604894939edaafd1d5baae2840dd">read8</a> (uint8_t bus, uint8_t device, uint8_t function, uint8_t registerOffset)</td></tr>
<tr class="memdesc:a6e21604894939edaafd1d5baae2840dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads an 8-bit byte from the PCI configuration space.  <br /></td></tr>
<tr class="separator:a6e21604894939edaafd1d5baae2840dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39f63594cdcdad7acc3860d6d339995e" id="r_a39f63594cdcdad7acc3860d6d339995e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d77/a41723.html#a39f63594cdcdad7acc3860d6d339995e">recursiveSelDriver</a> (uint8_t bus, <a class="el" href="../../da/d88/a41651.html">driver::DriverManager</a> *driver_manager, <a class="el" href="../../db/ded/a41711.html">hardware_communication::InterruptManager</a> *interrupt_manager)</td></tr>
<tr class="memdesc:a39f63594cdcdad7acc3860d6d339995e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recursively scans the bus for devices and bridges, assigning drivers where possible.  <br /></td></tr>
<tr class="separator:a39f63594cdcdad7acc3860d6d339995e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a676c96d825ec578ff98c965c4b999aec" id="r_a676c96d825ec578ff98c965c4b999aec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d77/a41723.html#a676c96d825ec578ff98c965c4b999aec">scanBus</a> (uint8_t bus)</td></tr>
<tr class="memdesc:a676c96d825ec578ff98c965c4b999aec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scans a bus just for listing devices (does not instantiate drivers).  <br /></td></tr>
<tr class="separator:a676c96d825ec578ff98c965c4b999aec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86f101dc2b53f938d5ac466c7ec33e2c" id="r_a86f101dc2b53f938d5ac466c7ec33e2c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d77/a41723.html#a86f101dc2b53f938d5ac466c7ec33e2c">selectDrivers</a> (<a class="el" href="../../da/d88/a41651.html">driver::DriverManager</a> *driver_manager, <a class="el" href="../../db/ded/a41711.html">hardware_communication::InterruptManager</a> *interrupt_manager)</td></tr>
<tr class="memdesc:a86f101dc2b53f938d5ac466c7ec33e2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the driver selection process from Bus 0.  <br /></td></tr>
<tr class="separator:a86f101dc2b53f938d5ac466c7ec33e2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4466a0762483fd1c3ec5f2745a58386" id="r_ac4466a0762483fd1c3ec5f2745a58386"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d77/a41723.html#ac4466a0762483fd1c3ec5f2745a58386">write16</a> (uint8_t bus, uint8_t device, uint8_t function, uint8_t registerOffset, uint16_t value)</td></tr>
<tr class="memdesc:ac4466a0762483fd1c3ec5f2745a58386"><td class="mdescLeft">&#160;</td><td class="mdescRight">Safely writes a 16-bit word to the PCI configuration space.  <br /></td></tr>
<tr class="separator:ac4466a0762483fd1c3ec5f2745a58386"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f72611558fb7dcc7971e748058832d8" id="r_a2f72611558fb7dcc7971e748058832d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d77/a41723.html#a2f72611558fb7dcc7971e748058832d8">write32</a> (uint8_t bus, uint8_t device, uint8_t function, uint8_t registerOffset, uint32_t value)</td></tr>
<tr class="memdesc:a2f72611558fb7dcc7971e748058832d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a 32-bit double word to the PCI configuration space.  <br /></td></tr>
<tr class="separator:a2f72611558fb7dcc7971e748058832d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bbd1027e1d181bb2eb280070e3d1831" id="r_a1bbd1027e1d181bb2eb280070e3d1831"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d77/a41723.html#a1bbd1027e1d181bb2eb280070e3d1831">write8</a> (uint8_t bus, uint8_t device, uint8_t function, uint8_t registerOffset, uint8_t value)</td></tr>
<tr class="memdesc:a1bbd1027e1d181bb2eb280070e3d1831"><td class="mdescLeft">&#160;</td><td class="mdescRight">Safely writes an 8-bit byte to the PCI configuration space.  <br /></td></tr>
<tr class="separator:a1bbd1027e1d181bb2eb280070e3d1831"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a99c80eb69bb5258a96fb3b9c61ce9dd3" id="r_a99c80eb69bb5258a96fb3b9c61ce9dd3"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d77/a41723.html#a99c80eb69bb5258a96fb3b9c61ce9dd3">getAddress</a> (uint8_t bus, uint8_t device, uint8_t function, uint8_t registerOffset)</td></tr>
<tr class="memdesc:a99c80eb69bb5258a96fb3b9c61ce9dd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper to construct the 32-bit CONFIG_ADDRESS.  <br /></td></tr>
<tr class="separator:a99c80eb69bb5258a96fb3b9c61ce9dd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ab6a9e1ba7e8934198624da046fc80bad" id="r_ab6a9e1ba7e8934198624da046fc80bad"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d66/a41743.html">Port32Bit</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d77/a41723.html#ab6a9e1ba7e8934198624da046fc80bad">commandPort</a></td></tr>
<tr class="separator:ab6a9e1ba7e8934198624da046fc80bad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63cf29ae25d0a70ee448ac1e2896a041" id="r_a63cf29ae25d0a70ee448ac1e2896a041"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d66/a41743.html">Port32Bit</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d77/a41723.html#a63cf29ae25d0a70ee448ac1e2896a041">dataPort</a></td></tr>
<tr class="separator:a63cf29ae25d0a70ee448ac1e2896a041"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Manages communication with the PCI bus via the x86 Configuration Space mechanism. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d2b/a40781_source.html#l00054">54</a> of file <a class="el" href="../../d3/d2b/a40781_source.html">kpci.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a71d89c22009309f0d354da5cbf359dc7" name="a71d89c22009309f0d354da5cbf359dc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71d89c22009309f0d354da5cbf359dc7">&#9670;&#160;</a></span>PCI_Controller()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PCI_Controller::PCI_Controller </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d46/a40742_source.html#l00016">16</a> of file <a class="el" href="../../d0/d46/a40742_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   16</span>: <a class="code hl_variable" href="../../de/d77/a41723.html#a63cf29ae25d0a70ee448ac1e2896a041">dataPort</a>(0xCFC), <a class="code hl_variable" href="../../de/d77/a41723.html#ab6a9e1ba7e8934198624da046fc80bad">commandPort</a>(0xCF8) {}</div>
<div class="ttc" id="aa41723_html_a63cf29ae25d0a70ee448ac1e2896a041"><div class="ttname"><a href="../../de/d77/a41723.html#a63cf29ae25d0a70ee448ac1e2896a041">hardware_communication::PCI_Controller::dataPort</a></div><div class="ttdeci">Port32Bit dataPort</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d2b/a40781_source.html#l00056">kpci.hpp:56</a></div></div>
<div class="ttc" id="aa41723_html_ab6a9e1ba7e8934198624da046fc80bad"><div class="ttname"><a href="../../de/d77/a41723.html#ab6a9e1ba7e8934198624da046fc80bad">hardware_communication::PCI_Controller::commandPort</a></div><div class="ttdeci">Port32Bit commandPort</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d2b/a40781_source.html#l00057">kpci.hpp:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3ee06d7487fe4ff999d2176786c2e743" name="a3ee06d7487fe4ff999d2176786c2e743"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ee06d7487fe4ff999d2176786c2e743">&#9670;&#160;</a></span>~PCI_Controller()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PCI_Controller::~PCI_Controller </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d46/a40742_source.html#l00018">18</a> of file <a class="el" href="../../d0/d46/a40742_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   18</span>{}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a54eaf77198f4b3816b9276f3d5be1661" name="a54eaf77198f4b3816b9276f3d5be1661"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54eaf77198f4b3816b9276f3d5be1661">&#9670;&#160;</a></span>deviceHasFunctions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PCI_Controller::deviceHasFunctions </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>device</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if a device is a multi-function device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>bus number. </td></tr>
    <tr><td class="paramname">device</td><td>device number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the device has multiple functions (bit 7 of Header Type is set), false otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d46/a40742_source.html#l00087">87</a> of file <a class="el" href="../../d0/d46/a40742_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   88</span>{</div>
<div class="line"><span class="lineno">   89</span>    <span class="keywordflow">return</span> (<a class="code hl_function" href="../../de/d77/a41723.html#a6e21604894939edaafd1d5baae2840dd">read8</a>(bus, device, 0, 0x0E) &amp; 0x80);</div>
<div class="line"><span class="lineno">   90</span>}</div>
<div class="ttc" id="aa41723_html_a6e21604894939edaafd1d5baae2840dd"><div class="ttname"><a href="../../de/d77/a41723.html#a6e21604894939edaafd1d5baae2840dd">hardware_communication::PCI_Controller::read8</a></div><div class="ttdeci">uint8_t read8(uint8_t bus, uint8_t device, uint8_t function, uint8_t registerOffset)</div><div class="ttdoc">Reads an 8-bit byte from the PCI configuration space.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d46/a40742_source.html#l00047">kpci.cpp:47</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d0/d46/a40742_source.html#l00047">read8()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d46/a40742_source.html#l00118">recursiveSelDriver()</a>, and <a class="el" href="../../d0/d46/a40742_source.html#l00154">scanBus()</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_a54eaf77198f4b3816b9276f3d5be1661_cgraph.png" border="0" usemap="#ade/d77/a41723_a54eaf77198f4b3816b9276f3d5be1661_cgraph" alt=""/></div>
<map name="ade/d77/a41723_a54eaf77198f4b3816b9276f3d5be1661_cgraph" id="ade/d77/a41723_a54eaf77198f4b3816b9276f3d5be1661_cgraph">
<area shape="rect" title="Checks if a device is a multi&#45;function device." alt="" coords="5,69,265,109"/>
<area shape="rect" href="../../de/d77/a41723.html#a6e21604894939edaafd1d5baae2840dd" title="Reads an 8&#45;bit byte from the PCI configuration space." alt="" coords="313,69,504,109"/>
<area shape="poly" title=" " alt="" coords="266,87,300,87,300,92,266,92"/>
<area shape="rect" href="../../de/d77/a41723.html#a8be9d213f644608726499edca159e1e4" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="552,69,743,109"/>
<area shape="poly" title=" " alt="" coords="504,87,538,87,538,92,504,92"/>
<area shape="rect" href="../../de/d77/a41723.html#a99c80eb69bb5258a96fb3b9c61ce9dd3" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="791,5,993,45"/>
<area shape="poly" title=" " alt="" coords="724,67,801,46,803,51,725,72"/>
<area shape="rect" href="../../d0/d66/a41743.html#a742b40049c70bfda79a3031b85297948" title="Reads a 32&#45;bit value from the I/O port." alt="" coords="797,69,987,109"/>
<area shape="poly" title=" " alt="" coords="743,87,783,87,783,92,743,92"/>
<area shape="rect" href="../../d0/d66/a41743.html#ad13c0ec90a83f05b61c023dd8a1f53e8" title="Writes a 32&#45;bit value to the I/O port." alt="" coords="797,133,987,173"/>
<area shape="poly" title=" " alt="" coords="725,107,803,127,801,132,724,112"/>
</map>
</div>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_a54eaf77198f4b3816b9276f3d5be1661_icgraph.png" border="0" usemap="#ade/d77/a41723_a54eaf77198f4b3816b9276f3d5be1661_icgraph" alt=""/></div>
<map name="ade/d77/a41723_a54eaf77198f4b3816b9276f3d5be1661_icgraph" id="ade/d77/a41723_a54eaf77198f4b3816b9276f3d5be1661_icgraph">
<area shape="rect" title="Checks if a device is a multi&#45;function device." alt="" coords="1011,85,1271,125"/>
<area shape="rect" href="../../de/d77/a41723.html#a39f63594cdcdad7acc3860d6d339995e" title="Recursively scans the bus for devices and bridges, assigning drivers where possible." alt="" coords="752,29,963,84"/>
<area shape="poly" title=" " alt="" coords="1008,85,962,77,963,72,1009,80"/>
<area shape="rect" href="../../de/d77/a41723.html#a676c96d825ec578ff98c965c4b999aec" title="Scans a bus just for listing devices (does not instantiate drivers)." alt="" coords="762,133,953,173"/>
<area shape="poly" title=" " alt="" coords="1009,130,953,139,952,134,1008,124"/>
<area shape="poly" title=" " alt="" coords="901,18,885,11,857,8,834,10,819,15,812,21,812,29,807,29,807,19,816,10,833,5,857,3,887,6,903,14"/>
<area shape="rect" href="../../de/d77/a41723.html#a86f101dc2b53f938d5ac466c7ec33e2c" title="Starts the driver selection process from Bus 0." alt="" coords="488,37,704,77"/>
<area shape="poly" title=" " alt="" coords="739,59,704,59,704,54,739,54"/>
<area shape="rect" href="../../d7/de8/a40730.html#abb4e4866092116b520310d61961bfe12" title="The main entry point for the C++ kernel." alt="" coords="304,44,399,69"/>
<area shape="poly" title=" " alt="" coords="474,59,399,59,399,54,474,54"/>
<area shape="poly" title=" " alt="" coords="902,121,886,114,857,111,832,113,817,118,811,124,814,131,809,133,806,123,814,114,831,108,857,106,888,109,904,116"/>
<area shape="rect" href="../../d3/ddf/a41631.html#a64cee1fd80a35d996188c0034ec26b64" title="Simple command processor." alt="" coords="519,133,673,173"/>
<area shape="poly" title=" " alt="" coords="748,155,673,155,673,150,748,150"/>
<area shape="rect" href="../../d3/ddf/a41631.html#ab76062d9a8256ca7a40503fd76095903" title="The single, centralized function for handling all key presses." alt="" coords="263,140,440,165"/>
<area shape="poly" title=" " alt="" coords="505,155,440,155,440,150,505,150"/>
<area shape="rect" href="../../d1/d18/a41643.html#add675289514a4144f97d2189183400a8" title=" " alt="" coords="5,101,215,141"/>
<area shape="poly" title=" " alt="" coords="249,142,215,137,215,132,249,136"/>
<area shape="rect" href="../../dd/d75/a41635.html#af82a0bd16f995dd285d4f7822117377c" title="Handles key down events by forwarding them to the shell." alt="" coords="21,165,199,205"/>
<area shape="poly" title=" " alt="" coords="249,169,200,175,199,170,249,164"/>
</map>
</div>

</div>
</div>
<a id="a99c80eb69bb5258a96fb3b9c61ce9dd3" name="a99c80eb69bb5258a96fb3b9c61ce9dd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99c80eb69bb5258a96fb3b9c61ce9dd3">&#9670;&#160;</a></span>getAddress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t PCI_Controller::getAddress </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>registerOffset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper to construct the 32-bit CONFIG_ADDRESS. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>bus number (0-255). </td></tr>
    <tr><td class="paramname">device</td><td>device number (0-31). </td></tr>
    <tr><td class="paramname">function</td><td>function number (0-7). </td></tr>
    <tr><td class="paramname">registerOffset</td><td>offset into the configuration space (must be 4-byte aligned). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A 32-bit integer formatted for port 0xCF8. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d46/a40742_source.html#l00020">20</a> of file <a class="el" href="../../d0/d46/a40742_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   21</span>{</div>
<div class="line"><span class="lineno">   22</span>    uint32_t lbus = (uint32_t)bus;</div>
<div class="line"><span class="lineno">   23</span>    uint32_t ldevice = (uint32_t)device;</div>
<div class="line"><span class="lineno">   24</span>    uint32_t lfunction = (uint32_t)function;</div>
<div class="line"><span class="lineno">   25</span> </div>
<div class="line"><span class="lineno">   26</span>    <span class="keywordflow">return</span> 0x80000000 </div>
<div class="line"><span class="lineno">   27</span>         | (lbus &lt;&lt; 16)</div>
<div class="line"><span class="lineno">   28</span>         | (ldevice &lt;&lt; 11)</div>
<div class="line"><span class="lineno">   29</span>         | (lfunction &lt;&lt; 8)</div>
<div class="line"><span class="lineno">   30</span>         | (registerOffset &amp; 0xFC);</div>
<div class="line"><span class="lineno">   31</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d0/d46/a40742_source.html#l00033">read32()</a>, and <a class="el" href="../../d0/d46/a40742_source.html#l00054">write32()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_a99c80eb69bb5258a96fb3b9c61ce9dd3_icgraph.png" border="0" usemap="#ade/d77/a41723_a99c80eb69bb5258a96fb3b9c61ce9dd3_icgraph" alt=""/></div>
<map name="ade/d77/a41723_a99c80eb69bb5258a96fb3b9c61ce9dd3_icgraph" id="ade/d77/a41723_a99c80eb69bb5258a96fb3b9c61ce9dd3_icgraph">
<area shape="rect" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="1799,207,2001,247"/>
<area shape="rect" href="../../de/d77/a41723.html#a8be9d213f644608726499edca159e1e4" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="1560,175,1751,215"/>
<area shape="poly" title=" " alt="" coords="1785,214,1751,210,1751,204,1785,209"/>
<area shape="rect" href="../../de/d77/a41723.html#a2f72611558fb7dcc7971e748058832d8" title="Writes a 32&#45;bit double word to the PCI configuration space." alt="" coords="1560,239,1751,279"/>
<area shape="poly" title=" " alt="" coords="1785,244,1751,249,1751,244,1785,239"/>
<area shape="rect" href="../../de/d77/a41723.html#a5e00e862f7af95887e09f3b90f7357fc" title="Decodes a raw BAR value into a BaseAddressRegister object." alt="" coords="1025,235,1259,290"/>
<area shape="poly" title=" " alt="" coords="1546,203,1437,211,1322,225,1255,238,1254,233,1321,220,1437,206,1546,197"/>
<area shape="rect" href="../../de/d77/a41723.html#adf54e2d1841368c2f8b2d5989a2fa7b0" title="Reads the configuration header to create a descriptor object." alt="" coords="1011,5,1273,45"/>
<area shape="poly" title=" " alt="" coords="1615,169,1566,138,1511,110,1464,95,1398,79,1250,48,1251,43,1399,74,1465,90,1513,106,1569,134,1617,164"/>
<area shape="rect" href="../../de/d77/a41723.html#abbe08b680f1d06bcd047cd0c8f215bfd" title="Reads a 16&#45;bit word from the PCI configuration space." alt="" coords="1321,5,1512,45"/>
<area shape="poly" title=" " alt="" coords="1626,167,1575,116,1511,66,1475,48,1478,43,1513,62,1578,112,1629,163"/>
<area shape="rect" href="../../de/d77/a41723.html#a6e21604894939edaafd1d5baae2840dd" title="Reads an 8&#45;bit byte from the PCI configuration space." alt="" coords="1321,120,1512,160"/>
<area shape="poly" title=" " alt="" coords="1554,174,1504,163,1505,157,1555,169"/>
<area shape="rect" href="../../de/d77/a41723.html#ac4466a0762483fd1c3ec5f2745a58386" title="Safely writes a 16&#45;bit word to the PCI configuration space." alt="" coords="1321,299,1512,339"/>
<area shape="poly" title=" " alt="" coords="1570,223,1562,229,1547,243,1538,258,1529,273,1514,289,1492,301,1490,296,1510,285,1525,270,1534,255,1543,240,1558,225,1567,219"/>
<area shape="rect" href="../../de/d77/a41723.html#a1bbd1027e1d181bb2eb280070e3d1831" title="Safely writes an 8&#45;bit byte to the PCI configuration space." alt="" coords="1321,235,1512,275"/>
<area shape="poly" title=" " alt="" coords="1562,221,1498,237,1496,232,1561,216"/>
<area shape="rect" href="../../de/d77/a41723.html#a39f63594cdcdad7acc3860d6d339995e" title="Recursively scans the bus for devices and bridges, assigning drivers where possible." alt="" coords="752,161,963,215"/>
<area shape="poly" title=" " alt="" coords="1023,234,961,218,963,213,1025,229"/>
<area shape="poly" title=" " alt="" coords="901,150,885,142,857,139,834,141,819,146,812,152,812,161,807,161,807,150,816,142,833,136,857,134,887,137,903,145"/>
<area shape="rect" href="../../de/d77/a41723.html#a86f101dc2b53f938d5ac466c7ec33e2c" title="Starts the driver selection process from Bus 0." alt="" coords="488,168,704,208"/>
<area shape="poly" title=" " alt="" coords="739,191,704,191,704,185,739,185"/>
<area shape="rect" href="../../d7/de8/a40730.html#abb4e4866092116b520310d61961bfe12" title="The main entry point for the C++ kernel." alt="" coords="304,175,399,201"/>
<area shape="poly" title=" " alt="" coords="474,191,399,191,399,185,474,185"/>
<area shape="poly" title=" " alt="" coords="1095,55,908,163,905,158,1092,50"/>
<area shape="rect" href="../../de/d77/a41723.html#a676c96d825ec578ff98c965c4b999aec" title="Scans a bus just for listing devices (does not instantiate drivers)." alt="" coords="762,63,953,103"/>
<area shape="poly" title=" " alt="" coords="1029,51,954,66,952,61,1028,45"/>
<area shape="poly" title=" " alt="" coords="902,51,886,44,857,41,832,43,817,48,811,54,814,61,809,63,806,53,814,44,831,38,857,36,888,39,904,46"/>
<area shape="rect" href="../../d3/ddf/a41631.html#a64cee1fd80a35d996188c0034ec26b64" title="Simple command processor." alt="" coords="519,63,673,103"/>
<area shape="poly" title=" " alt="" coords="748,85,673,85,673,80,748,80"/>
<area shape="rect" href="../../d3/ddf/a41631.html#ab76062d9a8256ca7a40503fd76095903" title="The single, centralized function for handling all key presses." alt="" coords="263,70,440,95"/>
<area shape="poly" title=" " alt="" coords="505,85,440,85,440,80,505,80"/>
<area shape="rect" href="../../d1/d18/a41643.html#add675289514a4144f97d2189183400a8" title=" " alt="" coords="5,31,215,71"/>
<area shape="poly" title=" " alt="" coords="249,72,215,67,215,62,249,66"/>
<area shape="rect" href="../../dd/d75/a41635.html#af82a0bd16f995dd285d4f7822117377c" title="Handles key down events by forwarding them to the shell." alt="" coords="21,95,199,135"/>
<area shape="poly" title=" " alt="" coords="249,99,200,105,199,100,249,94"/>
<area shape="poly" title=" " alt="" coords="1307,28,1273,28,1273,23,1307,23"/>
<area shape="poly" title=" " alt="" coords="1348,168,1323,181,1299,200,1275,218,1233,238,1231,233,1272,214,1296,195,1320,176,1346,163"/>
<area shape="poly" title=" " alt="" coords="1325,166,1274,175,1111,188,963,192,963,187,1110,183,1273,169,1324,160"/>
<area shape="poly" title=" " alt="" coords="1346,117,1320,104,1296,84,1272,66,1227,48,1229,43,1275,62,1299,80,1323,99,1348,112"/>
<area shape="poly" title=" " alt="" coords="1323,120,1273,111,1104,94,953,87,953,81,1104,88,1274,105,1324,114"/>
<area shape="rect" href="../../de/d77/a41723.html#a54eaf77198f4b3816b9276f3d5be1661" title="Checks if a device is a multi&#45;function device." alt="" coords="1012,120,1272,160"/>
<area shape="poly" title=" " alt="" coords="1307,143,1272,143,1272,137,1307,137"/>
<area shape="poly" title=" " alt="" coords="1010,165,963,173,963,168,1010,160"/>
<area shape="poly" title=" " alt="" coords="1028,120,952,104,954,99,1029,115"/>
<area shape="poly" title=" " alt="" coords="1562,285,1498,301,1496,296,1561,280"/>
<area shape="poly" title=" " alt="" coords="1546,260,1512,259,1512,254,1546,254"/>
</map>
</div>

</div>
</div>
<a id="a5e00e862f7af95887e09f3b90f7357fc" name="a5e00e862f7af95887e09f3b90f7357fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e00e862f7af95887e09f3b90f7357fc">&#9670;&#160;</a></span>getBaseAddressRegister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d2b/a40815.html#d4/d8d/a41715">BaseAddressRegister</a> PCI_Controller::getBaseAddressRegister </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>bar</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decodes a raw BAR value into a <a class="el" href="../../d1/d2b/a40815.html#d4/d8d/a41715" title="Represents a parsed Base Address Register (BAR) from a PCI device.">BaseAddressRegister</a> object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>bus number. </td></tr>
    <tr><td class="paramname">device</td><td>device number. </td></tr>
    <tr><td class="paramname">function</td><td>function number. </td></tr>
    <tr><td class="paramname">bar</td><td>index of the BAR to read (0-5). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="../../d1/d2b/a40815.html#d4/d8d/a41715" title="Represents a parsed Base Address Register (BAR) from a PCI device.">BaseAddressRegister</a> struct with the decoded address and type. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d46/a40742_source.html#l00220">220</a> of file <a class="el" href="../../d0/d46/a40742_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  221</span>{</div>
<div class="line"><span class="lineno">  222</span>    <a class="code hl_class" href="../../d1/d2b/a40815.html#d4/d8d/a41715">BaseAddressRegister</a> result;</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>    uint32_t headertype = <a class="code hl_function" href="../../de/d77/a41723.html#a6e21604894939edaafd1d5baae2840dd">read8</a>(bus, device, function, 0x0E) &amp; 0x7F;</div>
<div class="line"><span class="lineno">  225</span>    <span class="keywordtype">int</span> maxBARs = 6 - (4 * headertype);</div>
<div class="line"><span class="lineno">  226</span>    <span class="keywordflow">if</span>(bar &gt;= maxBARs) <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>    uint32_t bar_value = <a class="code hl_function" href="../../de/d77/a41723.html#a8be9d213f644608726499edca159e1e4">read32</a>(bus, device, function, 0x10 + (4 * bar));</div>
<div class="line"><span class="lineno">  229</span>    </div>
<div class="line"><span class="lineno">  230</span>    result.<a class="code hl_variable" href="../../d1/d2b/a40815.html#a1ed46e6ec12ae23a9d647ec0f659940a">type</a> = (bar_value &amp; 0x1) ? <a class="code hl_enumvalue" href="../../d1/d2b/a40815.html#ad38a4a4ac62c5165be6aad855b6dab82a85507086ea5f27de7d6c37f3305976d1">inputOutput</a> : <a class="code hl_enumvalue" href="../../d1/d2b/a40815.html#ad38a4a4ac62c5165be6aad855b6dab82aedac33a38f15a3d9168fc0067c65cd14">memoryMapping</a>;</div>
<div class="line"><span class="lineno">  231</span> </div>
<div class="line"><span class="lineno">  232</span>    <span class="keywordflow">if</span>(result.<a class="code hl_variable" href="../../d1/d2b/a40815.html#a1ed46e6ec12ae23a9d647ec0f659940a">type</a> == <a class="code hl_enumvalue" href="../../d1/d2b/a40815.html#ad38a4a4ac62c5165be6aad855b6dab82aedac33a38f15a3d9168fc0067c65cd14">memoryMapping</a>)</div>
<div class="line"><span class="lineno">  233</span>    {</div>
<div class="line"><span class="lineno">  234</span>        result.<a class="code hl_variable" href="../../d1/d2b/a40815.html#ab9e334c4ce84a03d60cea629ddd148b8">address</a> = (uint8_t*)(bar_value &amp; ~0xF);</div>
<div class="line"><span class="lineno">  235</span>        result.<a class="code hl_variable" href="../../d1/d2b/a40815.html#a0cef7240cfffa9f07d92dc14cf4d3ef9">prefetchable</a> = ((bar_value &amp; 0x8) != 0);</div>
<div class="line"><span class="lineno">  236</span>    }</div>
<div class="line"><span class="lineno">  237</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  238</span>    {</div>
<div class="line"><span class="lineno">  239</span>        result.<a class="code hl_variable" href="../../d1/d2b/a40815.html#ab9e334c4ce84a03d60cea629ddd148b8">address</a> = (uint8_t*)(bar_value &amp; ~0x3);</div>
<div class="line"><span class="lineno">  240</span>        result.<a class="code hl_variable" href="../../d1/d2b/a40815.html#a0cef7240cfffa9f07d92dc14cf4d3ef9">prefetchable</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  241</span>    }</div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span>    <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  244</span>}</div>
<div class="ttc" id="aa40815_html_a0cef7240cfffa9f07d92dc14cf4d3ef9"><div class="ttname"><a href="../../d1/d2b/a40815.html#a0cef7240cfffa9f07d92dc14cf4d3ef9">hardware_communication::BaseAddressRegister::prefetchable</a></div><div class="ttdeci">bool prefetchable</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d2b/a40781_source.html#l00020">kpci.hpp:20</a></div></div>
<div class="ttc" id="aa40815_html_a1ed46e6ec12ae23a9d647ec0f659940a"><div class="ttname"><a href="../../d1/d2b/a40815.html#a1ed46e6ec12ae23a9d647ec0f659940a">hardware_communication::BaseAddressRegister::type</a></div><div class="ttdeci">BaseAddressRegisterType type</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d2b/a40781_source.html#l00023">kpci.hpp:23</a></div></div>
<div class="ttc" id="aa40815_html_ab9e334c4ce84a03d60cea629ddd148b8"><div class="ttname"><a href="../../d1/d2b/a40815.html#ab9e334c4ce84a03d60cea629ddd148b8">hardware_communication::BaseAddressRegister::address</a></div><div class="ttdeci">uint8_t * address</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d2b/a40781_source.html#l00021">kpci.hpp:21</a></div></div>
<div class="ttc" id="aa40815_html_ad38a4a4ac62c5165be6aad855b6dab82a85507086ea5f27de7d6c37f3305976d1"><div class="ttname"><a href="../../d1/d2b/a40815.html#ad38a4a4ac62c5165be6aad855b6dab82a85507086ea5f27de7d6c37f3305976d1">hardware_communication::inputOutput</a></div><div class="ttdeci">@ inputOutput</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d2b/a40781_source.html#l00015">kpci.hpp:14</a></div></div>
<div class="ttc" id="aa40815_html_ad38a4a4ac62c5165be6aad855b6dab82aedac33a38f15a3d9168fc0067c65cd14"><div class="ttname"><a href="../../d1/d2b/a40815.html#ad38a4a4ac62c5165be6aad855b6dab82aedac33a38f15a3d9168fc0067c65cd14">hardware_communication::memoryMapping</a></div><div class="ttdeci">@ memoryMapping</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d2b/a40781_source.html#l00013">kpci.hpp:13</a></div></div>
<div class="ttc" id="aa40815_html_d4/d8d/a41715"><div class="ttname"><a href="../../d1/d2b/a40815.html#d4/d8d/a41715">hardware_communication::BaseAddressRegister</a></div><div class="ttdoc">Represents a parsed Base Address Register (BAR) from a PCI device.</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d2b/a40781_source.html#l00018">kpci.hpp:18</a></div></div>
<div class="ttc" id="aa41723_html_a8be9d213f644608726499edca159e1e4"><div class="ttname"><a href="../../de/d77/a41723.html#a8be9d213f644608726499edca159e1e4">hardware_communication::PCI_Controller::read32</a></div><div class="ttdeci">uint32_t read32(uint8_t bus, uint8_t device, uint8_t function, uint8_t registerOffset)</div><div class="ttdoc">Reads a 32-bit double word from the PCI configuration space.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d46/a40742_source.html#l00033">kpci.cpp:33</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d2b/a40781_source.html#l00021">hardware_communication::BaseAddressRegister::address</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00014">hardware_communication::inputOutput</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00013">hardware_communication::memoryMapping</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00020">hardware_communication::BaseAddressRegister::prefetchable</a>, <a class="el" href="../../d0/d46/a40742_source.html#l00033">read32()</a>, <a class="el" href="../../d0/d46/a40742_source.html#l00047">read8()</a>, and <a class="el" href="../../d3/d2b/a40781_source.html#l00023">hardware_communication::BaseAddressRegister::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d46/a40742_source.html#l00118">recursiveSelDriver()</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_a5e00e862f7af95887e09f3b90f7357fc_cgraph.png" border="0" usemap="#ade/d77/a41723_a5e00e862f7af95887e09f3b90f7357fc_cgraph" alt=""/></div>
<map name="ade/d77/a41723_a5e00e862f7af95887e09f3b90f7357fc_cgraph" id="ade/d77/a41723_a5e00e862f7af95887e09f3b90f7357fc_cgraph">
<area shape="rect" title="Decodes a raw BAR value into a BaseAddressRegister object." alt="" coords="5,62,240,117"/>
<area shape="rect" href="../../de/d77/a41723.html#a8be9d213f644608726499edca159e1e4" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="527,69,717,109"/>
<area shape="poly" title=" " alt="" coords="240,83,288,83,479,83,513,83,513,89,479,88,288,88,240,89"/>
<area shape="rect" href="../../de/d77/a41723.html#a6e21604894939edaafd1d5baae2840dd" title="Reads an 8&#45;bit byte from the PCI configuration space." alt="" coords="288,97,479,137"/>
<area shape="poly" title=" " alt="" coords="240,99,274,103,274,108,240,105"/>
<area shape="rect" href="../../de/d77/a41723.html#a99c80eb69bb5258a96fb3b9c61ce9dd3" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="765,5,968,45"/>
<area shape="poly" title=" " alt="" coords="699,67,776,46,777,51,700,72"/>
<area shape="rect" href="../../d0/d66/a41743.html#a742b40049c70bfda79a3031b85297948" title="Reads a 32&#45;bit value from the I/O port." alt="" coords="771,69,962,109"/>
<area shape="poly" title=" " alt="" coords="718,87,757,87,757,92,718,92"/>
<area shape="rect" href="../../d0/d66/a41743.html#ad13c0ec90a83f05b61c023dd8a1f53e8" title="Writes a 32&#45;bit value to the I/O port." alt="" coords="771,133,962,173"/>
<area shape="poly" title=" " alt="" coords="700,107,777,127,776,132,699,112"/>
<area shape="poly" title=" " alt="" coords="479,103,513,99,514,105,479,109"/>
</map>
</div>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_a5e00e862f7af95887e09f3b90f7357fc_icgraph.png" border="0" usemap="#ade/d77/a41723_a5e00e862f7af95887e09f3b90f7357fc_icgraph" alt=""/></div>
<map name="ade/d77/a41723_a5e00e862f7af95887e09f3b90f7357fc_icgraph" id="ade/d77/a41723_a5e00e862f7af95887e09f3b90f7357fc_icgraph">
<area shape="rect" title="Decodes a raw BAR value into a BaseAddressRegister object." alt="" coords="671,29,905,84"/>
<area shape="rect" href="../../de/d77/a41723.html#a39f63594cdcdad7acc3860d6d339995e" title="Recursively scans the bus for devices and bridges, assigning drivers where possible." alt="" coords="412,29,623,84"/>
<area shape="poly" title=" " alt="" coords="657,59,623,59,623,54,657,54"/>
<area shape="poly" title=" " alt="" coords="561,18,545,11,517,8,494,10,479,15,472,21,472,29,467,29,467,19,476,10,493,5,517,3,547,6,563,14"/>
<area shape="rect" href="../../de/d77/a41723.html#a86f101dc2b53f938d5ac466c7ec33e2c" title="Starts the driver selection process from Bus 0." alt="" coords="148,37,364,77"/>
<area shape="poly" title=" " alt="" coords="399,59,364,59,364,54,399,54"/>
<area shape="rect" href="../../d7/de8/a40730.html#abb4e4866092116b520310d61961bfe12" title="The main entry point for the C++ kernel." alt="" coords="5,44,100,69"/>
<area shape="poly" title=" " alt="" coords="134,59,100,59,100,54,134,54"/>
</map>
</div>

</div>
</div>
<a id="adf54e2d1841368c2f8b2d5989a2fa7b0" name="adf54e2d1841368c2f8b2d5989a2fa7b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf54e2d1841368c2f8b2d5989a2fa7b0">&#9670;&#160;</a></span>getDeviceDescriptor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d9d/a41719.html">PCI_DeviceDescriptor</a> PCI_Controller::getDeviceDescriptor </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>function</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the configuration header to create a descriptor object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>bus number. </td></tr>
    <tr><td class="paramname">device</td><td>device number. </td></tr>
    <tr><td class="paramname">function</td><td>function number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A populated <a class="el" href="../../d4/d9d/a41719.html" title="A descriptor containing all essential information about a specific PCI device function.">PCI_DeviceDescriptor</a> object. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d46/a40742_source.html#l00092">92</a> of file <a class="el" href="../../d0/d46/a40742_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   93</span>{</div>
<div class="line"><span class="lineno">   94</span>    <a class="code hl_class" href="../../d4/d9d/a41719.html">PCI_DeviceDescriptor</a> result;</div>
<div class="line"><span class="lineno">   95</span>    result.<a class="code hl_variable" href="../../d4/d9d/a41719.html#a604fdd0b445c8727be6c3f0f1a3683f4">bus</a> =        bus;</div>
<div class="line"><span class="lineno">   96</span>    result.<a class="code hl_variable" href="../../d4/d9d/a41719.html#a0fabbff95539e5b1ed92a995f509da3a">device</a> =     device;</div>
<div class="line"><span class="lineno">   97</span>    result.<a class="code hl_variable" href="../../d4/d9d/a41719.html#a6693e1484a8c125631ed61427c85b14e">function</a> =   function;</div>
<div class="line"><span class="lineno">   98</span> </div>
<div class="line"><span class="lineno">   99</span>    result.<a class="code hl_variable" href="../../d4/d9d/a41719.html#aee5360551eec5a3b31638a0372fdda71">vendorId</a> =   <a class="code hl_function" href="../../de/d77/a41723.html#abbe08b680f1d06bcd047cd0c8f215bfd">read16</a>(bus, device, function, 0x00);</div>
<div class="line"><span class="lineno">  100</span>    result.<a class="code hl_variable" href="../../d4/d9d/a41719.html#afaf41d7a2a6080418e68115af06710b3">deviceId</a> =   <a class="code hl_function" href="../../de/d77/a41723.html#abbe08b680f1d06bcd047cd0c8f215bfd">read16</a>(bus, device, function, 0x02);</div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>    result.<a class="code hl_variable" href="../../d4/d9d/a41719.html#a47709787dd44be45e9b622dbea4c17f0">revision</a> =       <a class="code hl_function" href="../../de/d77/a41723.html#a6e21604894939edaafd1d5baae2840dd">read8</a>(bus, device, function, 0x08);</div>
<div class="line"><span class="lineno">  103</span>    result.<a class="code hl_variable" href="../../d4/d9d/a41719.html#a40aef755e64abb912c480142443461d7">interfaceId</a> =    <a class="code hl_function" href="../../de/d77/a41723.html#a6e21604894939edaafd1d5baae2840dd">read8</a>(bus, device, function, 0x09);</div>
<div class="line"><span class="lineno">  104</span>    result.<a class="code hl_variable" href="../../d4/d9d/a41719.html#aab6f4d0868ad0278d4094f49026b7cdb">subclassId</a> =     <a class="code hl_function" href="../../de/d77/a41723.html#a6e21604894939edaafd1d5baae2840dd">read8</a>(bus, device, function, 0x0A);</div>
<div class="line"><span class="lineno">  105</span>    result.<a class="code hl_variable" href="../../d4/d9d/a41719.html#ad622a6f55e45fd14250fcd10c42a3c97">classId</a> =        <a class="code hl_function" href="../../de/d77/a41723.html#a6e21604894939edaafd1d5baae2840dd">read8</a>(bus, device, function, 0x0B);</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>    result.<a class="code hl_variable" href="../../d4/d9d/a41719.html#a4b95645003dcb8c06e1646904e73a496">headerType</a> = <a class="code hl_function" href="../../de/d77/a41723.html#a6e21604894939edaafd1d5baae2840dd">read8</a>(bus, device, function, 0x0E);</div>
<div class="line"><span class="lineno">  108</span>    </div>
<div class="line"><span class="lineno">  109</span>    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 6; i++){</div>
<div class="line"><span class="lineno">  110</span>        result.<a class="code hl_variable" href="../../d4/d9d/a41719.html#a29a14a80fbb46d80c05a0fe6fcb6228d">bar</a>[i] = <a class="code hl_function" href="../../de/d77/a41723.html#a8be9d213f644608726499edca159e1e4">read32</a>(bus, device, function, 0x10 + (i * 4));</div>
<div class="line"><span class="lineno">  111</span>    }</div>
<div class="line"><span class="lineno">  112</span>    </div>
<div class="line"><span class="lineno">  113</span>    result.<a class="code hl_variable" href="../../d4/d9d/a41719.html#ad2b77550b237a1d9a4665601427da19f">interrupt</a> =  <a class="code hl_function" href="../../de/d77/a41723.html#a6e21604894939edaafd1d5baae2840dd">read8</a>(bus, device, function, 0x3C);</div>
<div class="line"><span class="lineno">  114</span> </div>
<div class="line"><span class="lineno">  115</span>    <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  116</span>}</div>
<div class="ttc" id="aa41719_html"><div class="ttname"><a href="../../d4/d9d/a41719.html">hardware_communication::PCI_DeviceDescriptor</a></div><div class="ttdoc">A descriptor containing all essential information about a specific PCI device function.</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d2b/a40781_source.html#l00027">kpci.hpp:27</a></div></div>
<div class="ttc" id="aa41719_html_a0fabbff95539e5b1ed92a995f509da3a"><div class="ttname"><a href="../../d4/d9d/a41719.html#a0fabbff95539e5b1ed92a995f509da3a">hardware_communication::PCI_DeviceDescriptor::device</a></div><div class="ttdeci">uint8_t device</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d2b/a40781_source.html#l00030">kpci.hpp:30</a></div></div>
<div class="ttc" id="aa41719_html_a29a14a80fbb46d80c05a0fe6fcb6228d"><div class="ttname"><a href="../../d4/d9d/a41719.html#a29a14a80fbb46d80c05a0fe6fcb6228d">hardware_communication::PCI_DeviceDescriptor::bar</a></div><div class="ttdeci">uint32_t bar[6]</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d2b/a40781_source.html#l00043">kpci.hpp:43</a></div></div>
<div class="ttc" id="aa41719_html_a40aef755e64abb912c480142443461d7"><div class="ttname"><a href="../../d4/d9d/a41719.html#a40aef755e64abb912c480142443461d7">hardware_communication::PCI_DeviceDescriptor::interfaceId</a></div><div class="ttdeci">uint8_t interfaceId</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d2b/a40781_source.html#l00037">kpci.hpp:37</a></div></div>
<div class="ttc" id="aa41719_html_a47709787dd44be45e9b622dbea4c17f0"><div class="ttname"><a href="../../d4/d9d/a41719.html#a47709787dd44be45e9b622dbea4c17f0">hardware_communication::PCI_DeviceDescriptor::revision</a></div><div class="ttdeci">uint8_t revision</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d2b/a40781_source.html#l00036">kpci.hpp:36</a></div></div>
<div class="ttc" id="aa41719_html_a4b95645003dcb8c06e1646904e73a496"><div class="ttname"><a href="../../d4/d9d/a41719.html#a4b95645003dcb8c06e1646904e73a496">hardware_communication::PCI_DeviceDescriptor::headerType</a></div><div class="ttdeci">uint8_t headerType</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d2b/a40781_source.html#l00041">kpci.hpp:41</a></div></div>
<div class="ttc" id="aa41719_html_a604fdd0b445c8727be6c3f0f1a3683f4"><div class="ttname"><a href="../../d4/d9d/a41719.html#a604fdd0b445c8727be6c3f0f1a3683f4">hardware_communication::PCI_DeviceDescriptor::bus</a></div><div class="ttdeci">uint8_t bus</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d2b/a40781_source.html#l00029">kpci.hpp:29</a></div></div>
<div class="ttc" id="aa41719_html_a6693e1484a8c125631ed61427c85b14e"><div class="ttname"><a href="../../d4/d9d/a41719.html#a6693e1484a8c125631ed61427c85b14e">hardware_communication::PCI_DeviceDescriptor::function</a></div><div class="ttdeci">uint8_t function</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d2b/a40781_source.html#l00031">kpci.hpp:31</a></div></div>
<div class="ttc" id="aa41719_html_aab6f4d0868ad0278d4094f49026b7cdb"><div class="ttname"><a href="../../d4/d9d/a41719.html#aab6f4d0868ad0278d4094f49026b7cdb">hardware_communication::PCI_DeviceDescriptor::subclassId</a></div><div class="ttdeci">uint8_t subclassId</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d2b/a40781_source.html#l00038">kpci.hpp:38</a></div></div>
<div class="ttc" id="aa41719_html_ad2b77550b237a1d9a4665601427da19f"><div class="ttname"><a href="../../d4/d9d/a41719.html#ad2b77550b237a1d9a4665601427da19f">hardware_communication::PCI_DeviceDescriptor::interrupt</a></div><div class="ttdeci">uint8_t interrupt</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d2b/a40781_source.html#l00045">kpci.hpp:45</a></div></div>
<div class="ttc" id="aa41719_html_ad622a6f55e45fd14250fcd10c42a3c97"><div class="ttname"><a href="../../d4/d9d/a41719.html#ad622a6f55e45fd14250fcd10c42a3c97">hardware_communication::PCI_DeviceDescriptor::classId</a></div><div class="ttdeci">uint8_t classId</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d2b/a40781_source.html#l00039">kpci.hpp:39</a></div></div>
<div class="ttc" id="aa41719_html_aee5360551eec5a3b31638a0372fdda71"><div class="ttname"><a href="../../d4/d9d/a41719.html#aee5360551eec5a3b31638a0372fdda71">hardware_communication::PCI_DeviceDescriptor::vendorId</a></div><div class="ttdeci">uint16_t vendorId</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d2b/a40781_source.html#l00033">kpci.hpp:33</a></div></div>
<div class="ttc" id="aa41719_html_afaf41d7a2a6080418e68115af06710b3"><div class="ttname"><a href="../../d4/d9d/a41719.html#afaf41d7a2a6080418e68115af06710b3">hardware_communication::PCI_DeviceDescriptor::deviceId</a></div><div class="ttdeci">uint16_t deviceId</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d2b/a40781_source.html#l00034">kpci.hpp:34</a></div></div>
<div class="ttc" id="aa41723_html_abbe08b680f1d06bcd047cd0c8f215bfd"><div class="ttname"><a href="../../de/d77/a41723.html#abbe08b680f1d06bcd047cd0c8f215bfd">hardware_communication::PCI_Controller::read16</a></div><div class="ttdeci">uint16_t read16(uint8_t bus, uint8_t device, uint8_t function, uint8_t registerOffset)</div><div class="ttdoc">Reads a 16-bit word from the PCI configuration space.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d46/a40742_source.html#l00040">kpci.cpp:40</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d2b/a40781_source.html#l00043">hardware_communication::PCI_DeviceDescriptor::bar</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00029">hardware_communication::PCI_DeviceDescriptor::bus</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00039">hardware_communication::PCI_DeviceDescriptor::classId</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00030">hardware_communication::PCI_DeviceDescriptor::device</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00034">hardware_communication::PCI_DeviceDescriptor::deviceId</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00031">hardware_communication::PCI_DeviceDescriptor::function</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00041">hardware_communication::PCI_DeviceDescriptor::headerType</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00037">hardware_communication::PCI_DeviceDescriptor::interfaceId</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00045">hardware_communication::PCI_DeviceDescriptor::interrupt</a>, <a class="el" href="../../d0/d46/a40742_source.html#l00040">read16()</a>, <a class="el" href="../../d0/d46/a40742_source.html#l00033">read32()</a>, <a class="el" href="../../d0/d46/a40742_source.html#l00047">read8()</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00036">hardware_communication::PCI_DeviceDescriptor::revision</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00038">hardware_communication::PCI_DeviceDescriptor::subclassId</a>, and <a class="el" href="../../d3/d2b/a40781_source.html#l00033">hardware_communication::PCI_DeviceDescriptor::vendorId</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d46/a40742_source.html#l00118">recursiveSelDriver()</a>, and <a class="el" href="../../d0/d46/a40742_source.html#l00154">scanBus()</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_adf54e2d1841368c2f8b2d5989a2fa7b0_cgraph.png" border="0" usemap="#ade/d77/a41723_adf54e2d1841368c2f8b2d5989a2fa7b0_cgraph" alt=""/></div>
<map name="ade/d77/a41723_adf54e2d1841368c2f8b2d5989a2fa7b0_cgraph" id="ade/d77/a41723_adf54e2d1841368c2f8b2d5989a2fa7b0_cgraph">
<area shape="rect" title="Reads the configuration header to create a descriptor object." alt="" coords="5,69,268,109"/>
<area shape="rect" href="../../de/d77/a41723.html#abbe08b680f1d06bcd047cd0c8f215bfd" title="Reads a 16&#45;bit word from the PCI configuration space." alt="" coords="316,12,507,52"/>
<area shape="poly" title=" " alt="" coords="233,67,302,52,303,57,234,72"/>
<area shape="rect" href="../../de/d77/a41723.html#a8be9d213f644608726499edca159e1e4" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="555,69,745,109"/>
<area shape="poly" title=" " alt="" coords="268,87,541,87,541,92,268,92"/>
<area shape="rect" href="../../de/d77/a41723.html#a6e21604894939edaafd1d5baae2840dd" title="Reads an 8&#45;bit byte from the PCI configuration space." alt="" coords="316,127,507,167"/>
<area shape="poly" title=" " alt="" coords="234,107,303,121,302,127,233,112"/>
<area shape="poly" title=" " alt="" coords="496,49,554,64,552,69,495,55"/>
<area shape="rect" href="../../de/d77/a41723.html#a99c80eb69bb5258a96fb3b9c61ce9dd3" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="793,5,996,45"/>
<area shape="poly" title=" " alt="" coords="727,67,804,46,805,51,728,72"/>
<area shape="rect" href="../../d0/d66/a41743.html#a742b40049c70bfda79a3031b85297948" title="Reads a 32&#45;bit value from the I/O port." alt="" coords="799,69,990,109"/>
<area shape="poly" title=" " alt="" coords="746,87,785,87,785,92,746,92"/>
<area shape="rect" href="../../d0/d66/a41743.html#ad13c0ec90a83f05b61c023dd8a1f53e8" title="Writes a 32&#45;bit value to the I/O port." alt="" coords="799,133,990,173"/>
<area shape="poly" title=" " alt="" coords="728,107,805,127,804,132,727,112"/>
<area shape="poly" title=" " alt="" coords="495,124,552,110,554,115,496,129"/>
</map>
</div>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_adf54e2d1841368c2f8b2d5989a2fa7b0_icgraph.png" border="0" usemap="#ade/d77/a41723_adf54e2d1841368c2f8b2d5989a2fa7b0_icgraph" alt=""/></div>
<map name="ade/d77/a41723_adf54e2d1841368c2f8b2d5989a2fa7b0_icgraph" id="ade/d77/a41723_adf54e2d1841368c2f8b2d5989a2fa7b0_icgraph">
<area shape="rect" title="Reads the configuration header to create a descriptor object." alt="" coords="1011,85,1273,125"/>
<area shape="rect" href="../../de/d77/a41723.html#a39f63594cdcdad7acc3860d6d339995e" title="Recursively scans the bus for devices and bridges, assigning drivers where possible." alt="" coords="752,29,963,84"/>
<area shape="poly" title=" " alt="" coords="1010,85,963,77,963,72,1010,80"/>
<area shape="rect" href="../../de/d77/a41723.html#a676c96d825ec578ff98c965c4b999aec" title="Scans a bus just for listing devices (does not instantiate drivers)." alt="" coords="762,133,953,173"/>
<area shape="poly" title=" " alt="" coords="1010,130,953,139,952,134,1009,124"/>
<area shape="poly" title=" " alt="" coords="901,18,885,11,857,8,834,10,819,15,812,21,812,29,807,29,807,19,816,10,833,5,857,3,887,6,903,14"/>
<area shape="rect" href="../../de/d77/a41723.html#a86f101dc2b53f938d5ac466c7ec33e2c" title="Starts the driver selection process from Bus 0." alt="" coords="488,37,704,77"/>
<area shape="poly" title=" " alt="" coords="739,59,704,59,704,54,739,54"/>
<area shape="rect" href="../../d7/de8/a40730.html#abb4e4866092116b520310d61961bfe12" title="The main entry point for the C++ kernel." alt="" coords="304,44,399,69"/>
<area shape="poly" title=" " alt="" coords="474,59,399,59,399,54,474,54"/>
<area shape="poly" title=" " alt="" coords="902,121,886,114,857,111,832,113,817,118,811,124,814,131,809,133,806,123,814,114,831,108,857,106,888,109,904,116"/>
<area shape="rect" href="../../d3/ddf/a41631.html#a64cee1fd80a35d996188c0034ec26b64" title="Simple command processor." alt="" coords="519,133,673,173"/>
<area shape="poly" title=" " alt="" coords="748,155,673,155,673,150,748,150"/>
<area shape="rect" href="../../d3/ddf/a41631.html#ab76062d9a8256ca7a40503fd76095903" title="The single, centralized function for handling all key presses." alt="" coords="263,140,440,165"/>
<area shape="poly" title=" " alt="" coords="505,155,440,155,440,150,505,150"/>
<area shape="rect" href="../../d1/d18/a41643.html#add675289514a4144f97d2189183400a8" title=" " alt="" coords="5,101,215,141"/>
<area shape="poly" title=" " alt="" coords="249,142,215,137,215,132,249,136"/>
<area shape="rect" href="../../dd/d75/a41635.html#af82a0bd16f995dd285d4f7822117377c" title="Handles key down events by forwarding them to the shell." alt="" coords="21,165,199,205"/>
<area shape="poly" title=" " alt="" coords="249,169,200,175,199,170,249,164"/>
</map>
</div>

</div>
</div>
<a id="a0a5c1a26be6003b1ef1478fdc7ae2466" name="a0a5c1a26be6003b1ef1478fdc7ae2466"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a5c1a26be6003b1ef1478fdc7ae2466">&#9670;&#160;</a></span>getDriver()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d60/a41647.html">driver::Driver</a> * PCI_Controller::getDriver </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d9d/a41719.html">PCI_DeviceDescriptor</a>&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/ded/a41711.html">hardware_communication::InterruptManager</a> *&#160;</td>
          <td class="paramname"><em>interrupt_manager</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Factory method that instantiates the correct driver for a given device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>device descriptor containing VendorID and DeviceID. </td></tr>
    <tr><td class="paramname">interrupt_manager</td><td>interrupt manager to pass to the driver. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the new driver instance, or 0 if no driver is found. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d46/a40742_source.html#l00246">246</a> of file <a class="el" href="../../d0/d46/a40742_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  247</span>{</div>
<div class="line"><span class="lineno">  248</span>    (void) interrupt_manager;</div>
<div class="line"><span class="lineno">  249</span> </div>
<div class="line"><span class="lineno">  250</span>    <a class="code hl_class" href="../../dd/d60/a41647.html">driver::Driver</a>* <a class="code hl_namespace" href="../../d6/d9d/a40813.html">driver</a> = 0;</div>
<div class="line"><span class="lineno">  251</span>    <span class="keywordflow">switch</span>(dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#aee5360551eec5a3b31638a0372fdda71">vendorId</a>)</div>
<div class="line"><span class="lineno">  252</span>    {</div>
<div class="line"><span class="lineno">  253</span>        <span class="keywordflow">case</span> 0x1022: <span class="comment">// AMD</span></div>
<div class="line"><span class="lineno">  254</span>            <span class="keywordflow">switch</span>(dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#afaf41d7a2a6080418e68115af06710b3">deviceId</a>)</div>
<div class="line"><span class="lineno">  255</span>            {</div>
<div class="line"><span class="lineno">  256</span>                <span class="keywordflow">case</span> 0x2000:</div>
<div class="line"><span class="lineno">  257</span>                    <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;AMD am79c973 &quot;</span>);</div>
<div class="line"><span class="lineno">  258</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  259</span>            }</div>
<div class="line"><span class="lineno">  260</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>        <span class="keywordflow">case</span> 0x8086: <span class="comment">// Intel</span></div>
<div class="line"><span class="lineno">  263</span>            <span class="keywordflow">switch</span>(dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#afaf41d7a2a6080418e68115af06710b3">deviceId</a>)</div>
<div class="line"><span class="lineno">  264</span>            {</div>
<div class="line"><span class="lineno">  265</span>                <span class="keywordflow">case</span> 0x1237: <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;Intel 440FX Host Bridge &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  266</span>                <span class="keywordflow">case</span> 0x7000: <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;Intel PIIX3 ISA Bridge &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  267</span>                <span class="keywordflow">case</span> 0x7010: <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;Intel PIIX3 IDE Controller &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  268</span>                <span class="keywordflow">case</span> 0x7113: <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;Intel PIIX4 ACPI &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  269</span>                <span class="keywordflow">case</span> 0x100E: <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;Intel E1000 Ethernet &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  270</span>            }</div>
<div class="line"><span class="lineno">  271</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  272</span>            </div>
<div class="line"><span class="lineno">  273</span>        <span class="keywordflow">case</span> 0x1234:</div>
<div class="line"><span class="lineno">  274</span>            <span class="keywordflow">switch</span>(dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#afaf41d7a2a6080418e68115af06710b3">deviceId</a>)</div>
<div class="line"><span class="lineno">  275</span>            {</div>
<div class="line"><span class="lineno">  276</span>                <span class="keywordflow">case</span> 0x1111: <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;QEMU VGA Graphics &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  277</span>            }</div>
<div class="line"><span class="lineno">  278</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  279</span>    }</div>
<div class="line"><span class="lineno">  280</span>    <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;| &quot;</span>);</div>
<div class="line"><span class="lineno">  281</span>    </div>
<div class="line"><span class="lineno">  282</span>    <span class="keywordflow">switch</span>(dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#ad622a6f55e45fd14250fcd10c42a3c97">classId</a>)</div>
<div class="line"><span class="lineno">  283</span>    {</div>
<div class="line"><span class="lineno">  284</span>        <span class="keywordflow">case</span> 0x03:</div>
<div class="line"><span class="lineno">  285</span>            <span class="keywordflow">if</span>(dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#aab6f4d0868ad0278d4094f49026b7cdb">subclassId</a> == 0x00) <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;Generic VGA &quot;</span>);</div>
<div class="line"><span class="lineno">  286</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  287</span>        <span class="keywordflow">case</span> 0x02:</div>
<div class="line"><span class="lineno">  288</span>            <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;Generic Network Card &quot;</span>);</div>
<div class="line"><span class="lineno">  289</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  290</span>    }</div>
<div class="line"><span class="lineno">  291</span> </div>
<div class="line"><span class="lineno">  292</span>    <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;|\n---\n&quot;</span>);</div>
<div class="line"><span class="lineno">  293</span>    <span class="keywordflow">return</span> <a class="code hl_namespace" href="../../d6/d9d/a40813.html">driver</a>;</div>
<div class="line"><span class="lineno">  294</span>}</div>
<div class="ttc" id="aa40812_html_a45ee52b918a784ff0e96e7c8917a91d9"><div class="ttname"><a href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a></div><div class="ttdeci">int printf(const char *format,...)</div><div class="ttdoc">A custom implementation of the standard printf function for writing to both VGA text mode memory and ...</div><div class="ttdef"><b>Definition</b> <a href="../../da/d6e/a40736_source.html#l00313">kiostream.cpp:313</a></div></div>
<div class="ttc" id="aa40813_html"><div class="ttname"><a href="../../d6/d9d/a40813.html">driver</a></div><div class="ttdef"><b>Definition</b> <a href="../../d3/d34/a40799_source.html#l00006">kdriver.hpp:7</a></div></div>
<div class="ttc" id="aa41647_html"><div class="ttname"><a href="../../dd/d60/a41647.html">driver::Driver</a></div><div class="ttdoc">Base class (interface) for all hardware drivers in the operating system.</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d34/a40799_source.html#l00009">kdriver.hpp:9</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d2b/a40781_source.html#l00039">hardware_communication::PCI_DeviceDescriptor::classId</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00034">hardware_communication::PCI_DeviceDescriptor::deviceId</a>, <a class="el" href="../../da/d6e/a40736_source.html#l00313">basic::printf()</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00038">hardware_communication::PCI_DeviceDescriptor::subclassId</a>, and <a class="el" href="../../d3/d2b/a40781_source.html#l00033">hardware_communication::PCI_DeviceDescriptor::vendorId</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d46/a40742_source.html#l00118">recursiveSelDriver()</a>.</p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_a0a5c1a26be6003b1ef1478fdc7ae2466_cgraph.png" border="0" usemap="#ade/d77/a41723_a0a5c1a26be6003b1ef1478fdc7ae2466_cgraph" alt=""/></div>
<map name="ade/d77/a41723_a0a5c1a26be6003b1ef1478fdc7ae2466_cgraph" id="ade/d77/a41723_a0a5c1a26be6003b1ef1478fdc7ae2466_cgraph">
<area shape="rect" title="Factory method that instantiates the correct driver for a given device." alt="" coords="5,99,196,139"/>
<area shape="rect" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9" title="A custom implementation of the standard printf function for writing to both VGA text mode memory and ..." alt="" coords="244,107,343,132"/>
<area shape="poly" title=" " alt="" coords="196,117,230,117,230,122,196,122"/>
<area shape="rect" href="../../d5/d79/a40812.html#aeacdadb7f1bb76f1452689d0e5cd4dad" title="Converts a double&#45;precision floating point number to a string." alt="" coords="391,5,551,31"/>
<area shape="poly" title=" " alt="" coords="309,104,344,77,389,48,419,33,422,38,392,52,348,81,312,108"/>
<area shape="rect" href="../../d5/d79/a40812.html#a84a72638a4a04f5706b7f9b217359ecf" title="Converts an unsigned long long integer to a string." alt="" coords="604,56,736,81"/>
<area shape="poly" title=" " alt="" coords="336,104,390,91,494,77,590,70,590,75,495,83,391,97,337,109"/>
<area shape="rect" href="../../d5/d79/a40812.html#a3d0041ad59dbbae5bc9adbb8ab784499" title="Internal function to print a null&#45;terminated string to video memory AND serial." alt="" coords="599,132,741,157"/>
<area shape="poly" title=" " alt="" coords="337,129,391,141,491,147,584,147,584,152,491,153,390,146,336,135"/>
<area shape="rect" href="../../d5/d79/a40812.html#a5ecbf4c8112c602ba65a689ebe5014f8" title="Prints a hexadecimal number with leading zeros." alt="" coords="411,107,531,132"/>
<area shape="poly" title=" " alt="" coords="343,117,396,117,396,122,343,122"/>
<area shape="rect" href="../../d5/d79/a40812.html#a9d1f0f838e646660db6d9284725c2b4c" title="Updates the position of the text mode cursor." alt="" coords="393,208,549,233"/>
<area shape="poly" title=" " alt="" coords="312,130,348,158,392,186,422,200,419,205,389,191,344,162,309,134"/>
<area shape="rect" href="../../d5/d79/a40812.html#aa7de4c6aa018e049aa8992b037cc052a" title="Calculates the power of a number." alt="" coords="618,5,722,31"/>
<area shape="poly" title=" " alt="" coords="551,15,604,15,604,21,551,21"/>
<area shape="poly" title=" " alt="" coords="522,28,607,50,606,55,521,33"/>
<area shape="rect" href="../../d5/d79/a40812.html#a6cfc2f6949fb98dfc419f9fd19f95982" title="Reverses a string in place." alt="" coords="820,29,933,55"/>
<area shape="poly" title=" " alt="" coords="736,58,806,48,806,54,737,63"/>
<area shape="rect" href="../../d4/d55/a41667.html#adfb4220d2c664ae5ba11e04d9d182f70" title="Calculates the video memory value for the mouse cursor block." alt="" coords="797,79,956,133"/>
<area shape="poly" title=" " alt="" coords="738,129,783,121,784,126,739,135"/>
<area shape="rect" href="../../d5/d79/a40812.html#adef8a5b5400c388c29477d74db094cf3" title="Writes a single character to the COM1 serial port." alt="" coords="789,157,964,183"/>
<area shape="poly" title=" " alt="" coords="742,151,776,155,775,160,741,156"/>
<area shape="rect" href="../../d5/d79/a40812.html#a6233646eaac73374e727981e1157e5d7" title="Checks if the serial port&#39;s transmit buffer is empty (COM1)." alt="" coords="1026,151,1189,176"/>
<area shape="poly" title=" " alt="" coords="964,165,1012,163,1012,169,964,170"/>
<area shape="rect" href="../../d8/da7/a41731.html#a6ede8fba6ba7e26c5982a91a3d5ffa72" title="Writes an 8&#45;bit value to the I/O port." alt="" coords="1012,201,1203,241"/>
<area shape="poly" title=" " alt="" coords="936,180,1003,195,1002,200,935,185"/>
<area shape="rect" href="../../d8/da7/a41731.html#a425297307d64cb5d9889b32767f8fdc3" title="Reads an 8&#45;bit value from the I/O port." alt="" coords="1251,143,1441,183"/>
<area shape="poly" title=" " alt="" coords="1189,161,1237,161,1237,166,1189,166"/>
<area shape="poly" title=" " alt="" coords="521,104,606,82,607,87,522,109"/>
<area shape="poly" title=" " alt="" coords="531,124,585,131,585,137,531,130"/>
<area shape="poly" title=" " alt="" coords="549,218,998,218,998,223,549,223"/>
</map>
</div>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_a0a5c1a26be6003b1ef1478fdc7ae2466_icgraph.png" border="0" usemap="#ade/d77/a41723_a0a5c1a26be6003b1ef1478fdc7ae2466_icgraph" alt=""/></div>
<map name="ade/d77/a41723_a0a5c1a26be6003b1ef1478fdc7ae2466_icgraph" id="ade/d77/a41723_a0a5c1a26be6003b1ef1478fdc7ae2466_icgraph">
<area shape="rect" title="Factory method that instantiates the correct driver for a given device." alt="" coords="671,37,861,77"/>
<area shape="rect" href="../../de/d77/a41723.html#a39f63594cdcdad7acc3860d6d339995e" title="Recursively scans the bus for devices and bridges, assigning drivers where possible." alt="" coords="412,29,623,84"/>
<area shape="poly" title=" " alt="" coords="657,59,623,59,623,54,657,54"/>
<area shape="poly" title=" " alt="" coords="559,18,544,11,517,8,495,10,481,15,474,21,474,29,469,29,469,19,478,10,494,5,517,3,545,6,561,14"/>
<area shape="rect" href="../../de/d77/a41723.html#a86f101dc2b53f938d5ac466c7ec33e2c" title="Starts the driver selection process from Bus 0." alt="" coords="148,37,364,77"/>
<area shape="poly" title=" " alt="" coords="399,59,364,59,364,54,399,54"/>
<area shape="rect" href="../../d7/de8/a40730.html#abb4e4866092116b520310d61961bfe12" title="The main entry point for the C++ kernel." alt="" coords="5,44,100,69"/>
<area shape="poly" title=" " alt="" coords="134,59,100,59,100,54,134,54"/>
</map>
</div>

</div>
</div>
<a id="abbe08b680f1d06bcd047cd0c8f215bfd" name="abbe08b680f1d06bcd047cd0c8f215bfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbe08b680f1d06bcd047cd0c8f215bfd">&#9670;&#160;</a></span>read16()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t PCI_Controller::read16 </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>registerOffset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads a 16-bit word from the PCI configuration space. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>bus number. </td></tr>
    <tr><td class="paramname">device</td><td>device number. </td></tr>
    <tr><td class="paramname">function</td><td>function number. </td></tr>
    <tr><td class="paramname">registerOffset</td><td>offset. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>16-bit value. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d46/a40742_source.html#l00040">40</a> of file <a class="el" href="../../d0/d46/a40742_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   41</span>{</div>
<div class="line"><span class="lineno">   42</span>    uint32_t dword = <a class="code hl_function" href="../../de/d77/a41723.html#a8be9d213f644608726499edca159e1e4">read32</a>(bus, device, function, registerOffset);</div>
<div class="line"><span class="lineno">   43</span>    uint32_t shift = (8 * (registerOffset % 4));</div>
<div class="line"><span class="lineno">   44</span>    <span class="keywordflow">return</span> (uint16_t)(dword &gt;&gt; shift);</div>
<div class="line"><span class="lineno">   45</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d0/d46/a40742_source.html#l00033">read32()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d46/a40742_source.html#l00092">getDeviceDescriptor()</a>.</p>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_abbe08b680f1d06bcd047cd0c8f215bfd_cgraph.png" border="0" usemap="#ade/d77/a41723_abbe08b680f1d06bcd047cd0c8f215bfd_cgraph" alt=""/></div>
<map name="ade/d77/a41723_abbe08b680f1d06bcd047cd0c8f215bfd_cgraph" id="ade/d77/a41723_abbe08b680f1d06bcd047cd0c8f215bfd_cgraph">
<area shape="rect" title="Reads a 16&#45;bit word from the PCI configuration space." alt="" coords="5,69,196,109"/>
<area shape="rect" href="../../de/d77/a41723.html#a8be9d213f644608726499edca159e1e4" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="244,69,435,109"/>
<area shape="poly" title=" " alt="" coords="196,87,230,87,230,92,196,92"/>
<area shape="rect" href="../../de/d77/a41723.html#a99c80eb69bb5258a96fb3b9c61ce9dd3" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="483,5,685,45"/>
<area shape="poly" title=" " alt="" coords="416,67,493,46,495,51,417,72"/>
<area shape="rect" href="../../d0/d66/a41743.html#a742b40049c70bfda79a3031b85297948" title="Reads a 32&#45;bit value from the I/O port." alt="" coords="489,69,679,109"/>
<area shape="poly" title=" " alt="" coords="435,87,475,87,475,92,435,92"/>
<area shape="rect" href="../../d0/d66/a41743.html#ad13c0ec90a83f05b61c023dd8a1f53e8" title="Writes a 32&#45;bit value to the I/O port." alt="" coords="489,133,679,173"/>
<area shape="poly" title=" " alt="" coords="417,107,495,127,493,132,416,112"/>
</map>
</div>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_abbe08b680f1d06bcd047cd0c8f215bfd_icgraph.png" border="0" usemap="#ade/d77/a41723_abbe08b680f1d06bcd047cd0c8f215bfd_icgraph" alt=""/></div>
<map name="ade/d77/a41723_abbe08b680f1d06bcd047cd0c8f215bfd_icgraph" id="ade/d77/a41723_abbe08b680f1d06bcd047cd0c8f215bfd_icgraph">
<area shape="rect" title="Reads a 16&#45;bit word from the PCI configuration space." alt="" coords="1321,85,1512,125"/>
<area shape="rect" href="../../de/d77/a41723.html#adf54e2d1841368c2f8b2d5989a2fa7b0" title="Reads the configuration header to create a descriptor object." alt="" coords="1011,85,1273,125"/>
<area shape="poly" title=" " alt="" coords="1307,107,1273,107,1273,102,1307,102"/>
<area shape="rect" href="../../de/d77/a41723.html#a39f63594cdcdad7acc3860d6d339995e" title="Recursively scans the bus for devices and bridges, assigning drivers where possible." alt="" coords="752,29,963,84"/>
<area shape="poly" title=" " alt="" coords="1010,85,963,77,963,72,1010,80"/>
<area shape="rect" href="../../de/d77/a41723.html#a676c96d825ec578ff98c965c4b999aec" title="Scans a bus just for listing devices (does not instantiate drivers)." alt="" coords="762,133,953,173"/>
<area shape="poly" title=" " alt="" coords="1010,130,953,139,952,134,1009,124"/>
<area shape="poly" title=" " alt="" coords="901,18,885,11,857,8,834,10,819,15,812,21,812,29,807,29,807,19,816,10,833,5,857,3,887,6,903,14"/>
<area shape="rect" href="../../de/d77/a41723.html#a86f101dc2b53f938d5ac466c7ec33e2c" title="Starts the driver selection process from Bus 0." alt="" coords="488,37,704,77"/>
<area shape="poly" title=" " alt="" coords="739,59,704,59,704,54,739,54"/>
<area shape="rect" href="../../d7/de8/a40730.html#abb4e4866092116b520310d61961bfe12" title="The main entry point for the C++ kernel." alt="" coords="304,44,399,69"/>
<area shape="poly" title=" " alt="" coords="474,59,399,59,399,54,474,54"/>
<area shape="poly" title=" " alt="" coords="902,121,886,114,857,111,832,113,817,118,811,124,814,131,809,133,806,123,814,114,831,108,857,106,888,109,904,116"/>
<area shape="rect" href="../../d3/ddf/a41631.html#a64cee1fd80a35d996188c0034ec26b64" title="Simple command processor." alt="" coords="519,133,673,173"/>
<area shape="poly" title=" " alt="" coords="748,155,673,155,673,150,748,150"/>
<area shape="rect" href="../../d3/ddf/a41631.html#ab76062d9a8256ca7a40503fd76095903" title="The single, centralized function for handling all key presses." alt="" coords="263,140,440,165"/>
<area shape="poly" title=" " alt="" coords="505,155,440,155,440,150,505,150"/>
<area shape="rect" href="../../d1/d18/a41643.html#add675289514a4144f97d2189183400a8" title=" " alt="" coords="5,101,215,141"/>
<area shape="poly" title=" " alt="" coords="249,142,215,137,215,132,249,136"/>
<area shape="rect" href="../../dd/d75/a41635.html#af82a0bd16f995dd285d4f7822117377c" title="Handles key down events by forwarding them to the shell." alt="" coords="21,165,199,205"/>
<area shape="poly" title=" " alt="" coords="249,169,200,175,199,170,249,164"/>
</map>
</div>

</div>
</div>
<a id="a8be9d213f644608726499edca159e1e4" name="a8be9d213f644608726499edca159e1e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8be9d213f644608726499edca159e1e4">&#9670;&#160;</a></span>read32()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t PCI_Controller::read32 </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>registerOffset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads a 32-bit double word from the PCI configuration space. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>bus number. </td></tr>
    <tr><td class="paramname">device</td><td>device number. </td></tr>
    <tr><td class="paramname">function</td><td>function number. </td></tr>
    <tr><td class="paramname">registerOffset</td><td>offset (will be aligned automatically). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>32-bit value at the register. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d46/a40742_source.html#l00033">33</a> of file <a class="el" href="../../d0/d46/a40742_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   34</span>{</div>
<div class="line"><span class="lineno">   35</span>    uint32_t address = <a class="code hl_function" href="../../de/d77/a41723.html#a99c80eb69bb5258a96fb3b9c61ce9dd3">getAddress</a>(bus, device, function, registerOffset);</div>
<div class="line"><span class="lineno">   36</span>    <a class="code hl_variable" href="../../de/d77/a41723.html#ab6a9e1ba7e8934198624da046fc80bad">commandPort</a>.<a class="code hl_function" href="../../d0/d66/a41743.html#ad13c0ec90a83f05b61c023dd8a1f53e8">write</a>(address);</div>
<div class="line"><span class="lineno">   37</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="../../de/d77/a41723.html#a63cf29ae25d0a70ee448ac1e2896a041">dataPort</a>.<a class="code hl_function" href="../../d0/d66/a41743.html#a742b40049c70bfda79a3031b85297948">read</a>();</div>
<div class="line"><span class="lineno">   38</span>}</div>
<div class="ttc" id="aa41723_html_a99c80eb69bb5258a96fb3b9c61ce9dd3"><div class="ttname"><a href="../../de/d77/a41723.html#a99c80eb69bb5258a96fb3b9c61ce9dd3">hardware_communication::PCI_Controller::getAddress</a></div><div class="ttdeci">uint32_t getAddress(uint8_t bus, uint8_t device, uint8_t function, uint8_t registerOffset)</div><div class="ttdoc">Helper to construct the 32-bit CONFIG_ADDRESS.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d46/a40742_source.html#l00020">kpci.cpp:20</a></div></div>
<div class="ttc" id="aa41743_html_a742b40049c70bfda79a3031b85297948"><div class="ttname"><a href="../../d0/d66/a41743.html#a742b40049c70bfda79a3031b85297948">hardware_communication::Port32Bit::read</a></div><div class="ttdeci">uint32_t read()</div><div class="ttdoc">Reads a 32-bit value from the I/O port.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d10/a40745_source.html#l00062">kport.cpp:62</a></div></div>
<div class="ttc" id="aa41743_html_ad13c0ec90a83f05b61c023dd8a1f53e8"><div class="ttname"><a href="../../d0/d66/a41743.html#ad13c0ec90a83f05b61c023dd8a1f53e8">hardware_communication::Port32Bit::write</a></div><div class="ttdeci">void write(uint32_t data)</div><div class="ttdoc">Writes a 32-bit value to the I/O port.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d10/a40745_source.html#l00057">kport.cpp:57</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d2b/a40781_source.html#l00057">commandPort</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00056">dataPort</a>, <a class="el" href="../../d0/d46/a40742_source.html#l00020">getAddress()</a>, <a class="el" href="../../d2/d10/a40745_source.html#l00062">hardware_communication::Port32Bit::read()</a>, and <a class="el" href="../../d2/d10/a40745_source.html#l00057">hardware_communication::Port32Bit::write()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d46/a40742_source.html#l00220">getBaseAddressRegister()</a>, <a class="el" href="../../d0/d46/a40742_source.html#l00092">getDeviceDescriptor()</a>, <a class="el" href="../../d0/d46/a40742_source.html#l00040">read16()</a>, <a class="el" href="../../d0/d46/a40742_source.html#l00047">read8()</a>, <a class="el" href="../../d0/d46/a40742_source.html#l00061">write16()</a>, and <a class="el" href="../../d0/d46/a40742_source.html#l00074">write8()</a>.</p>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_a8be9d213f644608726499edca159e1e4_cgraph.png" border="0" usemap="#ade/d77/a41723_a8be9d213f644608726499edca159e1e4_cgraph" alt=""/></div>
<map name="ade/d77/a41723_a8be9d213f644608726499edca159e1e4_cgraph" id="ade/d77/a41723_a8be9d213f644608726499edca159e1e4_cgraph">
<area shape="rect" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="5,69,196,109"/>
<area shape="rect" href="../../de/d77/a41723.html#a99c80eb69bb5258a96fb3b9c61ce9dd3" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="244,5,447,45"/>
<area shape="poly" title=" " alt="" coords="177,67,255,46,256,51,179,72"/>
<area shape="rect" href="../../d0/d66/a41743.html#a742b40049c70bfda79a3031b85297948" title="Reads a 32&#45;bit value from the I/O port." alt="" coords="250,69,441,109"/>
<area shape="poly" title=" " alt="" coords="196,87,236,87,236,92,196,92"/>
<area shape="rect" href="../../d0/d66/a41743.html#ad13c0ec90a83f05b61c023dd8a1f53e8" title="Writes a 32&#45;bit value to the I/O port." alt="" coords="250,133,441,173"/>
<area shape="poly" title=" " alt="" coords="179,107,256,127,255,132,177,112"/>
</map>
</div>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_a8be9d213f644608726499edca159e1e4_icgraph.png" border="0" usemap="#ade/d77/a41723_a8be9d213f644608726499edca159e1e4_icgraph" alt=""/></div>
<map name="ade/d77/a41723_a8be9d213f644608726499edca159e1e4_icgraph" id="ade/d77/a41723_a8be9d213f644608726499edca159e1e4_icgraph">
<area shape="rect" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="1560,222,1751,262"/>
<area shape="rect" href="../../de/d77/a41723.html#a5e00e862f7af95887e09f3b90f7357fc" title="Decodes a raw BAR value into a BaseAddressRegister object." alt="" coords="1025,5,1259,60"/>
<area shape="poly" title=" " alt="" coords="1625,214,1574,168,1544,145,1511,126,1449,99,1383,78,1259,50,1260,45,1385,72,1451,94,1513,121,1546,141,1578,164,1628,210"/>
<area shape="rect" href="../../de/d77/a41723.html#adf54e2d1841368c2f8b2d5989a2fa7b0" title="Reads the configuration header to create a descriptor object." alt="" coords="1011,250,1273,290"/>
<area shape="poly" title=" " alt="" coords="1546,241,1512,241,1417,237,1322,241,1237,253,1236,247,1321,235,1417,232,1512,235,1546,236"/>
<area shape="rect" href="../../de/d77/a41723.html#abbe08b680f1d06bcd047cd0c8f215bfd" title="Reads a 16&#45;bit word from the PCI configuration space." alt="" coords="1321,250,1512,290"/>
<area shape="poly" title=" " alt="" coords="1547,257,1512,261,1512,256,1546,252"/>
<area shape="rect" href="../../de/d77/a41723.html#a6e21604894939edaafd1d5baae2840dd" title="Reads an 8&#45;bit byte from the PCI configuration space." alt="" coords="1321,135,1512,175"/>
<area shape="poly" title=" " alt="" coords="1585,220,1472,178,1474,173,1587,215"/>
<area shape="rect" href="../../de/d77/a41723.html#ac4466a0762483fd1c3ec5f2745a58386" title="Safely writes a 16&#45;bit word to the PCI configuration space." alt="" coords="1321,314,1512,354"/>
<area shape="poly" title=" " alt="" coords="1597,270,1513,304,1480,316,1478,311,1511,300,1595,265"/>
<area shape="rect" href="../../de/d77/a41723.html#a1bbd1027e1d181bb2eb280070e3d1831" title="Safely writes an 8&#45;bit byte to the PCI configuration space." alt="" coords="1321,378,1512,418"/>
<area shape="poly" title=" " alt="" coords="1628,274,1577,322,1513,368,1488,380,1486,376,1511,364,1574,318,1624,270"/>
<area shape="rect" href="../../de/d77/a41723.html#a39f63594cdcdad7acc3860d6d339995e" title="Recursively scans the bus for devices and bridges, assigning drivers where possible." alt="" coords="752,80,963,135"/>
<area shape="poly" title=" " alt="" coords="1025,66,963,83,961,77,1023,61"/>
<area shape="poly" title=" " alt="" coords="901,69,885,62,857,59,834,61,819,65,812,72,812,80,807,80,807,70,816,61,833,55,857,53,887,56,903,64"/>
<area shape="rect" href="../../de/d77/a41723.html#a86f101dc2b53f938d5ac466c7ec33e2c" title="Starts the driver selection process from Bus 0." alt="" coords="488,87,704,127"/>
<area shape="poly" title=" " alt="" coords="739,110,704,110,704,105,739,105"/>
<area shape="rect" href="../../d7/de8/a40730.html#abb4e4866092116b520310d61961bfe12" title="The main entry point for the C++ kernel." alt="" coords="304,95,399,120"/>
<area shape="poly" title=" " alt="" coords="474,110,399,110,399,105,474,105"/>
<area shape="poly" title=" " alt="" coords="1096,245,1009,190,961,159,919,137,921,132,964,154,1012,185,1099,240"/>
<area shape="rect" href="../../de/d77/a41723.html#a676c96d825ec578ff98c965c4b999aec" title="Scans a bus just for listing devices (does not instantiate drivers)." alt="" coords="762,193,953,233"/>
<area shape="poly" title=" " alt="" coords="1028,250,952,234,954,229,1029,245"/>
<area shape="poly" title=" " alt="" coords="902,181,886,174,857,171,832,173,817,178,811,184,814,191,809,193,806,183,814,174,831,168,857,166,888,169,904,176"/>
<area shape="rect" href="../../d3/ddf/a41631.html#a64cee1fd80a35d996188c0034ec26b64" title="Simple command processor." alt="" coords="519,193,673,233"/>
<area shape="poly" title=" " alt="" coords="748,215,673,215,673,210,748,210"/>
<area shape="rect" href="../../d3/ddf/a41631.html#ab76062d9a8256ca7a40503fd76095903" title="The single, centralized function for handling all key presses." alt="" coords="263,200,440,225"/>
<area shape="poly" title=" " alt="" coords="505,215,440,215,440,210,505,210"/>
<area shape="rect" href="../../d1/d18/a41643.html#add675289514a4144f97d2189183400a8" title=" " alt="" coords="5,161,215,201"/>
<area shape="poly" title=" " alt="" coords="249,202,215,197,215,192,249,196"/>
<area shape="rect" href="../../dd/d75/a41635.html#af82a0bd16f995dd285d4f7822117377c" title="Handles key down events by forwarding them to the shell." alt="" coords="21,225,199,265"/>
<area shape="poly" title=" " alt="" coords="249,229,200,235,199,230,249,224"/>
<area shape="poly" title=" " alt="" coords="1307,273,1273,273,1273,267,1307,267"/>
<area shape="poly" title=" " alt="" coords="1368,131,1272,82,1225,63,1227,58,1274,77,1370,126"/>
<area shape="poly" title=" " alt="" coords="1324,135,1273,126,1110,112,963,109,963,103,1111,107,1274,121,1325,130"/>
<area shape="poly" title=" " alt="" coords="1348,183,1323,196,1299,215,1275,234,1229,252,1227,247,1272,229,1296,211,1320,192,1346,179"/>
<area shape="poly" title=" " alt="" coords="1324,181,1274,190,1104,207,953,214,953,209,1104,202,1273,185,1323,176"/>
<area shape="rect" href="../../de/d77/a41723.html#a54eaf77198f4b3816b9276f3d5be1661" title="Checks if a device is a multi&#45;function device." alt="" coords="1012,135,1272,175"/>
<area shape="poly" title=" " alt="" coords="1307,158,1272,158,1272,153,1307,153"/>
<area shape="poly" title=" " alt="" coords="1010,136,963,128,963,122,1010,130"/>
<area shape="poly" title=" " alt="" coords="1029,181,954,196,952,191,1028,175"/>
</map>
</div>

</div>
</div>
<a id="a6e21604894939edaafd1d5baae2840dd" name="a6e21604894939edaafd1d5baae2840dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e21604894939edaafd1d5baae2840dd">&#9670;&#160;</a></span>read8()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t PCI_Controller::read8 </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>registerOffset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads an 8-bit byte from the PCI configuration space. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>bus number. </td></tr>
    <tr><td class="paramname">device</td><td>device number. </td></tr>
    <tr><td class="paramname">function</td><td>function number. </td></tr>
    <tr><td class="paramname">registerOffset</td><td>offset. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>8-bit value. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d46/a40742_source.html#l00047">47</a> of file <a class="el" href="../../d0/d46/a40742_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   48</span>{</div>
<div class="line"><span class="lineno">   49</span>    uint32_t dword = <a class="code hl_function" href="../../de/d77/a41723.html#a8be9d213f644608726499edca159e1e4">read32</a>(bus, device, function, registerOffset);</div>
<div class="line"><span class="lineno">   50</span>    uint32_t shift = (8 * (registerOffset % 4));</div>
<div class="line"><span class="lineno">   51</span>    <span class="keywordflow">return</span> (uint8_t)(dword &gt;&gt; shift);</div>
<div class="line"><span class="lineno">   52</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d0/d46/a40742_source.html#l00033">read32()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d46/a40742_source.html#l00087">deviceHasFunctions()</a>, <a class="el" href="../../d0/d46/a40742_source.html#l00220">getBaseAddressRegister()</a>, <a class="el" href="../../d0/d46/a40742_source.html#l00092">getDeviceDescriptor()</a>, <a class="el" href="../../d0/d46/a40742_source.html#l00118">recursiveSelDriver()</a>, and <a class="el" href="../../d0/d46/a40742_source.html#l00154">scanBus()</a>.</p>
<div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_a6e21604894939edaafd1d5baae2840dd_cgraph.png" border="0" usemap="#ade/d77/a41723_a6e21604894939edaafd1d5baae2840dd_cgraph" alt=""/></div>
<map name="ade/d77/a41723_a6e21604894939edaafd1d5baae2840dd_cgraph" id="ade/d77/a41723_a6e21604894939edaafd1d5baae2840dd_cgraph">
<area shape="rect" title="Reads an 8&#45;bit byte from the PCI configuration space." alt="" coords="5,69,196,109"/>
<area shape="rect" href="../../de/d77/a41723.html#a8be9d213f644608726499edca159e1e4" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="244,69,435,109"/>
<area shape="poly" title=" " alt="" coords="196,87,230,87,230,92,196,92"/>
<area shape="rect" href="../../de/d77/a41723.html#a99c80eb69bb5258a96fb3b9c61ce9dd3" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="483,5,685,45"/>
<area shape="poly" title=" " alt="" coords="416,67,493,46,495,51,417,72"/>
<area shape="rect" href="../../d0/d66/a41743.html#a742b40049c70bfda79a3031b85297948" title="Reads a 32&#45;bit value from the I/O port." alt="" coords="489,69,679,109"/>
<area shape="poly" title=" " alt="" coords="435,87,475,87,475,92,435,92"/>
<area shape="rect" href="../../d0/d66/a41743.html#ad13c0ec90a83f05b61c023dd8a1f53e8" title="Writes a 32&#45;bit value to the I/O port." alt="" coords="489,133,679,173"/>
<area shape="poly" title=" " alt="" coords="417,107,495,127,493,132,416,112"/>
</map>
</div>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_a6e21604894939edaafd1d5baae2840dd_icgraph.png" border="0" usemap="#ade/d77/a41723_a6e21604894939edaafd1d5baae2840dd_icgraph" alt=""/></div>
<map name="ade/d77/a41723_a6e21604894939edaafd1d5baae2840dd_icgraph" id="ade/d77/a41723_a6e21604894939edaafd1d5baae2840dd_icgraph">
<area shape="rect" title="Reads an 8&#45;bit byte from the PCI configuration space." alt="" coords="1321,135,1512,175"/>
<area shape="rect" href="../../de/d77/a41723.html#a54eaf77198f4b3816b9276f3d5be1661" title="Checks if a device is a multi&#45;function device." alt="" coords="1012,199,1272,239"/>
<area shape="poly" title=" " alt="" coords="1318,181,1229,202,1228,197,1316,176"/>
<area shape="rect" href="../../de/d77/a41723.html#a39f63594cdcdad7acc3860d6d339995e" title="Recursively scans the bus for devices and bridges, assigning drivers where possible." alt="" coords="752,84,963,139"/>
<area shape="poly" title=" " alt="" coords="1325,135,1273,126,1110,114,963,111,963,106,1110,108,1274,121,1326,130"/>
<area shape="rect" href="../../de/d77/a41723.html#a676c96d825ec578ff98c965c4b999aec" title="Scans a bus just for listing devices (does not instantiate drivers)." alt="" coords="762,199,953,239"/>
<area shape="poly" title=" " alt="" coords="1386,187,1336,224,1306,241,1274,254,1228,265,1181,270,1086,270,998,258,925,242,926,237,999,253,1087,264,1181,265,1227,259,1273,249,1304,236,1333,220,1382,182"/>
<area shape="rect" href="../../de/d77/a41723.html#a5e00e862f7af95887e09f3b90f7357fc" title="Decodes a raw BAR value into a BaseAddressRegister object." alt="" coords="1025,5,1259,60"/>
<area shape="poly" title=" " alt="" coords="1368,131,1272,82,1225,63,1227,58,1274,77,1370,126"/>
<area shape="rect" href="../../de/d77/a41723.html#adf54e2d1841368c2f8b2d5989a2fa7b0" title="Reads the configuration header to create a descriptor object." alt="" coords="1011,135,1273,175"/>
<area shape="poly" title=" " alt="" coords="1307,158,1273,158,1273,153,1307,153"/>
<area shape="poly" title=" " alt="" coords="1034,198,1010,190,912,141,915,136,1012,185,1036,193"/>
<area shape="poly" title=" " alt="" coords="998,222,953,222,953,217,998,217"/>
<area shape="poly" title=" " alt="" coords="901,73,885,66,857,63,834,65,819,69,812,76,812,84,807,84,807,74,816,65,833,59,857,57,887,60,903,68"/>
<area shape="rect" href="../../de/d77/a41723.html#a86f101dc2b53f938d5ac466c7ec33e2c" title="Starts the driver selection process from Bus 0." alt="" coords="488,91,704,131"/>
<area shape="poly" title=" " alt="" coords="739,114,704,114,704,109,739,109"/>
<area shape="rect" href="../../d7/de8/a40730.html#abb4e4866092116b520310d61961bfe12" title="The main entry point for the C++ kernel." alt="" coords="304,99,399,124"/>
<area shape="poly" title=" " alt="" coords="474,114,399,114,399,109,474,109"/>
<area shape="poly" title=" " alt="" coords="902,188,886,181,857,178,832,180,817,185,811,191,814,198,809,200,806,190,814,180,831,175,857,173,888,176,904,183"/>
<area shape="rect" href="../../d3/ddf/a41631.html#a64cee1fd80a35d996188c0034ec26b64" title="Simple command processor." alt="" coords="519,199,673,239"/>
<area shape="poly" title=" " alt="" coords="748,222,673,222,673,217,748,217"/>
<area shape="rect" href="../../d3/ddf/a41631.html#ab76062d9a8256ca7a40503fd76095903" title="The single, centralized function for handling all key presses." alt="" coords="263,207,440,232"/>
<area shape="poly" title=" " alt="" coords="505,222,440,222,440,217,505,217"/>
<area shape="rect" href="../../d1/d18/a41643.html#add675289514a4144f97d2189183400a8" title=" " alt="" coords="5,167,215,207"/>
<area shape="poly" title=" " alt="" coords="249,208,215,204,215,199,249,203"/>
<area shape="rect" href="../../dd/d75/a41635.html#af82a0bd16f995dd285d4f7822117377c" title="Handles key down events by forwarding them to the shell." alt="" coords="21,231,199,271"/>
<area shape="poly" title=" " alt="" coords="249,236,200,242,199,237,249,230"/>
<area shape="poly" title=" " alt="" coords="1030,66,958,86,956,81,1029,61"/>
<area shape="poly" title=" " alt="" coords="999,136,962,130,963,125,1000,131"/>
<area shape="poly" title=" " alt="" coords="1040,181,947,202,946,197,1038,176"/>
</map>
</div>

</div>
</div>
<a id="a39f63594cdcdad7acc3860d6d339995e" name="a39f63594cdcdad7acc3860d6d339995e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39f63594cdcdad7acc3860d6d339995e">&#9670;&#160;</a></span>recursiveSelDriver()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PCI_Controller::recursiveSelDriver </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d88/a41651.html">driver::DriverManager</a> *&#160;</td>
          <td class="paramname"><em>driver_manager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/ded/a41711.html">hardware_communication::InterruptManager</a> *&#160;</td>
          <td class="paramname"><em>interrupt_manager</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Recursively scans the bus for devices and bridges, assigning drivers where possible. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>current bus being scanned. </td></tr>
    <tr><td class="paramname">driver_manager</td><td>Pointer to the global driver manager. </td></tr>
    <tr><td class="paramname">interrupt_manager</td><td>Pointer to the global interrupt manager. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d46/a40742_source.html#l00118">118</a> of file <a class="el" href="../../d0/d46/a40742_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  119</span>{</div>
<div class="line"><span class="lineno">  120</span>    <span class="keywordflow">for</span>(uint8_t device=0; device&lt;32; device++)</div>
<div class="line"><span class="lineno">  121</span>    {</div>
<div class="line"><span class="lineno">  122</span>        uint8_t numFunctions = <a class="code hl_function" href="../../de/d77/a41723.html#a54eaf77198f4b3816b9276f3d5be1661">deviceHasFunctions</a>(bus, device) ? 8 : 1;</div>
<div class="line"><span class="lineno">  123</span>        </div>
<div class="line"><span class="lineno">  124</span>        <span class="keywordflow">for</span>(uint8_t function=0; function&lt;numFunctions; function++)</div>
<div class="line"><span class="lineno">  125</span>        {</div>
<div class="line"><span class="lineno">  126</span>            <a class="code hl_class" href="../../d4/d9d/a41719.html">PCI_DeviceDescriptor</a> dev = <a class="code hl_function" href="../../de/d77/a41723.html#adf54e2d1841368c2f8b2d5989a2fa7b0">getDeviceDescriptor</a>(bus, device, function);</div>
<div class="line"><span class="lineno">  127</span> </div>
<div class="line"><span class="lineno">  128</span>            <span class="keywordflow">if</span>(dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#aee5360551eec5a3b31638a0372fdda71">vendorId</a> == 0x0000 || dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#aee5360551eec5a3b31638a0372fdda71">vendorId</a> == 0xFFFF) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  129</span>            </div>
<div class="line"><span class="lineno">  130</span>            <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;PCI Bus %#3x, Device %#3x, Function %#3x &quot;</span>, bus, device, function);</div>
<div class="line"><span class="lineno">  131</span>            <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;=&gt; Vendor %#5hx, Device %#5hx (Class %#3x, Sub %#3x)\n&quot;</span>, dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#aee5360551eec5a3b31638a0372fdda71">vendorId</a>, dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#afaf41d7a2a6080418e68115af06710b3">deviceId</a>, dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#ad622a6f55e45fd14250fcd10c42a3c97">classId</a>, dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#aab6f4d0868ad0278d4094f49026b7cdb">subclassId</a>);</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>            <span class="keywordflow">for</span>(uint16_t barNum = 0; barNum &lt; 6; barNum++){</div>
<div class="line"><span class="lineno">  134</span>                <a class="code hl_class" href="../../d1/d2b/a40815.html#d4/d8d/a41715">BaseAddressRegister</a> bar = <a class="code hl_function" href="../../de/d77/a41723.html#a5e00e862f7af95887e09f3b90f7357fc">getBaseAddressRegister</a>(bus, device, function, barNum);</div>
<div class="line"><span class="lineno">  135</span>                <span class="keywordflow">if</span>(bar.<a class="code hl_variable" href="../../d1/d2b/a40815.html#ab9e334c4ce84a03d60cea629ddd148b8">address</a> &amp;&amp; (bar.<a class="code hl_variable" href="../../d1/d2b/a40815.html#a1ed46e6ec12ae23a9d647ec0f659940a">type</a> == <a class="code hl_enumvalue" href="../../d1/d2b/a40815.html#ad38a4a4ac62c5165be6aad855b6dab82a85507086ea5f27de7d6c37f3305976d1">inputOutput</a>)) dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#a0f39aba6d685303dcde01c88d894b743">portBase</a>[barNum] = (uint32_t)bar.<a class="code hl_variable" href="../../d1/d2b/a40815.html#ab9e334c4ce84a03d60cea629ddd148b8">address</a>;</div>
<div class="line"><span class="lineno">  136</span>            }</div>
<div class="line"><span class="lineno">  137</span>            <a class="code hl_class" href="../../dd/d60/a41647.html">driver::Driver</a>* <a class="code hl_namespace" href="../../d6/d9d/a40813.html">driver</a> = <a class="code hl_function" href="../../de/d77/a41723.html#a0a5c1a26be6003b1ef1478fdc7ae2466">getDriver</a>(dev, interrupt_manager);</div>
<div class="line"><span class="lineno">  138</span>            <span class="keywordflow">if</span>(<a class="code hl_namespace" href="../../d6/d9d/a40813.html">driver</a> != 0) driver_manager-&gt;<a class="code hl_function" href="../../da/d88/a41651.html#a5c5383f5f4dddb9e9e2126c8cc598f26">addDriver</a>(<a class="code hl_namespace" href="../../d6/d9d/a40813.html">driver</a>);</div>
<div class="line"><span class="lineno">  139</span>            </div>
<div class="line"><span class="lineno">  140</span>            <span class="keywordflow">if</span>(dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#ad622a6f55e45fd14250fcd10c42a3c97">classId</a> == 0x06 &amp;&amp; dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#aab6f4d0868ad0278d4094f49026b7cdb">subclassId</a> == 0x04)</div>
<div class="line"><span class="lineno">  141</span>            {</div>
<div class="line"><span class="lineno">  142</span>                uint8_t secondaryBus = <a class="code hl_function" href="../../de/d77/a41723.html#a6e21604894939edaafd1d5baae2840dd">read8</a>(bus, device, function, 0x19);</div>
<div class="line"><span class="lineno">  143</span>                <span class="keywordflow">if</span> (secondaryBus != bus) <a class="code hl_function" href="../../de/d77/a41723.html#a39f63594cdcdad7acc3860d6d339995e">recursiveSelDriver</a>(secondaryBus, driver_manager, interrupt_manager);</div>
<div class="line"><span class="lineno">  144</span>            }</div>
<div class="line"><span class="lineno">  145</span>        }</div>
<div class="line"><span class="lineno">  146</span>    }</div>
<div class="line"><span class="lineno">  147</span>}</div>
<div class="ttc" id="aa41651_html_a5c5383f5f4dddb9e9e2126c8cc598f26"><div class="ttname"><a href="../../da/d88/a41651.html#a5c5383f5f4dddb9e9e2126c8cc598f26">driver::DriverManager::addDriver</a></div><div class="ttdeci">void addDriver(Driver *)</div><div class="ttdoc">Adds a driver to the manager's list.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d13/a40754_source.html#l00015">kdriver.cpp:15</a></div></div>
<div class="ttc" id="aa41719_html_a0f39aba6d685303dcde01c88d894b743"><div class="ttname"><a href="../../d4/d9d/a41719.html#a0f39aba6d685303dcde01c88d894b743">hardware_communication::PCI_DeviceDescriptor::portBase</a></div><div class="ttdeci">uint32_t portBase[6]</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d2b/a40781_source.html#l00047">kpci.hpp:47</a></div></div>
<div class="ttc" id="aa41723_html_a0a5c1a26be6003b1ef1478fdc7ae2466"><div class="ttname"><a href="../../de/d77/a41723.html#a0a5c1a26be6003b1ef1478fdc7ae2466">hardware_communication::PCI_Controller::getDriver</a></div><div class="ttdeci">driver::Driver * getDriver(PCI_DeviceDescriptor dev, hardware_communication::InterruptManager *interrupt_manager)</div><div class="ttdoc">Factory method that instantiates the correct driver for a given device.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d46/a40742_source.html#l00246">kpci.cpp:246</a></div></div>
<div class="ttc" id="aa41723_html_a39f63594cdcdad7acc3860d6d339995e"><div class="ttname"><a href="../../de/d77/a41723.html#a39f63594cdcdad7acc3860d6d339995e">hardware_communication::PCI_Controller::recursiveSelDriver</a></div><div class="ttdeci">void recursiveSelDriver(uint8_t bus, driver::DriverManager *driver_manager, hardware_communication::InterruptManager *interrupt_manager)</div><div class="ttdoc">Recursively scans the bus for devices and bridges, assigning drivers where possible.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d46/a40742_source.html#l00118">kpci.cpp:118</a></div></div>
<div class="ttc" id="aa41723_html_a54eaf77198f4b3816b9276f3d5be1661"><div class="ttname"><a href="../../de/d77/a41723.html#a54eaf77198f4b3816b9276f3d5be1661">hardware_communication::PCI_Controller::deviceHasFunctions</a></div><div class="ttdeci">bool deviceHasFunctions(uint8_t bus, uint8_t device)</div><div class="ttdoc">Checks if a device is a multi-function device.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d46/a40742_source.html#l00087">kpci.cpp:87</a></div></div>
<div class="ttc" id="aa41723_html_a5e00e862f7af95887e09f3b90f7357fc"><div class="ttname"><a href="../../de/d77/a41723.html#a5e00e862f7af95887e09f3b90f7357fc">hardware_communication::PCI_Controller::getBaseAddressRegister</a></div><div class="ttdeci">BaseAddressRegister getBaseAddressRegister(uint8_t bus, uint8_t device, uint8_t function, uint16_t bar)</div><div class="ttdoc">Decodes a raw BAR value into a BaseAddressRegister object.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d46/a40742_source.html#l00220">kpci.cpp:220</a></div></div>
<div class="ttc" id="aa41723_html_adf54e2d1841368c2f8b2d5989a2fa7b0"><div class="ttname"><a href="../../de/d77/a41723.html#adf54e2d1841368c2f8b2d5989a2fa7b0">hardware_communication::PCI_Controller::getDeviceDescriptor</a></div><div class="ttdeci">PCI_DeviceDescriptor getDeviceDescriptor(uint8_t bus, uint8_t device, uint8_t function)</div><div class="ttdoc">Reads the configuration header to create a descriptor object.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d46/a40742_source.html#l00092">kpci.cpp:92</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/d13/a40754_source.html#l00015">driver::DriverManager::addDriver()</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00021">hardware_communication::BaseAddressRegister::address</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00039">hardware_communication::PCI_DeviceDescriptor::classId</a>, <a class="el" href="../../d0/d46/a40742_source.html#l00087">deviceHasFunctions()</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00034">hardware_communication::PCI_DeviceDescriptor::deviceId</a>, <a class="el" href="../../d0/d46/a40742_source.html#l00220">getBaseAddressRegister()</a>, <a class="el" href="../../d0/d46/a40742_source.html#l00092">getDeviceDescriptor()</a>, <a class="el" href="../../d0/d46/a40742_source.html#l00246">getDriver()</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00014">hardware_communication::inputOutput</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00047">hardware_communication::PCI_DeviceDescriptor::portBase</a>, <a class="el" href="../../da/d6e/a40736_source.html#l00313">basic::printf()</a>, <a class="el" href="../../d0/d46/a40742_source.html#l00047">read8()</a>, <a class="el" href="../../d0/d46/a40742_source.html#l00118">recursiveSelDriver()</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00038">hardware_communication::PCI_DeviceDescriptor::subclassId</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00023">hardware_communication::BaseAddressRegister::type</a>, and <a class="el" href="../../d3/d2b/a40781_source.html#l00033">hardware_communication::PCI_DeviceDescriptor::vendorId</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d46/a40742_source.html#l00118">recursiveSelDriver()</a>, and <a class="el" href="../../d0/d46/a40742_source.html#l00149">selectDrivers()</a>.</p>
<div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_a39f63594cdcdad7acc3860d6d339995e_cgraph.png" border="0" usemap="#ade/d77/a41723_a39f63594cdcdad7acc3860d6d339995e_cgraph" alt=""/></div>
<map name="ade/d77/a41723_a39f63594cdcdad7acc3860d6d339995e_cgraph" id="ade/d77/a41723_a39f63594cdcdad7acc3860d6d339995e_cgraph">
<area shape="rect" title="Recursively scans the bus for devices and bridges, assigning drivers where possible." alt="" coords="5,183,216,238"/>
<area shape="poly" title=" " alt="" coords="56,183,56,173,66,164,84,159,111,157,142,160,160,168,158,172,141,165,111,162,85,164,69,169,61,175,61,183"/>
<area shape="rect" href="../../da/d88/a41651.html#a5c5383f5f4dddb9e9e2126c8cc598f26" title="Adds a driver to the manager&#39;s list." alt="" coords="313,5,478,45"/>
<area shape="poly" title=" " alt="" coords="130,181,185,117,222,83,263,55,299,40,301,44,265,60,225,88,188,121,134,185"/>
<area shape="rect" href="../../de/d77/a41723.html#a54eaf77198f4b3816b9276f3d5be1661" title="Checks if a device is a multi&#45;function device." alt="" coords="265,133,525,173"/>
<area shape="poly" title=" " alt="" coords="216,187,281,173,283,179,217,192"/>
<area shape="rect" href="../../de/d77/a41723.html#a6e21604894939edaafd1d5baae2840dd" title="Reads an 8&#45;bit byte from the PCI configuration space." alt="" coords="575,191,765,231"/>
<area shape="poly" title=" " alt="" coords="216,208,561,208,561,213,216,213"/>
<area shape="rect" href="../../de/d77/a41723.html#a5e00e862f7af95887e09f3b90f7357fc" title="Decodes a raw BAR value into a BaseAddressRegister object." alt="" coords="278,249,513,303"/>
<area shape="poly" title=" " alt="" coords="217,232,265,243,264,249,216,237"/>
<area shape="rect" href="../../de/d77/a41723.html#adf54e2d1841368c2f8b2d5989a2fa7b0" title="Reads the configuration header to create a descriptor object." alt="" coords="264,69,527,109"/>
<area shape="poly" title=" " alt="" coords="150,181,203,149,263,119,285,111,287,116,265,124,205,153,153,185"/>
<area shape="rect" href="../../de/d77/a41723.html#a0a5c1a26be6003b1ef1478fdc7ae2466" title="Factory method that instantiates the correct driver for a given device." alt="" coords="300,379,491,419"/>
<area shape="poly" title=" " alt="" coords="135,237,190,298,226,330,265,358,294,371,291,376,263,362,223,334,186,302,131,240"/>
<area shape="rect" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9" title="A custom implementation of the standard printf function for writing to both VGA text mode memory and ..." alt="" coords="621,378,719,403"/>
<area shape="poly" title=" " alt="" coords="145,236,199,277,231,297,265,313,401,341,608,377,607,383,400,346,263,319,229,302,196,281,142,241"/>
<area shape="poly" title=" " alt="" coords="492,171,562,185,561,191,491,176"/>
<area shape="rect" href="../../de/d77/a41723.html#a8be9d213f644608726499edca159e1e4" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="813,133,1004,173"/>
<area shape="poly" title=" " alt="" coords="753,188,811,174,812,179,755,193"/>
<area shape="rect" href="../../de/d77/a41723.html#a99c80eb69bb5258a96fb3b9c61ce9dd3" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="1052,133,1255,173"/>
<area shape="poly" title=" " alt="" coords="1004,151,1038,151,1038,156,1004,156"/>
<area shape="rect" href="../../d0/d66/a41743.html#a742b40049c70bfda79a3031b85297948" title="Reads a 32&#45;bit value from the I/O port." alt="" coords="1058,197,1249,237"/>
<area shape="poly" title=" " alt="" coords="987,171,1064,191,1063,196,985,176"/>
<area shape="rect" href="../../d0/d66/a41743.html#ad13c0ec90a83f05b61c023dd8a1f53e8" title="Writes a 32&#45;bit value to the I/O port." alt="" coords="1058,69,1249,109"/>
<area shape="poly" title=" " alt="" coords="985,131,1063,110,1064,115,987,136"/>
<area shape="poly" title=" " alt="" coords="510,246,571,231,573,236,511,251"/>
<area shape="poly" title=" " alt="" coords="513,277,636,268,701,257,764,240,823,212,871,179,874,184,825,217,766,245,703,262,637,273,513,282"/>
<area shape="poly" title=" " alt="" coords="504,107,528,119,544,133,553,148,562,163,576,177,585,182,582,186,573,181,557,166,549,151,540,137,525,124,502,112"/>
<area shape="poly" title=" " alt="" coords="527,89,644,97,766,112,832,127,831,132,765,117,643,102,527,95"/>
<area shape="rect" href="../../de/d77/a41723.html#abbe08b680f1d06bcd047cd0c8f215bfd" title="Reads a 16&#45;bit word from the PCI configuration space." alt="" coords="575,127,765,167"/>
<area shape="poly" title=" " alt="" coords="492,107,562,121,561,127,491,112"/>
<area shape="poly" title=" " alt="" coords="766,147,800,148,799,153,766,152"/>
<area shape="poly" title=" " alt="" coords="491,393,607,390,607,395,491,399"/>
<area shape="rect" href="../../d5/d79/a40812.html#aeacdadb7f1bb76f1452689d0e5cd4dad" title="Converts a double&#45;precision floating point number to a string." alt="" coords="829,327,989,353"/>
<area shape="poly" title=" " alt="" coords="719,378,834,353,835,358,720,383"/>
<area shape="rect" href="../../d5/d79/a40812.html#a84a72638a4a04f5706b7f9b217359ecf" title="Converts an unsigned long long integer to a string." alt="" coords="1087,378,1219,403"/>
<area shape="poly" title=" " alt="" coords="720,388,1073,388,1073,393,720,393"/>
<area shape="rect" href="../../d5/d79/a40812.html#a3d0041ad59dbbae5bc9adbb8ab784499" title="Internal function to print a null&#45;terminated string to video memory AND serial." alt="" coords="1082,467,1225,493"/>
<area shape="poly" title=" " alt="" coords="690,401,744,435,778,451,814,464,880,477,947,484,1068,484,1068,490,946,489,879,483,813,469,776,456,741,439,688,406"/>
<area shape="rect" href="../../d5/d79/a40812.html#a5ecbf4c8112c602ba65a689ebe5014f8" title="Prints a hexadecimal number with leading zeros." alt="" coords="849,429,969,454"/>
<area shape="poly" title=" " alt="" coords="720,398,836,423,835,428,719,404"/>
<area shape="rect" href="../../d5/d79/a40812.html#a9d1f0f838e646660db6d9284725c2b4c" title="Updates the position of the text mode cursor." alt="" coords="1312,287,1468,313"/>
<area shape="poly" title=" " alt="" coords="688,376,742,343,776,326,813,313,877,299,943,290,1075,280,1197,281,1298,287,1298,293,1197,287,1075,286,944,295,878,305,814,319,778,331,744,347,690,380"/>
<area shape="rect" href="../../d5/d79/a40812.html#aa7de4c6aa018e049aa8992b037cc052a" title="Calculates the power of a number." alt="" coords="1101,327,1205,353"/>
<area shape="poly" title=" " alt="" coords="989,337,1088,337,1088,343,989,343"/>
<area shape="poly" title=" " alt="" coords="972,350,1079,373,1078,378,971,355"/>
<area shape="rect" href="../../d5/d79/a40812.html#a6cfc2f6949fb98dfc419f9fd19f95982" title="Reverses a string in place." alt="" coords="1333,359,1447,385"/>
<area shape="poly" title=" " alt="" coords="1220,383,1319,375,1320,380,1220,388"/>
<area shape="rect" href="../../d4/d55/a41667.html#adfb4220d2c664ae5ba11e04d9d182f70" title="Calculates the video memory value for the mouse cursor block." alt="" coords="1311,458,1469,513"/>
<area shape="poly" title=" " alt="" coords="1225,479,1297,481,1297,486,1225,484"/>
<area shape="rect" href="../../d5/d79/a40812.html#adef8a5b5400c388c29477d74db094cf3" title="Writes a single character to the COM1 serial port." alt="" coords="1303,409,1477,434"/>
<area shape="poly" title=" " alt="" coords="1205,465,1324,435,1325,440,1206,470"/>
<area shape="rect" href="../../d5/d79/a40812.html#a6233646eaac73374e727981e1157e5d7" title="Checks if the serial port&#39;s transmit buffer is empty (COM1)." alt="" coords="1539,409,1702,434"/>
<area shape="poly" title=" " alt="" coords="1478,419,1525,419,1525,424,1478,424"/>
<area shape="rect" href="../../d8/da7/a41731.html#a6ede8fba6ba7e26c5982a91a3d5ffa72" title="Writes an 8&#45;bit value to the I/O port." alt="" coords="1525,312,1716,352"/>
<area shape="poly" title=" " alt="" coords="1441,406,1476,395,1567,356,1569,360,1478,400,1443,411"/>
<area shape="rect" href="../../d8/da7/a41731.html#a425297307d64cb5d9889b32767f8fdc3" title="Reads an 8&#45;bit value from the I/O port." alt="" coords="1764,401,1955,441"/>
<area shape="poly" title=" " alt="" coords="1703,419,1751,419,1751,424,1703,424"/>
<area shape="poly" title=" " alt="" coords="969,426,1078,403,1079,409,970,432"/>
<area shape="poly" title=" " alt="" coords="970,448,1069,464,1068,469,969,453"/>
<area shape="poly" title=" " alt="" coords="1469,308,1512,314,1511,320,1468,313"/>
</map>
</div>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_a39f63594cdcdad7acc3860d6d339995e_icgraph.png" border="0" usemap="#ade/d77/a41723_a39f63594cdcdad7acc3860d6d339995e_icgraph" alt=""/></div>
<map name="ade/d77/a41723_a39f63594cdcdad7acc3860d6d339995e_icgraph" id="ade/d77/a41723_a39f63594cdcdad7acc3860d6d339995e_icgraph">
<area shape="rect" title="Recursively scans the bus for devices and bridges, assigning drivers where possible." alt="" coords="412,29,623,84"/>
<area shape="poly" title=" " alt="" coords="561,18,545,11,517,8,494,10,479,15,472,21,472,29,467,29,467,19,476,10,493,5,517,3,547,6,563,14"/>
<area shape="rect" href="../../de/d77/a41723.html#a86f101dc2b53f938d5ac466c7ec33e2c" title="Starts the driver selection process from Bus 0." alt="" coords="148,37,364,77"/>
<area shape="poly" title=" " alt="" coords="399,59,364,59,364,54,399,54"/>
<area shape="rect" href="../../d7/de8/a40730.html#abb4e4866092116b520310d61961bfe12" title="The main entry point for the C++ kernel." alt="" coords="5,44,100,69"/>
<area shape="poly" title=" " alt="" coords="134,59,100,59,100,54,134,54"/>
</map>
</div>

</div>
</div>
<a id="a676c96d825ec578ff98c965c4b999aec" name="a676c96d825ec578ff98c965c4b999aec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a676c96d825ec578ff98c965c4b999aec">&#9670;&#160;</a></span>scanBus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PCI_Controller::scanBus </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Scans a bus just for listing devices (does not instantiate drivers). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>bus number to scan. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d46/a40742_source.html#l00154">154</a> of file <a class="el" href="../../d0/d46/a40742_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  155</span>{</div>
<div class="line"><span class="lineno">  156</span>    <span class="keywordflow">for</span>(uint8_t device=0; device&lt;32; device++)</div>
<div class="line"><span class="lineno">  157</span>    {</div>
<div class="line"><span class="lineno">  158</span>        uint8_t numFunctions = <a class="code hl_function" href="../../de/d77/a41723.html#a54eaf77198f4b3816b9276f3d5be1661">deviceHasFunctions</a>(bus, (uint8_t)device) ? 8 : 1;</div>
<div class="line"><span class="lineno">  159</span>        </div>
<div class="line"><span class="lineno">  160</span>        <span class="keywordflow">for</span>(uint8_t function=0; function&lt;numFunctions; function++)</div>
<div class="line"><span class="lineno">  161</span>        {</div>
<div class="line"><span class="lineno">  162</span>            <a class="code hl_class" href="../../d4/d9d/a41719.html">PCI_DeviceDescriptor</a> dev = <a class="code hl_function" href="../../de/d77/a41723.html#adf54e2d1841368c2f8b2d5989a2fa7b0">getDeviceDescriptor</a>(bus, device, function);</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span>            <span class="keywordflow">if</span>(dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#aee5360551eec5a3b31638a0372fdda71">vendorId</a> == 0x0000 || dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#aee5360551eec5a3b31638a0372fdda71">vendorId</a> == 0xFFFF) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  165</span>            <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;---\n&quot;</span>);</div>
<div class="line"><span class="lineno">  166</span>            <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;PCI Bus %#3x, Device %#3x, Function %#3x &quot;</span>, bus, device, function);</div>
<div class="line"><span class="lineno">  167</span>            <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;=&gt; Vendor %#5hx, Device %#5hx (Class %#3x, Sub %#3x)\n&quot;</span>, dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#aee5360551eec5a3b31638a0372fdda71">vendorId</a>, dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#afaf41d7a2a6080418e68115af06710b3">deviceId</a>, dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#ad622a6f55e45fd14250fcd10c42a3c97">classId</a>, dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#aab6f4d0868ad0278d4094f49026b7cdb">subclassId</a>);</div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span>            <span class="keywordflow">switch</span>(dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#aee5360551eec5a3b31638a0372fdda71">vendorId</a>)</div>
<div class="line"><span class="lineno">  170</span>            {</div>
<div class="line"><span class="lineno">  171</span>                <span class="keywordflow">case</span> 0x1022: <span class="comment">// AMD</span></div>
<div class="line"><span class="lineno">  172</span>                    <span class="keywordflow">switch</span>(dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#afaf41d7a2a6080418e68115af06710b3">deviceId</a>)</div>
<div class="line"><span class="lineno">  173</span>                    {</div>
<div class="line"><span class="lineno">  174</span>                        <span class="keywordflow">case</span> 0x2000: <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;AMD am79c973 &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  175</span>                    }</div>
<div class="line"><span class="lineno">  176</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span>                <span class="keywordflow">case</span> 0x8086: <span class="comment">// Intel</span></div>
<div class="line"><span class="lineno">  179</span>                    <span class="keywordflow">switch</span>(dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#afaf41d7a2a6080418e68115af06710b3">deviceId</a>)</div>
<div class="line"><span class="lineno">  180</span>                    {</div>
<div class="line"><span class="lineno">  181</span>                        <span class="keywordflow">case</span> 0x1237: <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;Intel 440FX Host Bridge &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  182</span>                        <span class="keywordflow">case</span> 0x7000: <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;Intel PIIX3 ISA Bridge &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  183</span>                        <span class="keywordflow">case</span> 0x7010: <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;Intel PIIX3 IDE Controller &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  184</span>                        <span class="keywordflow">case</span> 0x7113: <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;Intel PIIX4 ACPI &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  185</span>                        <span class="keywordflow">case</span> 0x100E: <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;Intel E1000 Ethernet &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  186</span>                    }</div>
<div class="line"><span class="lineno">  187</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  188</span>                    </div>
<div class="line"><span class="lineno">  189</span>                <span class="keywordflow">case</span> 0x1234: <span class="comment">// QEMU / Bochs</span></div>
<div class="line"><span class="lineno">  190</span>                    <span class="keywordflow">switch</span>(dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#afaf41d7a2a6080418e68115af06710b3">deviceId</a>)</div>
<div class="line"><span class="lineno">  191</span>                    {</div>
<div class="line"><span class="lineno">  192</span>                        <span class="keywordflow">case</span> 0x1111: <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;QEMU VGA Graphics &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  193</span>                    }</div>
<div class="line"><span class="lineno">  194</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  195</span>            }</div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="line"><span class="lineno">  197</span>            <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;| &quot;</span>);</div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="line"><span class="lineno">  199</span>            <span class="keywordflow">switch</span>(dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#ad622a6f55e45fd14250fcd10c42a3c97">classId</a>)</div>
<div class="line"><span class="lineno">  200</span>            {</div>
<div class="line"><span class="lineno">  201</span>                <span class="keywordflow">case</span> 0x03:</div>
<div class="line"><span class="lineno">  202</span>                    <span class="keywordflow">if</span>(dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#aab6f4d0868ad0278d4094f49026b7cdb">subclassId</a> == 0x00) <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;Generic VGA &quot;</span>);</div>
<div class="line"><span class="lineno">  203</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  204</span>                <span class="keywordflow">case</span> 0x02:</div>
<div class="line"><span class="lineno">  205</span>                    <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;Generic Network Card &quot;</span>);</div>
<div class="line"><span class="lineno">  206</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  207</span>            }</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span>            <a class="code hl_function" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;|\n&quot;</span>);</div>
<div class="line"><span class="lineno">  210</span> </div>
<div class="line"><span class="lineno">  211</span>            <span class="keywordflow">if</span>(dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#ad622a6f55e45fd14250fcd10c42a3c97">classId</a> == 0x06 &amp;&amp; dev.<a class="code hl_variable" href="../../d4/d9d/a41719.html#aab6f4d0868ad0278d4094f49026b7cdb">subclassId</a> == 0x04)</div>
<div class="line"><span class="lineno">  212</span>            {</div>
<div class="line"><span class="lineno">  213</span>                uint8_t secondaryBus = <a class="code hl_function" href="../../de/d77/a41723.html#a6e21604894939edaafd1d5baae2840dd">read8</a>(bus, device, function, 0x19);</div>
<div class="line"><span class="lineno">  214</span>                <span class="keywordflow">if</span> (secondaryBus != bus) <a class="code hl_function" href="../../de/d77/a41723.html#a676c96d825ec578ff98c965c4b999aec">scanBus</a>(secondaryBus);</div>
<div class="line"><span class="lineno">  215</span>            }</div>
<div class="line"><span class="lineno">  216</span>        }</div>
<div class="line"><span class="lineno">  217</span>    }</div>
<div class="line"><span class="lineno">  218</span>}</div>
<div class="ttc" id="aa41723_html_a676c96d825ec578ff98c965c4b999aec"><div class="ttname"><a href="../../de/d77/a41723.html#a676c96d825ec578ff98c965c4b999aec">hardware_communication::PCI_Controller::scanBus</a></div><div class="ttdeci">void scanBus(uint8_t bus)</div><div class="ttdoc">Scans a bus just for listing devices (does not instantiate drivers).</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d46/a40742_source.html#l00154">kpci.cpp:154</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d2b/a40781_source.html#l00039">hardware_communication::PCI_DeviceDescriptor::classId</a>, <a class="el" href="../../d0/d46/a40742_source.html#l00087">deviceHasFunctions()</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00034">hardware_communication::PCI_DeviceDescriptor::deviceId</a>, <a class="el" href="../../d0/d46/a40742_source.html#l00092">getDeviceDescriptor()</a>, <a class="el" href="../../da/d6e/a40736_source.html#l00313">basic::printf()</a>, <a class="el" href="../../d0/d46/a40742_source.html#l00047">read8()</a>, <a class="el" href="../../d0/d46/a40742_source.html#l00154">scanBus()</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00038">hardware_communication::PCI_DeviceDescriptor::subclassId</a>, and <a class="el" href="../../d3/d2b/a40781_source.html#l00033">hardware_communication::PCI_DeviceDescriptor::vendorId</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/dfe/a40727_source.html#l00083">KernelShell::process_command()</a>, and <a class="el" href="../../d0/d46/a40742_source.html#l00154">scanBus()</a>.</p>
<div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_a676c96d825ec578ff98c965c4b999aec_cgraph.png" border="0" usemap="#ade/d77/a41723_a676c96d825ec578ff98c965c4b999aec_cgraph" alt=""/></div>
<map name="ade/d77/a41723_a676c96d825ec578ff98c965c4b999aec_cgraph" id="ade/d77/a41723_a676c96d825ec578ff98c965c4b999aec_cgraph">
<area shape="rect" title="Scans a bus just for listing devices (does not instantiate drivers)." alt="" coords="5,92,196,132"/>
<area shape="poly" title=" " alt="" coords="50,92,47,82,55,73,73,67,101,65,132,68,150,75,148,80,131,73,101,71,74,73,58,78,52,83,55,91"/>
<area shape="rect" href="../../de/d77/a41723.html#a54eaf77198f4b3816b9276f3d5be1661" title="Checks if a device is a multi&#45;function device." alt="" coords="245,5,505,45"/>
<area shape="poly" title=" " alt="" coords="159,89,243,61,291,47,292,52,245,67,161,94"/>
<area shape="rect" href="../../de/d77/a41723.html#a6e21604894939edaafd1d5baae2840dd" title="Reads an 8&#45;bit byte from the PCI configuration space." alt="" coords="555,33,745,73"/>
<area shape="poly" title=" " alt="" coords="196,99,540,62,541,68,197,104"/>
<area shape="rect" href="../../de/d77/a41723.html#adf54e2d1841368c2f8b2d5989a2fa7b0" title="Reads the configuration header to create a descriptor object." alt="" coords="244,120,507,160"/>
<area shape="poly" title=" " alt="" coords="197,119,231,123,230,128,196,124"/>
<area shape="rect" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9" title="A custom implementation of the standard printf function for writing to both VGA text mode memory and ..." alt="" coords="326,289,425,314"/>
<area shape="poly" title=" " alt="" coords="133,130,346,278,343,283,130,134"/>
<area shape="poly" title=" " alt="" coords="506,36,541,40,541,45,505,41"/>
<area shape="rect" href="../../de/d77/a41723.html#a8be9d213f644608726499edca159e1e4" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="793,91,984,131"/>
<area shape="poly" title=" " alt="" coords="735,71,792,85,791,90,733,76"/>
<area shape="rect" href="../../de/d77/a41723.html#a99c80eb69bb5258a96fb3b9c61ce9dd3" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="1032,27,1235,67"/>
<area shape="poly" title=" " alt="" coords="965,88,1043,68,1044,73,967,93"/>
<area shape="rect" href="../../d0/d66/a41743.html#a742b40049c70bfda79a3031b85297948" title="Reads a 32&#45;bit value from the I/O port." alt="" coords="1038,91,1229,131"/>
<area shape="poly" title=" " alt="" coords="984,108,1024,108,1024,113,984,113"/>
<area shape="rect" href="../../d0/d66/a41743.html#ad13c0ec90a83f05b61c023dd8a1f53e8" title="Writes a 32&#45;bit value to the I/O port." alt="" coords="1038,155,1229,195"/>
<area shape="poly" title=" " alt="" coords="967,128,1044,149,1043,154,965,133"/>
<area shape="poly" title=" " alt="" coords="445,117,506,99,577,75,579,80,507,104,447,122"/>
<area shape="poly" title=" " alt="" coords="507,130,780,114,780,120,507,135"/>
<area shape="rect" href="../../de/d77/a41723.html#abbe08b680f1d06bcd047cd0c8f215bfd" title="Reads a 16&#45;bit word from the PCI configuration space." alt="" coords="555,148,745,188"/>
<area shape="poly" title=" " alt="" coords="507,151,541,154,541,160,506,156"/>
<area shape="poly" title=" " alt="" coords="733,145,791,131,792,136,735,151"/>
<area shape="rect" href="../../d5/d79/a40812.html#aeacdadb7f1bb76f1452689d0e5cd4dad" title="Converts a double&#45;precision floating point number to a string." alt="" coords="570,213,730,238"/>
<area shape="poly" title=" " alt="" coords="421,286,589,239,591,244,423,291"/>
<area shape="rect" href="../../d5/d79/a40812.html#a84a72638a4a04f5706b7f9b217359ecf" title="Converts an unsigned long long integer to a string." alt="" coords="823,263,955,289"/>
<area shape="poly" title=" " alt="" coords="425,296,808,277,809,283,425,302"/>
<area shape="rect" href="../../d5/d79/a40812.html#a3d0041ad59dbbae5bc9adbb8ab784499" title="Internal function to print a null&#45;terminated string to video memory AND serial." alt="" coords="817,345,960,370"/>
<area shape="poly" title=" " alt="" coords="413,311,479,332,555,348,620,355,685,359,803,359,803,364,685,364,619,360,554,353,477,337,411,317"/>
<area shape="rect" href="../../d5/d79/a40812.html#a5ecbf4c8112c602ba65a689ebe5014f8" title="Prints a hexadecimal number with leading zeros." alt="" coords="590,314,710,339"/>
<area shape="poly" title=" " alt="" coords="425,303,576,317,576,323,424,308"/>
<area shape="rect" href="../../d5/d79/a40812.html#a9d1f0f838e646660db6d9284725c2b4c" title="Updates the position of the text mode cursor." alt="" coords="811,435,967,461"/>
<area shape="poly" title=" " alt="" coords="408,312,475,338,555,365,691,402,812,430,810,435,689,407,554,371,473,343,406,317"/>
<area shape="rect" href="../../d5/d79/a40812.html#aa7de4c6aa018e049aa8992b037cc052a" title="Calculates the power of a number." alt="" coords="837,213,941,238"/>
<area shape="poly" title=" " alt="" coords="731,223,823,223,823,228,731,228"/>
<area shape="poly" title=" " alt="" coords="711,236,815,258,814,263,710,241"/>
<area shape="rect" href="../../d5/d79/a40812.html#a6cfc2f6949fb98dfc419f9fd19f95982" title="Reverses a string in place." alt="" coords="1077,259,1190,285"/>
<area shape="poly" title=" " alt="" coords="955,272,1063,270,1063,276,955,278"/>
<area shape="rect" href="../../d4/d55/a41667.html#adfb4220d2c664ae5ba11e04d9d182f70" title="Calculates the video memory value for the mouse cursor block." alt="" coords="1054,309,1213,363"/>
<area shape="poly" title=" " alt="" coords="960,348,1040,341,1040,347,961,354"/>
<area shape="rect" href="../../d5/d79/a40812.html#adef8a5b5400c388c29477d74db094cf3" title="Writes a single character to the COM1 serial port." alt="" coords="1046,387,1221,413"/>
<area shape="poly" title=" " alt="" coords="961,367,1047,382,1046,388,960,372"/>
<area shape="rect" href="../../d5/d79/a40812.html#a6233646eaac73374e727981e1157e5d7" title="Checks if the serial port&#39;s transmit buffer is empty (COM1)." alt="" coords="1297,381,1459,406"/>
<area shape="poly" title=" " alt="" coords="1221,395,1283,393,1283,399,1221,400"/>
<area shape="rect" href="../../d8/da7/a41731.html#a6ede8fba6ba7e26c5982a91a3d5ffa72" title="Writes an 8&#45;bit value to the I/O port." alt="" coords="1283,431,1473,471"/>
<area shape="poly" title=" " alt="" coords="1196,410,1270,426,1269,431,1195,415"/>
<area shape="rect" href="../../d8/da7/a41731.html#a425297307d64cb5d9889b32767f8fdc3" title="Reads an 8&#45;bit value from the I/O port." alt="" coords="1521,373,1712,413"/>
<area shape="poly" title=" " alt="" coords="1460,391,1508,391,1508,396,1460,396"/>
<area shape="poly" title=" " alt="" coords="710,311,815,289,816,294,711,317"/>
<area shape="poly" title=" " alt="" coords="711,332,804,344,803,349,710,337"/>
<area shape="poly" title=" " alt="" coords="967,446,1269,447,1269,453,967,451"/>
</map>
</div>
<div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_a676c96d825ec578ff98c965c4b999aec_icgraph.png" border="0" usemap="#ade/d77/a41723_a676c96d825ec578ff98c965c4b999aec_icgraph" alt=""/></div>
<map name="ade/d77/a41723_a676c96d825ec578ff98c965c4b999aec_icgraph" id="ade/d77/a41723_a676c96d825ec578ff98c965c4b999aec_icgraph">
<area shape="rect" title="Scans a bus just for listing devices (does not instantiate drivers)." alt="" coords="689,37,880,77"/>
<area shape="poly" title=" " alt="" coords="822,26,809,19,785,16,764,18,751,23,746,29,749,36,744,38,741,28,748,18,762,13,785,11,810,14,824,21"/>
<area shape="rect" href="../../d3/ddf/a41631.html#a64cee1fd80a35d996188c0034ec26b64" title="Simple command processor." alt="" coords="488,37,641,77"/>
<area shape="poly" title=" " alt="" coords="676,60,642,60,642,55,676,55"/>
<area shape="rect" href="../../d3/ddf/a41631.html#ab76062d9a8256ca7a40503fd76095903" title="The single, centralized function for handling all key presses." alt="" coords="263,45,440,70"/>
<area shape="poly" title=" " alt="" coords="474,60,440,60,440,55,474,55"/>
<area shape="rect" href="../../d1/d18/a41643.html#add675289514a4144f97d2189183400a8" title=" " alt="" coords="5,5,215,45"/>
<area shape="poly" title=" " alt="" coords="249,46,215,42,215,37,249,41"/>
<area shape="rect" href="../../dd/d75/a41635.html#af82a0bd16f995dd285d4f7822117377c" title="Handles key down events by forwarding them to the shell." alt="" coords="21,69,199,109"/>
<area shape="poly" title=" " alt="" coords="249,74,200,80,199,75,249,68"/>
</map>
</div>

</div>
</div>
<a id="a86f101dc2b53f938d5ac466c7ec33e2c" name="a86f101dc2b53f938d5ac466c7ec33e2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86f101dc2b53f938d5ac466c7ec33e2c">&#9670;&#160;</a></span>selectDrivers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PCI_Controller::selectDrivers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/d88/a41651.html">driver::DriverManager</a> *&#160;</td>
          <td class="paramname"><em>driver_manager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/ded/a41711.html">hardware_communication::InterruptManager</a> *&#160;</td>
          <td class="paramname"><em>interrupt_manager</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts the driver selection process from Bus 0. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">driver_manager</td><td>Pointer to the global driver manager. </td></tr>
    <tr><td class="paramname">interrupt_manager</td><td>Pointer to the global interrupt manager. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d46/a40742_source.html#l00149">149</a> of file <a class="el" href="../../d0/d46/a40742_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  150</span>{</div>
<div class="line"><span class="lineno">  151</span>    <a class="code hl_function" href="../../de/d77/a41723.html#a39f63594cdcdad7acc3860d6d339995e">recursiveSelDriver</a>(0, driver_manager, interrupt_manager); </div>
<div class="line"><span class="lineno">  152</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d0/d46/a40742_source.html#l00118">recursiveSelDriver()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/de8/a40730_source.html#l00031">kernelMain()</a>.</p>
<div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_a86f101dc2b53f938d5ac466c7ec33e2c_cgraph.png" border="0" usemap="#ade/d77/a41723_a86f101dc2b53f938d5ac466c7ec33e2c_cgraph" alt=""/></div>
<map name="ade/d77/a41723_a86f101dc2b53f938d5ac466c7ec33e2c_cgraph" id="ade/d77/a41723_a86f101dc2b53f938d5ac466c7ec33e2c_cgraph">
<area shape="rect" title="Starts the driver selection process from Bus 0." alt="" coords="5,191,221,231"/>
<area shape="rect" href="../../de/d77/a41723.html#a39f63594cdcdad7acc3860d6d339995e" title="Recursively scans the bus for devices and bridges, assigning drivers where possible." alt="" coords="269,183,480,238"/>
<area shape="poly" title=" " alt="" coords="221,208,255,208,255,213,221,213"/>
<area shape="poly" title=" " alt="" coords="324,183,324,173,333,164,350,159,375,157,404,160,421,168,418,172,403,165,375,162,351,164,336,169,329,175,329,183"/>
<area shape="rect" href="../../da/d88/a41651.html#a5c5383f5f4dddb9e9e2126c8cc598f26" title="Adds a driver to the manager&#39;s list." alt="" coords="577,5,742,45"/>
<area shape="poly" title=" " alt="" coords="394,181,449,117,486,83,527,55,563,40,565,44,529,60,489,88,452,121,398,185"/>
<area shape="rect" href="../../de/d77/a41723.html#a54eaf77198f4b3816b9276f3d5be1661" title="Checks if a device is a multi&#45;function device." alt="" coords="529,133,789,173"/>
<area shape="poly" title=" " alt="" coords="480,187,545,173,547,179,481,192"/>
<area shape="rect" href="../../de/d77/a41723.html#a6e21604894939edaafd1d5baae2840dd" title="Reads an 8&#45;bit byte from the PCI configuration space." alt="" coords="839,191,1029,231"/>
<area shape="poly" title=" " alt="" coords="480,208,825,208,825,213,480,213"/>
<area shape="rect" href="../../de/d77/a41723.html#a5e00e862f7af95887e09f3b90f7357fc" title="Decodes a raw BAR value into a BaseAddressRegister object." alt="" coords="542,249,777,303"/>
<area shape="poly" title=" " alt="" coords="481,232,529,243,528,249,480,237"/>
<area shape="rect" href="../../de/d77/a41723.html#adf54e2d1841368c2f8b2d5989a2fa7b0" title="Reads the configuration header to create a descriptor object." alt="" coords="528,69,791,109"/>
<area shape="poly" title=" " alt="" coords="414,181,467,149,527,119,549,111,551,116,529,124,469,153,417,185"/>
<area shape="rect" href="../../de/d77/a41723.html#a0a5c1a26be6003b1ef1478fdc7ae2466" title="Factory method that instantiates the correct driver for a given device." alt="" coords="564,379,755,419"/>
<area shape="poly" title=" " alt="" coords="399,237,454,298,490,330,529,358,558,371,555,376,527,362,487,334,450,302,395,240"/>
<area shape="rect" href="../../d5/d79/a40812.html#a45ee52b918a784ff0e96e7c8917a91d9" title="A custom implementation of the standard printf function for writing to both VGA text mode memory and ..." alt="" coords="885,378,983,403"/>
<area shape="poly" title=" " alt="" coords="409,236,463,277,495,297,529,313,665,341,872,377,871,383,664,346,527,319,493,302,460,281,406,241"/>
<area shape="poly" title=" " alt="" coords="756,171,826,185,825,191,755,176"/>
<area shape="rect" href="../../de/d77/a41723.html#a8be9d213f644608726499edca159e1e4" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="1077,133,1268,173"/>
<area shape="poly" title=" " alt="" coords="1017,188,1075,174,1076,179,1019,193"/>
<area shape="rect" href="../../de/d77/a41723.html#a99c80eb69bb5258a96fb3b9c61ce9dd3" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="1316,133,1519,173"/>
<area shape="poly" title=" " alt="" coords="1268,151,1302,151,1302,156,1268,156"/>
<area shape="rect" href="../../d0/d66/a41743.html#a742b40049c70bfda79a3031b85297948" title="Reads a 32&#45;bit value from the I/O port." alt="" coords="1322,197,1513,237"/>
<area shape="poly" title=" " alt="" coords="1251,171,1328,191,1327,196,1249,176"/>
<area shape="rect" href="../../d0/d66/a41743.html#ad13c0ec90a83f05b61c023dd8a1f53e8" title="Writes a 32&#45;bit value to the I/O port." alt="" coords="1322,69,1513,109"/>
<area shape="poly" title=" " alt="" coords="1249,131,1327,110,1328,115,1251,136"/>
<area shape="poly" title=" " alt="" coords="774,246,835,231,837,236,775,251"/>
<area shape="poly" title=" " alt="" coords="777,277,900,268,965,257,1028,240,1087,212,1135,179,1138,184,1089,217,1030,245,967,262,901,273,777,282"/>
<area shape="poly" title=" " alt="" coords="768,107,792,119,808,133,817,148,826,163,840,177,849,182,846,186,837,181,821,166,813,151,804,137,789,124,766,112"/>
<area shape="poly" title=" " alt="" coords="791,89,908,97,1030,112,1096,127,1095,132,1029,117,907,102,791,95"/>
<area shape="rect" href="../../de/d77/a41723.html#abbe08b680f1d06bcd047cd0c8f215bfd" title="Reads a 16&#45;bit word from the PCI configuration space." alt="" coords="839,127,1029,167"/>
<area shape="poly" title=" " alt="" coords="756,107,826,121,825,127,755,112"/>
<area shape="poly" title=" " alt="" coords="1030,147,1064,148,1063,153,1030,152"/>
<area shape="poly" title=" " alt="" coords="755,393,871,390,871,395,755,399"/>
<area shape="rect" href="../../d5/d79/a40812.html#aeacdadb7f1bb76f1452689d0e5cd4dad" title="Converts a double&#45;precision floating point number to a string." alt="" coords="1093,327,1253,353"/>
<area shape="poly" title=" " alt="" coords="983,378,1098,353,1099,358,984,383"/>
<area shape="rect" href="../../d5/d79/a40812.html#a84a72638a4a04f5706b7f9b217359ecf" title="Converts an unsigned long long integer to a string." alt="" coords="1351,378,1483,403"/>
<area shape="poly" title=" " alt="" coords="984,388,1337,388,1337,393,984,393"/>
<area shape="rect" href="../../d5/d79/a40812.html#a3d0041ad59dbbae5bc9adbb8ab784499" title="Internal function to print a null&#45;terminated string to video memory AND serial." alt="" coords="1346,467,1489,493"/>
<area shape="poly" title=" " alt="" coords="954,401,1008,435,1042,451,1078,464,1144,477,1211,484,1332,484,1332,490,1210,489,1143,483,1077,469,1040,456,1005,439,952,406"/>
<area shape="rect" href="../../d5/d79/a40812.html#a5ecbf4c8112c602ba65a689ebe5014f8" title="Prints a hexadecimal number with leading zeros." alt="" coords="1113,429,1233,454"/>
<area shape="poly" title=" " alt="" coords="984,398,1100,423,1099,428,983,404"/>
<area shape="rect" href="../../d5/d79/a40812.html#a9d1f0f838e646660db6d9284725c2b4c" title="Updates the position of the text mode cursor." alt="" coords="1576,287,1732,313"/>
<area shape="poly" title=" " alt="" coords="952,376,1006,343,1040,326,1077,313,1141,299,1207,290,1339,280,1461,281,1562,287,1562,293,1461,287,1339,286,1208,295,1142,305,1078,319,1042,331,1008,347,954,380"/>
<area shape="rect" href="../../d5/d79/a40812.html#aa7de4c6aa018e049aa8992b037cc052a" title="Calculates the power of a number." alt="" coords="1365,327,1469,353"/>
<area shape="poly" title=" " alt="" coords="1253,337,1352,337,1352,343,1253,343"/>
<area shape="poly" title=" " alt="" coords="1236,350,1343,373,1342,378,1235,355"/>
<area shape="rect" href="../../d5/d79/a40812.html#a6cfc2f6949fb98dfc419f9fd19f95982" title="Reverses a string in place." alt="" coords="1597,359,1711,385"/>
<area shape="poly" title=" " alt="" coords="1484,383,1583,375,1584,380,1484,388"/>
<area shape="rect" href="../../d4/d55/a41667.html#adfb4220d2c664ae5ba11e04d9d182f70" title="Calculates the video memory value for the mouse cursor block." alt="" coords="1575,458,1733,513"/>
<area shape="poly" title=" " alt="" coords="1489,479,1561,481,1561,486,1489,484"/>
<area shape="rect" href="../../d5/d79/a40812.html#adef8a5b5400c388c29477d74db094cf3" title="Writes a single character to the COM1 serial port." alt="" coords="1567,409,1741,434"/>
<area shape="poly" title=" " alt="" coords="1469,465,1588,435,1589,440,1470,470"/>
<area shape="rect" href="../../d5/d79/a40812.html#a6233646eaac73374e727981e1157e5d7" title="Checks if the serial port&#39;s transmit buffer is empty (COM1)." alt="" coords="1803,409,1966,434"/>
<area shape="poly" title=" " alt="" coords="1742,419,1789,419,1789,424,1742,424"/>
<area shape="rect" href="../../d8/da7/a41731.html#a6ede8fba6ba7e26c5982a91a3d5ffa72" title="Writes an 8&#45;bit value to the I/O port." alt="" coords="1789,312,1980,352"/>
<area shape="poly" title=" " alt="" coords="1705,406,1740,395,1831,356,1833,360,1742,400,1707,411"/>
<area shape="rect" href="../../d8/da7/a41731.html#a425297307d64cb5d9889b32767f8fdc3" title="Reads an 8&#45;bit value from the I/O port." alt="" coords="2028,401,2219,441"/>
<area shape="poly" title=" " alt="" coords="1967,419,2015,419,2015,424,1967,424"/>
<area shape="poly" title=" " alt="" coords="1233,426,1342,403,1343,409,1234,432"/>
<area shape="poly" title=" " alt="" coords="1234,448,1333,464,1332,469,1233,453"/>
<area shape="poly" title=" " alt="" coords="1733,308,1776,314,1775,320,1732,313"/>
</map>
</div>
<div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_a86f101dc2b53f938d5ac466c7ec33e2c_icgraph.png" border="0" usemap="#ade/d77/a41723_a86f101dc2b53f938d5ac466c7ec33e2c_icgraph" alt=""/></div>
<map name="ade/d77/a41723_a86f101dc2b53f938d5ac466c7ec33e2c_icgraph" id="ade/d77/a41723_a86f101dc2b53f938d5ac466c7ec33e2c_icgraph">
<area shape="rect" title="Starts the driver selection process from Bus 0." alt="" coords="148,5,364,45"/>
<area shape="rect" href="../../d7/de8/a40730.html#abb4e4866092116b520310d61961bfe12" title="The main entry point for the C++ kernel." alt="" coords="5,13,100,38"/>
<area shape="poly" title=" " alt="" coords="134,28,100,28,100,23,134,23"/>
</map>
</div>

</div>
</div>
<a id="ac4466a0762483fd1c3ec5f2745a58386" name="ac4466a0762483fd1c3ec5f2745a58386"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4466a0762483fd1c3ec5f2745a58386">&#9670;&#160;</a></span>write16()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PCI_Controller::write16 </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>registerOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Safely writes a 16-bit word to the PCI configuration space. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>bus number. </td></tr>
    <tr><td class="paramname">device</td><td>device number. </td></tr>
    <tr><td class="paramname">function</td><td>function number. </td></tr>
    <tr><td class="paramname">registerOffset</td><td>offset. </td></tr>
    <tr><td class="paramname">value</td><td>16-bit value to write. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d46/a40742_source.html#l00061">61</a> of file <a class="el" href="../../d0/d46/a40742_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   62</span>{</div>
<div class="line"><span class="lineno">   63</span>    uint32_t dword = <a class="code hl_function" href="../../de/d77/a41723.html#a8be9d213f644608726499edca159e1e4">read32</a>(bus, device, function, registerOffset);</div>
<div class="line"><span class="lineno">   64</span>    </div>
<div class="line"><span class="lineno">   65</span>    uint32_t shift = (8 * (registerOffset % 4));</div>
<div class="line"><span class="lineno">   66</span>    uint32_t mask = 0xFFFF &lt;&lt; shift;</div>
<div class="line"><span class="lineno">   67</span>    </div>
<div class="line"><span class="lineno">   68</span>    dword &amp;= ~mask;</div>
<div class="line"><span class="lineno">   69</span>    dword |= ((uint32_t)value &lt;&lt; shift);</div>
<div class="line"><span class="lineno">   70</span>    </div>
<div class="line"><span class="lineno">   71</span>    <a class="code hl_function" href="../../de/d77/a41723.html#a2f72611558fb7dcc7971e748058832d8">write32</a>(bus, device, function, registerOffset, dword);</div>
<div class="line"><span class="lineno">   72</span>}</div>
<div class="ttc" id="aa41723_html_a2f72611558fb7dcc7971e748058832d8"><div class="ttname"><a href="../../de/d77/a41723.html#a2f72611558fb7dcc7971e748058832d8">hardware_communication::PCI_Controller::write32</a></div><div class="ttdeci">void write32(uint8_t bus, uint8_t device, uint8_t function, uint8_t registerOffset, uint32_t value)</div><div class="ttdoc">Writes a 32-bit double word to the PCI configuration space.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d46/a40742_source.html#l00054">kpci.cpp:54</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d0/d46/a40742_source.html#l00033">read32()</a>, and <a class="el" href="../../d0/d46/a40742_source.html#l00054">write32()</a>.</p>
<div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_ac4466a0762483fd1c3ec5f2745a58386_cgraph.png" border="0" usemap="#ade/d77/a41723_ac4466a0762483fd1c3ec5f2745a58386_cgraph" alt=""/></div>
<map name="ade/d77/a41723_ac4466a0762483fd1c3ec5f2745a58386_cgraph" id="ade/d77/a41723_ac4466a0762483fd1c3ec5f2745a58386_cgraph">
<area shape="rect" title="Safely writes a 16&#45;bit word to the PCI configuration space." alt="" coords="5,37,196,77"/>
<area shape="rect" href="../../de/d77/a41723.html#a8be9d213f644608726499edca159e1e4" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="244,69,435,109"/>
<area shape="poly" title=" " alt="" coords="197,67,231,72,230,77,196,73"/>
<area shape="rect" href="../../de/d77/a41723.html#a2f72611558fb7dcc7971e748058832d8" title="Writes a 32&#45;bit double word to the PCI configuration space." alt="" coords="244,5,435,45"/>
<area shape="poly" title=" " alt="" coords="196,42,230,37,231,43,197,47"/>
<area shape="rect" href="../../de/d77/a41723.html#a99c80eb69bb5258a96fb3b9c61ce9dd3" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="483,69,685,109"/>
<area shape="poly" title=" " alt="" coords="435,87,469,87,469,92,435,92"/>
<area shape="rect" href="../../d0/d66/a41743.html#a742b40049c70bfda79a3031b85297948" title="Reads a 32&#45;bit value from the I/O port." alt="" coords="489,133,679,173"/>
<area shape="poly" title=" " alt="" coords="417,107,495,127,493,132,416,112"/>
<area shape="rect" href="../../d0/d66/a41743.html#ad13c0ec90a83f05b61c023dd8a1f53e8" title="Writes a 32&#45;bit value to the I/O port." alt="" coords="489,5,679,45"/>
<area shape="poly" title=" " alt="" coords="416,67,493,46,495,51,417,72"/>
<area shape="poly" title=" " alt="" coords="417,43,495,63,493,68,416,48"/>
<area shape="poly" title=" " alt="" coords="435,23,475,23,475,28,435,28"/>
</map>
</div>

</div>
</div>
<a id="a2f72611558fb7dcc7971e748058832d8" name="a2f72611558fb7dcc7971e748058832d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f72611558fb7dcc7971e748058832d8">&#9670;&#160;</a></span>write32()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PCI_Controller::write32 </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>registerOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a 32-bit double word to the PCI configuration space. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>bus number. </td></tr>
    <tr><td class="paramname">device</td><td>device number. </td></tr>
    <tr><td class="paramname">function</td><td>function number. </td></tr>
    <tr><td class="paramname">registerOffset</td><td>offset. </td></tr>
    <tr><td class="paramname">value</td><td>32-bit value to write. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d46/a40742_source.html#l00054">54</a> of file <a class="el" href="../../d0/d46/a40742_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   55</span>{</div>
<div class="line"><span class="lineno">   56</span>    uint32_t address = <a class="code hl_function" href="../../de/d77/a41723.html#a99c80eb69bb5258a96fb3b9c61ce9dd3">getAddress</a>(bus, device, function, registerOffset);</div>
<div class="line"><span class="lineno">   57</span>    <a class="code hl_variable" href="../../de/d77/a41723.html#ab6a9e1ba7e8934198624da046fc80bad">commandPort</a>.<a class="code hl_function" href="../../d0/d66/a41743.html#ad13c0ec90a83f05b61c023dd8a1f53e8">write</a>(address);</div>
<div class="line"><span class="lineno">   58</span>    <a class="code hl_variable" href="../../de/d77/a41723.html#a63cf29ae25d0a70ee448ac1e2896a041">dataPort</a>.<a class="code hl_function" href="../../d0/d66/a41743.html#ad13c0ec90a83f05b61c023dd8a1f53e8">write</a>(value);</div>
<div class="line"><span class="lineno">   59</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d2b/a40781_source.html#l00057">commandPort</a>, <a class="el" href="../../d3/d2b/a40781_source.html#l00056">dataPort</a>, <a class="el" href="../../d0/d46/a40742_source.html#l00020">getAddress()</a>, and <a class="el" href="../../d2/d10/a40745_source.html#l00057">hardware_communication::Port32Bit::write()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d46/a40742_source.html#l00061">write16()</a>, and <a class="el" href="../../d0/d46/a40742_source.html#l00074">write8()</a>.</p>
<div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_a2f72611558fb7dcc7971e748058832d8_cgraph.png" border="0" usemap="#ade/d77/a41723_a2f72611558fb7dcc7971e748058832d8_cgraph" alt=""/></div>
<map name="ade/d77/a41723_a2f72611558fb7dcc7971e748058832d8_cgraph" id="ade/d77/a41723_a2f72611558fb7dcc7971e748058832d8_cgraph">
<area shape="rect" title="Writes a 32&#45;bit double word to the PCI configuration space." alt="" coords="5,37,196,77"/>
<area shape="rect" href="../../de/d77/a41723.html#a99c80eb69bb5258a96fb3b9c61ce9dd3" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="244,5,447,45"/>
<area shape="poly" title=" " alt="" coords="196,42,230,38,231,43,197,48"/>
<area shape="rect" href="../../d0/d66/a41743.html#ad13c0ec90a83f05b61c023dd8a1f53e8" title="Writes a 32&#45;bit value to the I/O port." alt="" coords="250,69,441,109"/>
<area shape="poly" title=" " alt="" coords="197,67,237,72,236,78,196,72"/>
</map>
</div>
<div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_a2f72611558fb7dcc7971e748058832d8_icgraph.png" border="0" usemap="#ade/d77/a41723_a2f72611558fb7dcc7971e748058832d8_icgraph" alt=""/></div>
<map name="ade/d77/a41723_a2f72611558fb7dcc7971e748058832d8_icgraph" id="ade/d77/a41723_a2f72611558fb7dcc7971e748058832d8_icgraph">
<area shape="rect" title="Writes a 32&#45;bit double word to the PCI configuration space." alt="" coords="244,37,435,77"/>
<area shape="rect" href="../../de/d77/a41723.html#ac4466a0762483fd1c3ec5f2745a58386" title="Safely writes a 16&#45;bit word to the PCI configuration space." alt="" coords="5,5,196,45"/>
<area shape="poly" title=" " alt="" coords="230,45,196,41,196,35,231,40"/>
<area shape="rect" href="../../de/d77/a41723.html#a1bbd1027e1d181bb2eb280070e3d1831" title="Safely writes an 8&#45;bit byte to the PCI configuration space." alt="" coords="5,69,196,109"/>
<area shape="poly" title=" " alt="" coords="231,75,196,79,196,74,230,69"/>
</map>
</div>

</div>
</div>
<a id="a1bbd1027e1d181bb2eb280070e3d1831" name="a1bbd1027e1d181bb2eb280070e3d1831"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bbd1027e1d181bb2eb280070e3d1831">&#9670;&#160;</a></span>write8()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PCI_Controller::write8 </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>registerOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Safely writes an 8-bit byte to the PCI configuration space. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>bus number. </td></tr>
    <tr><td class="paramname">device</td><td>device number. </td></tr>
    <tr><td class="paramname">function</td><td>function number. </td></tr>
    <tr><td class="paramname">registerOffset</td><td>offset. </td></tr>
    <tr><td class="paramname">value</td><td>8-bit value to write. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d46/a40742_source.html#l00074">74</a> of file <a class="el" href="../../d0/d46/a40742_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   75</span>{</div>
<div class="line"><span class="lineno">   76</span>    uint32_t dword = <a class="code hl_function" href="../../de/d77/a41723.html#a8be9d213f644608726499edca159e1e4">read32</a>(bus, device, function, registerOffset);</div>
<div class="line"><span class="lineno">   77</span>    </div>
<div class="line"><span class="lineno">   78</span>    uint32_t shift = (8 * (registerOffset % 4));</div>
<div class="line"><span class="lineno">   79</span>    uint32_t mask = 0xFF &lt;&lt; shift;</div>
<div class="line"><span class="lineno">   80</span>    </div>
<div class="line"><span class="lineno">   81</span>    dword &amp;= ~mask;</div>
<div class="line"><span class="lineno">   82</span>    dword |= ((uint32_t)value &lt;&lt; shift);</div>
<div class="line"><span class="lineno">   83</span>    </div>
<div class="line"><span class="lineno">   84</span>    <a class="code hl_function" href="../../de/d77/a41723.html#a2f72611558fb7dcc7971e748058832d8">write32</a>(bus, device, function, registerOffset, dword);</div>
<div class="line"><span class="lineno">   85</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d0/d46/a40742_source.html#l00033">read32()</a>, and <a class="el" href="../../d0/d46/a40742_source.html#l00054">write32()</a>.</p>
<div id="dynsection-25" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../de/d77/a41723_a1bbd1027e1d181bb2eb280070e3d1831_cgraph.png" border="0" usemap="#ade/d77/a41723_a1bbd1027e1d181bb2eb280070e3d1831_cgraph" alt=""/></div>
<map name="ade/d77/a41723_a1bbd1027e1d181bb2eb280070e3d1831_cgraph" id="ade/d77/a41723_a1bbd1027e1d181bb2eb280070e3d1831_cgraph">
<area shape="rect" title="Safely writes an 8&#45;bit byte to the PCI configuration space." alt="" coords="5,37,196,77"/>
<area shape="rect" href="../../de/d77/a41723.html#a8be9d213f644608726499edca159e1e4" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="244,69,435,109"/>
<area shape="poly" title=" " alt="" coords="197,67,231,72,230,77,196,73"/>
<area shape="rect" href="../../de/d77/a41723.html#a2f72611558fb7dcc7971e748058832d8" title="Writes a 32&#45;bit double word to the PCI configuration space." alt="" coords="244,5,435,45"/>
<area shape="poly" title=" " alt="" coords="196,42,230,37,231,43,197,47"/>
<area shape="rect" href="../../de/d77/a41723.html#a99c80eb69bb5258a96fb3b9c61ce9dd3" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="483,69,685,109"/>
<area shape="poly" title=" " alt="" coords="435,87,469,87,469,92,435,92"/>
<area shape="rect" href="../../d0/d66/a41743.html#a742b40049c70bfda79a3031b85297948" title="Reads a 32&#45;bit value from the I/O port." alt="" coords="489,133,679,173"/>
<area shape="poly" title=" " alt="" coords="417,107,495,127,493,132,416,112"/>
<area shape="rect" href="../../d0/d66/a41743.html#ad13c0ec90a83f05b61c023dd8a1f53e8" title="Writes a 32&#45;bit value to the I/O port." alt="" coords="489,5,679,45"/>
<area shape="poly" title=" " alt="" coords="416,67,493,46,495,51,417,72"/>
<area shape="poly" title=" " alt="" coords="417,43,495,63,493,68,416,48"/>
<area shape="poly" title=" " alt="" coords="435,23,475,23,475,28,435,28"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ab6a9e1ba7e8934198624da046fc80bad" name="ab6a9e1ba7e8934198624da046fc80bad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6a9e1ba7e8934198624da046fc80bad">&#9670;&#160;</a></span>commandPort</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d66/a41743.html">Port32Bit</a> hardware_communication::PCI_Controller::commandPort</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d2b/a40781_source.html#l00057">57</a> of file <a class="el" href="../../d3/d2b/a40781_source.html">kpci.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d46/a40742_source.html#l00033">read32()</a>, and <a class="el" href="../../d0/d46/a40742_source.html#l00054">write32()</a>.</p>

</div>
</div>
<a id="a63cf29ae25d0a70ee448ac1e2896a041" name="a63cf29ae25d0a70ee448ac1e2896a041"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63cf29ae25d0a70ee448ac1e2896a041">&#9670;&#160;</a></span>dataPort</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d66/a41743.html">Port32Bit</a> hardware_communication::PCI_Controller::dataPort</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d2b/a40781_source.html#l00056">56</a> of file <a class="el" href="../../d3/d2b/a40781_source.html">kpci.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d46/a40742_source.html#l00033">read32()</a>, and <a class="el" href="../../d0/d46/a40742_source.html#l00054">write32()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../d3/d2b/a40781_source.html">kpci.hpp</a></li>
<li><a class="el" href="../../d0/d46/a40742_source.html">kpci.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d1/d2b/a40815.html">hardware_communication</a></li><li class="navelem"><a class="el" href="../../de/d77/a41723.html">PCI_Controller</a></li>
    <li class="footer">Generated on Thu Jan 1 2026 23:40:58 for OSOS Dev by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
