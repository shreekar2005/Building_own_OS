<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OSOS Dev: memory::PhysicalMemoryManager</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<script type="text/javascript" src="../../darkmode_toggle.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">OSOS Dev
   </div>
   <div id="projectbrief">Developed by Shreekar</div>
  </td>
 </tr>
   <tr><td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td></tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d5/df8/a44145.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="../../d4/d1e/a44142.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">memory::PhysicalMemoryManager</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &quot;<a class="el" href="../../de/dc1/a43157_source.html">kpmm.hpp</a>&quot;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for memory::PhysicalMemoryManager:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d1/d68/a44143.png" border="0" usemap="#amemory_1_1PhysicalMemoryManager_coll__map" alt="Collaboration graph"/></div>
<map name="amemory_1_1PhysicalMemoryManager_coll__map" id="amemory_1_1PhysicalMemoryManager_coll__map">
<area shape="rect" title=" " alt="" coords="5,148,247,436"/>
<area shape="rect" title=" " alt="" coords="23,5,82,71"/>
<area shape="poly" title=" " alt="" coords="53,71,57,124,58,132,53,133,51,124,48,71"/>
<area shape="rect" title=" " alt="" coords="167,5,234,71"/>
<area shape="poly" title=" " alt="" coords="194,72,176,133,171,131,189,70"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a531ac27743a1f53231cdb49e24a9d346" id="r_a531ac27743a1f53231cdb49e24a9d346"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/df8/a44145.html#a531ac27743a1f53231cdb49e24a9d346">allocate_block</a> ()</td></tr>
<tr class="separator:a531ac27743a1f53231cdb49e24a9d346"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dbf1f7897b09234e6ef4758b1b1f5a4" id="r_a7dbf1f7897b09234e6ef4758b1b1f5a4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/df8/a44145.html#a7dbf1f7897b09234e6ef4758b1b1f5a4">free_block</a> (void *address)</td></tr>
<tr class="separator:a7dbf1f7897b09234e6ef4758b1b1f5a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae979d7141b08ef2c6594b37fb61286c8" id="r_ae979d7141b08ef2c6594b37fb61286c8"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/df8/a44145.html#ae979d7141b08ef2c6594b37fb61286c8">get_free_memory_kb</a> ()</td></tr>
<tr class="separator:ae979d7141b08ef2c6594b37fb61286c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbafbd2adc67a3d9d1b68266f30785c1" id="r_afbafbd2adc67a3d9d1b68266f30785c1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/df8/a44145.html#afbafbd2adc67a3d9d1b68266f30785c1">init</a> (multiboot_info_t *mbi)</td></tr>
<tr class="separator:afbafbd2adc67a3d9d1b68266f30785c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-methods" name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a0bd12ca869bdf57915201de8755f14d2" id="r_a0bd12ca869bdf57915201de8755f14d2"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/df8/a44145.html#a0bd12ca869bdf57915201de8755f14d2">is_used</a> (uint32_t block_index)</td></tr>
<tr class="separator:a0bd12ca869bdf57915201de8755f14d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd570d42e70dcc0d3729c4dcca31e44b" id="r_afd570d42e70dcc0d3729c4dcca31e44b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/df8/a44145.html#afd570d42e70dcc0d3729c4dcca31e44b">mark_free</a> (uint32_t block_index)</td></tr>
<tr class="separator:afd570d42e70dcc0d3729c4dcca31e44b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f6238319856f69ecb697de8548c8c53" id="r_a2f6238319856f69ecb697de8548c8c53"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/df8/a44145.html#a2f6238319856f69ecb697de8548c8c53">mark_used</a> (uint32_t block_index)</td></tr>
<tr class="separator:a2f6238319856f69ecb697de8548c8c53"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a0ac3c73d895bd677e848e0da96588a80" id="r_a0ac3c73d895bd677e848e0da96588a80"><td class="memItemLeft" align="right" valign="top">static uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/df8/a44145.html#a0ac3c73d895bd677e848e0da96588a80">memory_bitmap</a> = nullptr</td></tr>
<tr class="separator:a0ac3c73d895bd677e848e0da96588a80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f58808eea71d8013268749425da5254" id="r_a3f58808eea71d8013268749425da5254"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/df8/a44145.html#a3f58808eea71d8013268749425da5254">total_blocks</a> = 0</td></tr>
<tr class="separator:a3f58808eea71d8013268749425da5254"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6f21e656a2a090697654eac370951a5" id="r_ad6f21e656a2a090697654eac370951a5"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/df8/a44145.html#ad6f21e656a2a090697654eac370951a5">used_blocks</a> = 0</td></tr>
<tr class="separator:ad6f21e656a2a090697654eac370951a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="../../de/dc1/a43157_source.html#l00019">19</a> of file <a class="el" href="../../de/dc1/a43157_source.html">kpmm.hpp</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a531ac27743a1f53231cdb49e24a9d346" name="a531ac27743a1f53231cdb49e24a9d346"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a531ac27743a1f53231cdb49e24a9d346">&#9670;&#160;</a></span>allocate_block()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void * memory::PhysicalMemoryManager::allocate_block </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc3/a43112_source.html#l00160">160</a> of file <a class="el" href="../../d1/dc3/a43112_source.html">kpmm.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  161</span>{</div>
<div class="line"><span class="lineno">  162</span>    <span class="comment">// Iterate through bitmap to find a free bit (0)</span></div>
<div class="line"><span class="lineno">  163</span>    <span class="comment">// Optimization: We could store the last known free index to speed this up</span></div>
<div class="line"><span class="lineno">  164</span>    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; <a class="code hl_variable" href="../../d5/df8/a44145.html#a3f58808eea71d8013268749425da5254">total_blocks</a>; i++) {</div>
<div class="line"><span class="lineno">  165</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d5/df8/a44145.html#a0bd12ca869bdf57915201de8755f14d2">is_used</a>(i)) {</div>
<div class="line"><span class="lineno">  166</span>            <a class="code hl_function" href="../../d5/df8/a44145.html#a2f6238319856f69ecb697de8548c8c53">mark_used</a>(i);</div>
<div class="line"><span class="lineno">  167</span>            <a class="code hl_variable" href="../../d5/df8/a44145.html#ad6f21e656a2a090697654eac370951a5">used_blocks</a>++;</div>
<div class="line"><span class="lineno">  168</span>            <span class="comment">// Convert block index -&gt; Physical Address</span></div>
<div class="line"><span class="lineno">  169</span>            <span class="keywordflow">return</span> (<span class="keywordtype">void</span>*)(uintptr_t)(i * <a class="code hl_variable" href="../../d7/d0f/a43198.html#a692a87f8360162408613c734e40b21cc">PAGE_SIZE</a>); </div>
<div class="line"><span class="lineno">  170</span>        }</div>
<div class="line"><span class="lineno">  171</span>    }</div>
<div class="line"><span class="lineno">  172</span>    <a class="code hl_function" href="../../d3/d3b/a43197.html#a45ee52b918a784ff0e96e7c8917a91d9">printf</a>(<span class="stringliteral">&quot;OOM: Out of Memory!\n&quot;</span>);</div>
<div class="line"><span class="lineno">  173</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  174</span>}</div>
<div class="ttc" id="aa43197_html_a45ee52b918a784ff0e96e7c8917a91d9"><div class="ttname"><a href="../../d3/d3b/a43197.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a></div><div class="ttdeci">int printf(const char *format,...)</div><div class="ttdoc">A custom implementation of the standard printf function for writing to both VGA text mode memory and ...</div><div class="ttdef"><b>Definition</b> <a href="../../d4/d6b/a43115_source.html#l00315">kiostream.cpp:315</a></div></div>
<div class="ttc" id="aa43198_html_a692a87f8360162408613c734e40b21cc"><div class="ttname"><a href="../../d7/d0f/a43198.html#a692a87f8360162408613c734e40b21cc">memory::PAGE_SIZE</a></div><div class="ttdeci">const uint32_t PAGE_SIZE</div><div class="ttdef"><b>Definition</b> <a href="../../de/dc1/a43157_source.html#l00011">kpmm.hpp:11</a></div></div>
<div class="ttc" id="aa44145_html_a0bd12ca869bdf57915201de8755f14d2"><div class="ttname"><a href="../../d5/df8/a44145.html#a0bd12ca869bdf57915201de8755f14d2">memory::PhysicalMemoryManager::is_used</a></div><div class="ttdeci">static bool is_used(uint32_t block_index)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dc3/a43112_source.html#l00086">kpmm.cpp:86</a></div></div>
<div class="ttc" id="aa44145_html_a2f6238319856f69ecb697de8548c8c53"><div class="ttname"><a href="../../d5/df8/a44145.html#a2f6238319856f69ecb697de8548c8c53">memory::PhysicalMemoryManager::mark_used</a></div><div class="ttdeci">static void mark_used(uint32_t block_index)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dc3/a43112_source.html#l00074">kpmm.cpp:74</a></div></div>
<div class="ttc" id="aa44145_html_a3f58808eea71d8013268749425da5254"><div class="ttname"><a href="../../d5/df8/a44145.html#a3f58808eea71d8013268749425da5254">memory::PhysicalMemoryManager::total_blocks</a></div><div class="ttdeci">static uint32_t total_blocks</div><div class="ttdef"><b>Definition</b> <a href="../../de/dc1/a43157_source.html#l00025">kpmm.hpp:25</a></div></div>
<div class="ttc" id="aa44145_html_ad6f21e656a2a090697654eac370951a5"><div class="ttname"><a href="../../d5/df8/a44145.html#ad6f21e656a2a090697654eac370951a5">memory::PhysicalMemoryManager::used_blocks</a></div><div class="ttdeci">static uint32_t used_blocks</div><div class="ttdef"><b>Definition</b> <a href="../../de/dc1/a43157_source.html#l00026">kpmm.hpp:26</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/dc3/a43112_source.html#l00086">is_used()</a>, <a class="el" href="../../d1/dc3/a43112_source.html#l00074">mark_used()</a>, <a class="el" href="../../de/dc1/a43157_source.html#l00011">memory::PAGE_SIZE</a>, <a class="el" href="../../d4/d6b/a43115_source.html#l00315">basic::printf()</a>, <a class="el" href="../../de/dc1/a43157_source.html#l00025">total_blocks</a>, and <a class="el" href="../../de/dc1/a43157_source.html#l00026">used_blocks</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/ddc/a43106_source.html#l00023">memory::PagingManager::init()</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/df8/a44145_a531ac27743a1f53231cdb49e24a9d346_cgraph.png" border="0" usemap="#ad5/df8/a44145_a531ac27743a1f53231cdb49e24a9d346_cgraph" alt=""/></div>
<map name="ad5/df8/a44145_a531ac27743a1f53231cdb49e24a9d346_cgraph" id="ad5/df8/a44145_a531ac27743a1f53231cdb49e24a9d346_cgraph">
<area shape="rect" title=" " alt="" coords="5,69,255,109"/>
<area shape="rect" href="../../d5/df8/a44145.html#a0bd12ca869bdf57915201de8755f14d2" title=" " alt="" coords="303,5,552,45"/>
<area shape="poly" title=" " alt="" coords="223,67,320,46,321,51,224,72"/>
<area shape="rect" href="../../d5/df8/a44145.html#a2f6238319856f69ecb697de8548c8c53" title=" " alt="" coords="303,69,552,109"/>
<area shape="poly" title=" " alt="" coords="255,87,289,87,289,92,255,92"/>
<area shape="rect" href="../../d3/d3b/a43197.html#a45ee52b918a784ff0e96e7c8917a91d9" title="A custom implementation of the standard printf function for writing to both VGA text mode memory and ..." alt="" coords="378,134,477,159"/>
<area shape="poly" title=" " alt="" coords="235,107,365,132,364,137,234,112"/>
<area shape="rect" href="../../d3/d3b/a43197.html#aeacdadb7f1bb76f1452689d0e5cd4dad" title="Converts a double&#45;precision floating point number to a string." alt="" coords="600,33,760,58"/>
<area shape="poly" title=" " alt="" coords="476,140,514,133,551,119,565,109,574,98,584,87,599,75,626,61,628,66,601,80,588,91,579,102,569,113,553,124,515,138,477,145"/>
<area shape="rect" href="../../d3/d3b/a43197.html#a84a72638a4a04f5706b7f9b217359ecf" title="Converts an unsigned long long integer to a string." alt="" coords="813,83,945,109"/>
<area shape="poly" title=" " alt="" coords="477,136,600,119,800,99,800,105,600,124,477,141"/>
<area shape="rect" href="../../d3/d3b/a43197.html#a3d0041ad59dbbae5bc9adbb8ab784499" title="Internal function to print a null&#45;terminated string to video memory AND serial." alt="" coords="808,159,951,185"/>
<area shape="poly" title=" " alt="" coords="477,153,600,168,701,172,794,172,794,177,701,177,600,173,477,158"/>
<area shape="rect" href="../../d3/d3b/a43197.html#a5ecbf4c8112c602ba65a689ebe5014f8" title="Prints a hexadecimal number with leading zeros." alt="" coords="620,134,740,159"/>
<area shape="poly" title=" " alt="" coords="477,144,606,144,606,149,477,149"/>
<area shape="rect" href="../../d3/d3b/a43197.html#a9d1f0f838e646660db6d9284725c2b4c" title="Updates the position of the text mode cursor." alt="" coords="602,235,758,261"/>
<area shape="poly" title=" " alt="" coords="461,157,636,228,634,233,459,162"/>
<area shape="rect" href="../../d3/d3b/a43197.html#aa7de4c6aa018e049aa8992b037cc052a" title="Calculates the power of a number." alt="" coords="827,33,931,58"/>
<area shape="poly" title=" " alt="" coords="760,43,813,43,813,48,760,48"/>
<area shape="poly" title=" " alt="" coords="732,56,816,77,815,83,730,61"/>
<area shape="rect" href="../../d3/d3b/a43197.html#a6cfc2f6949fb98dfc419f9fd19f95982" title="Reverses a string in place." alt="" coords="1029,57,1143,82"/>
<area shape="poly" title=" " alt="" coords="945,85,1015,76,1016,81,946,90"/>
<area shape="rect" href="../../d5/dea/a44053.html#adfb4220d2c664ae5ba11e04d9d182f70" title="Calculates the video memory value for the mouse cursor block." alt="" coords="1007,106,1165,161"/>
<area shape="poly" title=" " alt="" coords="948,157,993,148,994,153,949,162"/>
<area shape="rect" href="../../d3/d3b/a43197.html#adef8a5b5400c388c29477d74db094cf3" title="Writes a single character to the COM1 serial port." alt="" coords="999,185,1173,210"/>
<area shape="poly" title=" " alt="" coords="951,178,985,182,985,188,951,183"/>
<area shape="rect" href="../../d3/d3b/a43197.html#a6233646eaac73374e727981e1157e5d7" title="Checks if the serial port&#39;s transmit buffer is empty (COM1)." alt="" coords="1235,178,1398,203"/>
<area shape="poly" title=" " alt="" coords="1173,192,1221,191,1221,196,1174,197"/>
<area shape="rect" href="../../d6/d62/a44117.html#a6ede8fba6ba7e26c5982a91a3d5ffa72" title="Writes an 8&#45;bit value to the I/O port." alt="" coords="1221,228,1412,268"/>
<area shape="poly" title=" " alt="" coords="1145,208,1212,222,1211,228,1144,213"/>
<area shape="rect" href="../../d6/d62/a44117.html#a425297307d64cb5d9889b32767f8fdc3" title="Reads an 8&#45;bit value from the I/O port." alt="" coords="1460,171,1651,211"/>
<area shape="poly" title=" " alt="" coords="1399,188,1447,188,1447,193,1399,193"/>
<area shape="poly" title=" " alt="" coords="730,131,815,109,816,115,732,136"/>
<area shape="poly" title=" " alt="" coords="741,152,795,159,794,164,740,157"/>
<area shape="poly" title=" " alt="" coords="758,245,1208,245,1208,251,758,251"/>
</map>
</div>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/df8/a44145_a531ac27743a1f53231cdb49e24a9d346_icgraph.png" border="0" usemap="#ad5/df8/a44145_a531ac27743a1f53231cdb49e24a9d346_icgraph" alt=""/></div>
<map name="ad5/df8/a44145_a531ac27743a1f53231cdb49e24a9d346_icgraph" id="ad5/df8/a44145_a531ac27743a1f53231cdb49e24a9d346_icgraph">
<area shape="rect" title=" " alt="" coords="380,5,629,45"/>
<area shape="rect" href="../../de/dc5/a44141.html#a6479b38f0447a8263f7c6381f647e7fa" title="Initializes the Paging system. Creates the Master Kernel Directory, maps Kernel memory (0&#45;16MB),..." alt="" coords="148,5,332,45"/>
<area shape="poly" title=" " alt="" coords="366,28,332,28,332,23,366,23"/>
<area shape="rect" href="../../db/d72/a43103.html#abb4e4866092116b520310d61961bfe12" title="The main entry point for the C++ kernel." alt="" coords="5,13,100,38"/>
<area shape="poly" title=" " alt="" coords="134,28,100,28,100,23,134,23"/>
</map>
</div>

</div>
</div>
<a id="a7dbf1f7897b09234e6ef4758b1b1f5a4" name="a7dbf1f7897b09234e6ef4758b1b1f5a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dbf1f7897b09234e6ef4758b1b1f5a4">&#9670;&#160;</a></span>free_block()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void memory::PhysicalMemoryManager::free_block </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc3/a43112_source.html#l00176">176</a> of file <a class="el" href="../../d1/dc3/a43112_source.html">kpmm.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  177</span>{</div>
<div class="line"><span class="lineno">  178</span>    uintptr_t addr = (uintptr_t)address;</div>
<div class="line"><span class="lineno">  179</span>    uint32_t block_index = addr / <a class="code hl_variable" href="../../d7/d0f/a43198.html#a692a87f8360162408613c734e40b21cc">PAGE_SIZE</a>;</div>
<div class="line"><span class="lineno">  180</span>    </div>
<div class="line"><span class="lineno">  181</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d5/df8/a44145.html#a0bd12ca869bdf57915201de8755f14d2">is_used</a>(block_index)) {</div>
<div class="line"><span class="lineno">  182</span>        <a class="code hl_function" href="../../d5/df8/a44145.html#afd570d42e70dcc0d3729c4dcca31e44b">mark_free</a>(block_index);</div>
<div class="line"><span class="lineno">  183</span>        <a class="code hl_variable" href="../../d5/df8/a44145.html#ad6f21e656a2a090697654eac370951a5">used_blocks</a>--;</div>
<div class="line"><span class="lineno">  184</span>    }</div>
<div class="line"><span class="lineno">  185</span>}</div>
<div class="ttc" id="aa44145_html_afd570d42e70dcc0d3729c4dcca31e44b"><div class="ttname"><a href="../../d5/df8/a44145.html#afd570d42e70dcc0d3729c4dcca31e44b">memory::PhysicalMemoryManager::mark_free</a></div><div class="ttdeci">static void mark_free(uint32_t block_index)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dc3/a43112_source.html#l00080">kpmm.cpp:80</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/dc3/a43112_source.html#l00086">is_used()</a>, <a class="el" href="../../d1/dc3/a43112_source.html#l00080">mark_free()</a>, <a class="el" href="../../de/dc1/a43157_source.html#l00011">memory::PAGE_SIZE</a>, and <a class="el" href="../../de/dc1/a43157_source.html#l00026">used_blocks</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/df8/a44145_a7dbf1f7897b09234e6ef4758b1b1f5a4_cgraph.png" border="0" usemap="#ad5/df8/a44145_a7dbf1f7897b09234e6ef4758b1b1f5a4_cgraph" alt=""/></div>
<map name="ad5/df8/a44145_a7dbf1f7897b09234e6ef4758b1b1f5a4_cgraph" id="ad5/df8/a44145_a7dbf1f7897b09234e6ef4758b1b1f5a4_cgraph">
<area shape="rect" title=" " alt="" coords="5,37,255,77"/>
<area shape="rect" href="../../d5/df8/a44145.html#a0bd12ca869bdf57915201de8755f14d2" title=" " alt="" coords="303,5,552,45"/>
<area shape="poly" title=" " alt="" coords="255,41,289,38,290,43,255,47"/>
<area shape="rect" href="../../d5/df8/a44145.html#afd570d42e70dcc0d3729c4dcca31e44b" title=" " alt="" coords="303,69,552,109"/>
<area shape="poly" title=" " alt="" coords="255,68,290,72,289,77,255,73"/>
</map>
</div>

</div>
</div>
<a id="ae979d7141b08ef2c6594b37fb61286c8" name="ae979d7141b08ef2c6594b37fb61286c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae979d7141b08ef2c6594b37fb61286c8">&#9670;&#160;</a></span>get_free_memory_kb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t memory::PhysicalMemoryManager::get_free_memory_kb </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc3/a43112_source.html#l00187">187</a> of file <a class="el" href="../../d1/dc3/a43112_source.html">kpmm.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  187</span>                                                   {</div>
<div class="line"><span class="lineno">  188</span>    <span class="comment">// This is a rough calculation based on current tracking</span></div>
<div class="line"><span class="lineno">  189</span>    <span class="comment">// For exact numbers, you should count &#39;0&#39; bits in the loop</span></div>
<div class="line"><span class="lineno">  190</span>    <span class="keywordflow">return</span> (<a class="code hl_variable" href="../../d5/df8/a44145.html#a3f58808eea71d8013268749425da5254">total_blocks</a> - <a class="code hl_variable" href="../../d5/df8/a44145.html#ad6f21e656a2a090697654eac370951a5">used_blocks</a>) * 4;</div>
<div class="line"><span class="lineno">  191</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/dc1/a43157_source.html#l00025">total_blocks</a>, and <a class="el" href="../../de/dc1/a43157_source.html#l00026">used_blocks</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d69/a43100_source.html#l00097">KernelShell::process_command()</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/df8/a44145_ae979d7141b08ef2c6594b37fb61286c8_icgraph.png" border="0" usemap="#ad5/df8/a44145_ae979d7141b08ef2c6594b37fb61286c8_icgraph" alt=""/></div>
<map name="ad5/df8/a44145_ae979d7141b08ef2c6594b37fb61286c8_icgraph" id="ad5/df8/a44145_ae979d7141b08ef2c6594b37fb61286c8_icgraph">
<area shape="rect" title=" " alt="" coords="689,37,939,77"/>
<area shape="rect" href="../../d0/db6/a44017.html#a64cee1fd80a35d996188c0034ec26b64" title="Simple command processor." alt="" coords="488,37,641,77"/>
<area shape="poly" title=" " alt="" coords="676,60,641,60,641,55,676,55"/>
<area shape="rect" href="../../d0/db6/a44017.html#ab76062d9a8256ca7a40503fd76095903" title="The single, centralized function for handling all key presses." alt="" coords="263,45,440,70"/>
<area shape="poly" title=" " alt="" coords="474,60,440,60,440,55,474,55"/>
<area shape="rect" href="../../da/db9/a44029.html#add675289514a4144f97d2189183400a8" title=" " alt="" coords="5,5,215,45"/>
<area shape="poly" title=" " alt="" coords="249,46,215,42,215,37,249,41"/>
<area shape="rect" href="../../d2/d17/a44021.html#af82a0bd16f995dd285d4f7822117377c" title="Handles key down events by forwarding them to the shell." alt="" coords="21,69,199,109"/>
<area shape="poly" title=" " alt="" coords="249,74,200,80,199,75,249,68"/>
</map>
</div>

</div>
</div>
<a id="afbafbd2adc67a3d9d1b68266f30785c1" name="afbafbd2adc67a3d9d1b68266f30785c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbafbd2adc67a3d9d1b68266f30785c1">&#9670;&#160;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void memory::PhysicalMemoryManager::init </td>
          <td>(</td>
          <td class="paramtype">multiboot_info_t *&#160;</td>
          <td class="paramname"><em>mbi</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc3/a43112_source.html#l00096">96</a> of file <a class="el" href="../../d1/dc3/a43112_source.html">kpmm.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   97</span>{</div>
<div class="line"><span class="lineno">   98</span>    <span class="comment">// placing it at the address of &#39;end&#39;, ensuring it doesn&#39;t overwrite kernel code.</span></div>
<div class="line"><span class="lineno">   99</span>    <a class="code hl_variable" href="../../d5/df8/a44145.html#a0ac3c73d895bd677e848e0da96588a80">memory_bitmap</a> = (uint8_t*)&amp;<a class="code hl_variable" href="../../d1/dc3/a43112.html#a204a3f4fa39b9c007f9784d3e4af4667">end</a>;</div>
<div class="line"><span class="lineno">  100</span> </div>
<div class="line"><span class="lineno">  101</span>    <span class="comment">// Mark EVERYTHING as used (1) initially.</span></div>
<div class="line"><span class="lineno">  102</span>    <span class="comment">// We only free what Multiboot tells us is actually RAM.</span></div>
<div class="line"><span class="lineno">  103</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; (int)<a class="code hl_variable" href="../../d7/d0f/a43198.html#a01b83c89147e8d35e0ffe48dd640770a">BITMAP_SIZE</a>; i++) {</div>
<div class="line"><span class="lineno">  104</span>        <a class="code hl_variable" href="../../d5/df8/a44145.html#a0ac3c73d895bd677e848e0da96588a80">memory_bitmap</a>[i] = 0xFF; </div>
<div class="line"><span class="lineno">  105</span>    }</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>    <span class="comment">// Parse Multiboot Map to unlock available RAM</span></div>
<div class="line"><span class="lineno">  108</span>    uintptr_t mmap_start = mbi-&gt;mmap_addr;</div>
<div class="line"><span class="lineno">  109</span>    uintptr_t mmap_end = mbi-&gt;mmap_addr + mbi-&gt;mmap_length;</div>
<div class="line"><span class="lineno">  110</span> </div>
<div class="line"><span class="lineno">  111</span>    <span class="keywordflow">for</span> (multiboot_memory_map_t *mmap = (multiboot_memory_map_t *)mmap_start;</div>
<div class="line"><span class="lineno">  112</span>         (uintptr_t)mmap &lt; mmap_end;</div>
<div class="line"><span class="lineno">  113</span>         mmap = (multiboot_memory_map_t *)((uintptr_t)mmap + mmap-&gt;size + <span class="keyword">sizeof</span>(mmap-&gt;size)))</div>
<div class="line"><span class="lineno">  114</span>    {</div>
<div class="line"><span class="lineno">  115</span>        <span class="keywordflow">if</span> (mmap-&gt;type == MULTIBOOT_MEMORY_AVAILABLE) {</div>
<div class="line"><span class="lineno">  116</span>            <span class="comment">// Calculate which 4KB blocks this region covers</span></div>
<div class="line"><span class="lineno">  117</span>            uint32_t start_block = mmap-&gt;addr / <a class="code hl_variable" href="../../d7/d0f/a43198.html#a692a87f8360162408613c734e40b21cc">PAGE_SIZE</a>;</div>
<div class="line"><span class="lineno">  118</span>            uint32_t num_blocks = mmap-&gt;len / <a class="code hl_variable" href="../../d7/d0f/a43198.html#a692a87f8360162408613c734e40b21cc">PAGE_SIZE</a>;</div>
<div class="line"><span class="lineno">  119</span>            </div>
<div class="line"><span class="lineno">  120</span>            <span class="comment">// Calculate total blocks supported by our bitmap size</span></div>
<div class="line"><span class="lineno">  121</span>            uint32_t max_supported_blocks = <a class="code hl_variable" href="../../d7/d0f/a43198.html#a01b83c89147e8d35e0ffe48dd640770a">BITMAP_SIZE</a> * 8; </div>
<div class="line"><span class="lineno">  122</span> </div>
<div class="line"><span class="lineno">  123</span>            <span class="comment">// If memory starts beyond 4GB, ignore it</span></div>
<div class="line"><span class="lineno">  124</span>            <span class="keywordflow">if</span> (start_block &gt;= max_supported_blocks) {</div>
<div class="line"><span class="lineno">  125</span>                <span class="keywordflow">continue</span>; </div>
<div class="line"><span class="lineno">  126</span>            }</div>
<div class="line"><span class="lineno">  127</span> </div>
<div class="line"><span class="lineno">  128</span>            <span class="comment">// If memory starts inside 4GB but extends beyond it, cap it.</span></div>
<div class="line"><span class="lineno">  129</span>            <span class="keywordflow">if</span> (start_block + num_blocks &gt; max_supported_blocks) {</div>
<div class="line"><span class="lineno">  130</span>                num_blocks = max_supported_blocks - start_block;</div>
<div class="line"><span class="lineno">  131</span>            }</div>
<div class="line"><span class="lineno">  132</span>            </div>
<div class="line"><span class="lineno">  133</span>            <span class="comment">// Mark them as free</span></div>
<div class="line"><span class="lineno">  134</span>            <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; num_blocks; i++) {</div>
<div class="line"><span class="lineno">  135</span>                <a class="code hl_function" href="../../d5/df8/a44145.html#afd570d42e70dcc0d3729c4dcca31e44b">mark_free</a>(start_block + i);</div>
<div class="line"><span class="lineno">  136</span>            }</div>
<div class="line"><span class="lineno">  137</span>            </div>
<div class="line"><span class="lineno">  138</span>            <span class="comment">// Track total system size roughly</span></div>
<div class="line"><span class="lineno">  139</span>            <span class="keywordflow">if</span> (start_block + num_blocks &gt; <a class="code hl_variable" href="../../d5/df8/a44145.html#a3f58808eea71d8013268749425da5254">total_blocks</a>) {</div>
<div class="line"><span class="lineno">  140</span>                <a class="code hl_variable" href="../../d5/df8/a44145.html#a3f58808eea71d8013268749425da5254">total_blocks</a> = start_block + num_blocks;</div>
<div class="line"><span class="lineno">  141</span>            }</div>
<div class="line"><span class="lineno">  142</span>        }</div>
<div class="line"><span class="lineno">  143</span>    }</div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span>    <span class="comment">// Protect Critical Regions</span></div>
<div class="line"><span class="lineno">  146</span>    <span class="comment">// Mark the first 4MB as USED. This covers:</span></div>
<div class="line"><span class="lineno">  147</span>    <span class="comment">// - Real Mode IVT (0x0)</span></div>
<div class="line"><span class="lineno">  148</span>    <span class="comment">// - BIOS Data Area</span></div>
<div class="line"><span class="lineno">  149</span>    <span class="comment">// - Video Memory (0xB8000)</span></div>
<div class="line"><span class="lineno">  150</span>    <span class="comment">// - Your Kernel Code (loaded at 1MB usually)</span></div>
<div class="line"><span class="lineno">  151</span>    <span class="comment">// - GRUB Modules</span></div>
<div class="line"><span class="lineno">  152</span>    uint32_t reserved_blocks = (4 * 1024 * 1024) / <a class="code hl_variable" href="../../d7/d0f/a43198.html#a692a87f8360162408613c734e40b21cc">PAGE_SIZE</a>; <span class="comment">// 1024 blocks</span></div>
<div class="line"><span class="lineno">  153</span>    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; reserved_blocks; i++) {</div>
<div class="line"><span class="lineno">  154</span>        <a class="code hl_function" href="../../d5/df8/a44145.html#a2f6238319856f69ecb697de8548c8c53">mark_used</a>(i);</div>
<div class="line"><span class="lineno">  155</span>    }</div>
<div class="line"><span class="lineno">  156</span>    </div>
<div class="line"><span class="lineno">  157</span>    <a class="code hl_function" href="../../d3/d3b/a43197.html#a45ee52b918a784ff0e96e7c8917a91d9">printf</a>(<span class="stringliteral">&quot;PMM Initialized. Total Blocks: %d\n&quot;</span>, <a class="code hl_variable" href="../../d5/df8/a44145.html#a3f58808eea71d8013268749425da5254">total_blocks</a>);</div>
<div class="line"><span class="lineno">  158</span>}</div>
<div class="ttc" id="aa43112_html_a204a3f4fa39b9c007f9784d3e4af4667"><div class="ttname"><a href="../../d1/dc3/a43112.html#a204a3f4fa39b9c007f9784d3e4af4667">end</a></div><div class="ttdeci">uint32_t end</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dc3/a43112_source.html#l00006">kpmm.cpp:6</a></div></div>
<div class="ttc" id="aa43198_html_a01b83c89147e8d35e0ffe48dd640770a"><div class="ttname"><a href="../../d7/d0f/a43198.html#a01b83c89147e8d35e0ffe48dd640770a">memory::BITMAP_SIZE</a></div><div class="ttdeci">const uint32_t BITMAP_SIZE</div><div class="ttdef"><b>Definition</b> <a href="../../de/dc1/a43157_source.html#l00015">kpmm.hpp:15</a></div></div>
<div class="ttc" id="aa44145_html_a0ac3c73d895bd677e848e0da96588a80"><div class="ttname"><a href="../../d5/df8/a44145.html#a0ac3c73d895bd677e848e0da96588a80">memory::PhysicalMemoryManager::memory_bitmap</a></div><div class="ttdeci">static uint8_t * memory_bitmap</div><div class="ttdef"><b>Definition</b> <a href="../../de/dc1/a43157_source.html#l00022">kpmm.hpp:22</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/dc1/a43157_source.html#l00015">memory::BITMAP_SIZE</a>, <a class="el" href="../../d1/dc3/a43112_source.html#l00006">end</a>, <a class="el" href="../../d1/dc3/a43112_source.html#l00080">mark_free()</a>, <a class="el" href="../../d1/dc3/a43112_source.html#l00074">mark_used()</a>, <a class="el" href="../../de/dc1/a43157_source.html#l00022">memory_bitmap</a>, <a class="el" href="../../de/dc1/a43157_source.html#l00011">memory::PAGE_SIZE</a>, <a class="el" href="../../d4/d6b/a43115_source.html#l00315">basic::printf()</a>, and <a class="el" href="../../de/dc1/a43157_source.html#l00025">total_blocks</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d72/a43103_source.html#l00039">kernelMain()</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/df8/a44145_afbafbd2adc67a3d9d1b68266f30785c1_cgraph.png" border="0" usemap="#ad5/df8/a44145_afbafbd2adc67a3d9d1b68266f30785c1_cgraph" alt=""/></div>
<map name="ad5/df8/a44145_afbafbd2adc67a3d9d1b68266f30785c1_cgraph" id="ad5/df8/a44145_afbafbd2adc67a3d9d1b68266f30785c1_cgraph">
<area shape="rect" title=" " alt="" coords="5,69,255,109"/>
<area shape="rect" href="../../d5/df8/a44145.html#afd570d42e70dcc0d3729c4dcca31e44b" title=" " alt="" coords="303,5,552,45"/>
<area shape="poly" title=" " alt="" coords="223,67,320,46,321,51,224,72"/>
<area shape="rect" href="../../d5/df8/a44145.html#a2f6238319856f69ecb697de8548c8c53" title=" " alt="" coords="303,69,552,109"/>
<area shape="poly" title=" " alt="" coords="255,87,289,87,289,92,255,92"/>
<area shape="rect" href="../../d3/d3b/a43197.html#a45ee52b918a784ff0e96e7c8917a91d9" title="A custom implementation of the standard printf function for writing to both VGA text mode memory and ..." alt="" coords="378,134,477,159"/>
<area shape="poly" title=" " alt="" coords="235,107,365,132,364,137,234,112"/>
<area shape="rect" href="../../d3/d3b/a43197.html#aeacdadb7f1bb76f1452689d0e5cd4dad" title="Converts a double&#45;precision floating point number to a string." alt="" coords="600,33,760,58"/>
<area shape="poly" title=" " alt="" coords="476,140,514,133,551,119,565,109,574,98,584,87,599,75,626,61,628,66,601,80,588,91,579,102,569,113,553,124,515,138,477,145"/>
<area shape="rect" href="../../d3/d3b/a43197.html#a84a72638a4a04f5706b7f9b217359ecf" title="Converts an unsigned long long integer to a string." alt="" coords="813,83,945,109"/>
<area shape="poly" title=" " alt="" coords="477,136,600,119,800,99,800,105,600,124,477,141"/>
<area shape="rect" href="../../d3/d3b/a43197.html#a3d0041ad59dbbae5bc9adbb8ab784499" title="Internal function to print a null&#45;terminated string to video memory AND serial." alt="" coords="808,159,951,185"/>
<area shape="poly" title=" " alt="" coords="477,153,600,168,701,172,794,172,794,177,701,177,600,173,477,158"/>
<area shape="rect" href="../../d3/d3b/a43197.html#a5ecbf4c8112c602ba65a689ebe5014f8" title="Prints a hexadecimal number with leading zeros." alt="" coords="620,134,740,159"/>
<area shape="poly" title=" " alt="" coords="477,144,606,144,606,149,477,149"/>
<area shape="rect" href="../../d3/d3b/a43197.html#a9d1f0f838e646660db6d9284725c2b4c" title="Updates the position of the text mode cursor." alt="" coords="602,235,758,261"/>
<area shape="poly" title=" " alt="" coords="461,157,636,228,634,233,459,162"/>
<area shape="rect" href="../../d3/d3b/a43197.html#aa7de4c6aa018e049aa8992b037cc052a" title="Calculates the power of a number." alt="" coords="827,33,931,58"/>
<area shape="poly" title=" " alt="" coords="760,43,813,43,813,48,760,48"/>
<area shape="poly" title=" " alt="" coords="732,56,816,77,815,83,730,61"/>
<area shape="rect" href="../../d3/d3b/a43197.html#a6cfc2f6949fb98dfc419f9fd19f95982" title="Reverses a string in place." alt="" coords="1029,57,1143,82"/>
<area shape="poly" title=" " alt="" coords="945,85,1015,76,1016,81,946,90"/>
<area shape="rect" href="../../d5/dea/a44053.html#adfb4220d2c664ae5ba11e04d9d182f70" title="Calculates the video memory value for the mouse cursor block." alt="" coords="1007,106,1165,161"/>
<area shape="poly" title=" " alt="" coords="948,157,993,148,994,153,949,162"/>
<area shape="rect" href="../../d3/d3b/a43197.html#adef8a5b5400c388c29477d74db094cf3" title="Writes a single character to the COM1 serial port." alt="" coords="999,185,1173,210"/>
<area shape="poly" title=" " alt="" coords="951,178,985,182,985,188,951,183"/>
<area shape="rect" href="../../d3/d3b/a43197.html#a6233646eaac73374e727981e1157e5d7" title="Checks if the serial port&#39;s transmit buffer is empty (COM1)." alt="" coords="1235,178,1398,203"/>
<area shape="poly" title=" " alt="" coords="1173,192,1221,191,1221,196,1174,197"/>
<area shape="rect" href="../../d6/d62/a44117.html#a6ede8fba6ba7e26c5982a91a3d5ffa72" title="Writes an 8&#45;bit value to the I/O port." alt="" coords="1221,228,1412,268"/>
<area shape="poly" title=" " alt="" coords="1145,208,1212,222,1211,228,1144,213"/>
<area shape="rect" href="../../d6/d62/a44117.html#a425297307d64cb5d9889b32767f8fdc3" title="Reads an 8&#45;bit value from the I/O port." alt="" coords="1460,171,1651,211"/>
<area shape="poly" title=" " alt="" coords="1399,188,1447,188,1447,193,1399,193"/>
<area shape="poly" title=" " alt="" coords="730,131,815,109,816,115,732,136"/>
<area shape="poly" title=" " alt="" coords="741,152,795,159,794,164,740,157"/>
<area shape="poly" title=" " alt="" coords="758,245,1208,245,1208,251,758,251"/>
</map>
</div>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/df8/a44145_afbafbd2adc67a3d9d1b68266f30785c1_icgraph.png" border="0" usemap="#ad5/df8/a44145_afbafbd2adc67a3d9d1b68266f30785c1_icgraph" alt=""/></div>
<map name="ad5/df8/a44145_afbafbd2adc67a3d9d1b68266f30785c1_icgraph" id="ad5/df8/a44145_afbafbd2adc67a3d9d1b68266f30785c1_icgraph">
<area shape="rect" title=" " alt="" coords="148,5,397,45"/>
<area shape="rect" href="../../db/d72/a43103.html#abb4e4866092116b520310d61961bfe12" title="The main entry point for the C++ kernel." alt="" coords="5,13,100,38"/>
<area shape="poly" title=" " alt="" coords="134,28,100,28,100,23,134,23"/>
</map>
</div>

</div>
</div>
<a id="a0bd12ca869bdf57915201de8755f14d2" name="a0bd12ca869bdf57915201de8755f14d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bd12ca869bdf57915201de8755f14d2">&#9670;&#160;</a></span>is_used()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool memory::PhysicalMemoryManager::is_used </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>block_index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc3/a43112_source.html#l00086">86</a> of file <a class="el" href="../../d1/dc3/a43112_source.html">kpmm.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   86</span>                                                        {</div>
<div class="line"><span class="lineno">   87</span>    uint32_t index = block_index / 8;</div>
<div class="line"><span class="lineno">   88</span>    uint32_t offset = block_index % 8;</div>
<div class="line"><span class="lineno">   89</span>    <span class="keywordflow">return</span> (<a class="code hl_variable" href="../../d5/df8/a44145.html#a0ac3c73d895bd677e848e0da96588a80">memory_bitmap</a>[index] &amp; (1 &lt;&lt; offset)) != 0;</div>
<div class="line"><span class="lineno">   90</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/dc1/a43157_source.html#l00022">memory_bitmap</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc3/a43112_source.html#l00160">allocate_block()</a>, and <a class="el" href="../../d1/dc3/a43112_source.html#l00176">free_block()</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/df8/a44145_a0bd12ca869bdf57915201de8755f14d2_icgraph.png" border="0" usemap="#ad5/df8/a44145_a0bd12ca869bdf57915201de8755f14d2_icgraph" alt=""/></div>
<map name="ad5/df8/a44145_a0bd12ca869bdf57915201de8755f14d2_icgraph" id="ad5/df8/a44145_a0bd12ca869bdf57915201de8755f14d2_icgraph">
<area shape="rect" title=" " alt="" coords="677,37,927,77"/>
<area shape="rect" href="../../d5/df8/a44145.html#a531ac27743a1f53231cdb49e24a9d346" title=" " alt="" coords="380,5,629,45"/>
<area shape="poly" title=" " alt="" coords="663,45,629,41,630,36,664,40"/>
<area shape="rect" href="../../d5/df8/a44145.html#a7dbf1f7897b09234e6ef4758b1b1f5a4" title=" " alt="" coords="380,69,629,109"/>
<area shape="poly" title=" " alt="" coords="664,75,630,79,629,73,663,70"/>
<area shape="rect" href="../../de/dc5/a44141.html#a6479b38f0447a8263f7c6381f647e7fa" title="Initializes the Paging system. Creates the Master Kernel Directory, maps Kernel memory (0&#45;16MB),..." alt="" coords="148,5,332,45"/>
<area shape="poly" title=" " alt="" coords="366,28,332,28,332,23,366,23"/>
<area shape="rect" href="../../db/d72/a43103.html#abb4e4866092116b520310d61961bfe12" title="The main entry point for the C++ kernel." alt="" coords="5,13,100,38"/>
<area shape="poly" title=" " alt="" coords="134,28,100,28,100,23,134,23"/>
</map>
</div>

</div>
</div>
<a id="afd570d42e70dcc0d3729c4dcca31e44b" name="afd570d42e70dcc0d3729c4dcca31e44b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd570d42e70dcc0d3729c4dcca31e44b">&#9670;&#160;</a></span>mark_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void memory::PhysicalMemoryManager::mark_free </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>block_index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc3/a43112_source.html#l00080">80</a> of file <a class="el" href="../../d1/dc3/a43112_source.html">kpmm.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   80</span>                                                          {</div>
<div class="line"><span class="lineno">   81</span>    uint32_t index = block_index / 8;</div>
<div class="line"><span class="lineno">   82</span>    uint32_t offset = block_index % 8;</div>
<div class="line"><span class="lineno">   83</span>    <a class="code hl_variable" href="../../d5/df8/a44145.html#a0ac3c73d895bd677e848e0da96588a80">memory_bitmap</a>[index] &amp;= ~(1 &lt;&lt; offset);</div>
<div class="line"><span class="lineno">   84</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/dc1/a43157_source.html#l00022">memory_bitmap</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc3/a43112_source.html#l00176">free_block()</a>, and <a class="el" href="../../d1/dc3/a43112_source.html#l00096">init()</a>.</p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/df8/a44145_afd570d42e70dcc0d3729c4dcca31e44b_icgraph.png" border="0" usemap="#ad5/df8/a44145_afd570d42e70dcc0d3729c4dcca31e44b_icgraph" alt=""/></div>
<map name="ad5/df8/a44145_afd570d42e70dcc0d3729c4dcca31e44b_icgraph" id="ad5/df8/a44145_afd570d42e70dcc0d3729c4dcca31e44b_icgraph">
<area shape="rect" title=" " alt="" coords="445,37,695,77"/>
<area shape="rect" href="../../d5/df8/a44145.html#a7dbf1f7897b09234e6ef4758b1b1f5a4" title=" " alt="" coords="148,5,397,45"/>
<area shape="poly" title=" " alt="" coords="431,45,397,41,398,36,432,40"/>
<area shape="rect" href="../../d5/df8/a44145.html#afbafbd2adc67a3d9d1b68266f30785c1" title=" " alt="" coords="148,69,397,109"/>
<area shape="poly" title=" " alt="" coords="432,75,398,79,397,73,431,70"/>
<area shape="rect" href="../../db/d72/a43103.html#abb4e4866092116b520310d61961bfe12" title="The main entry point for the C++ kernel." alt="" coords="5,77,100,102"/>
<area shape="poly" title=" " alt="" coords="134,92,100,92,100,87,134,87"/>
</map>
</div>

</div>
</div>
<a id="a2f6238319856f69ecb697de8548c8c53" name="a2f6238319856f69ecb697de8548c8c53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f6238319856f69ecb697de8548c8c53">&#9670;&#160;</a></span>mark_used()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void memory::PhysicalMemoryManager::mark_used </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>block_index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc3/a43112_source.html#l00074">74</a> of file <a class="el" href="../../d1/dc3/a43112_source.html">kpmm.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   74</span>                                                          {</div>
<div class="line"><span class="lineno">   75</span>    uint32_t index = block_index / 8;</div>
<div class="line"><span class="lineno">   76</span>    uint32_t offset = block_index % 8;</div>
<div class="line"><span class="lineno">   77</span>    <a class="code hl_variable" href="../../d5/df8/a44145.html#a0ac3c73d895bd677e848e0da96588a80">memory_bitmap</a>[index] |= (1 &lt;&lt; offset);</div>
<div class="line"><span class="lineno">   78</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/dc1/a43157_source.html#l00022">memory_bitmap</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc3/a43112_source.html#l00160">allocate_block()</a>, and <a class="el" href="../../d1/dc3/a43112_source.html#l00096">init()</a>.</p>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/df8/a44145_a2f6238319856f69ecb697de8548c8c53_icgraph.png" border="0" usemap="#ad5/df8/a44145_a2f6238319856f69ecb697de8548c8c53_icgraph" alt=""/></div>
<map name="ad5/df8/a44145_a2f6238319856f69ecb697de8548c8c53_icgraph" id="ad5/df8/a44145_a2f6238319856f69ecb697de8548c8c53_icgraph">
<area shape="rect" title=" " alt="" coords="743,39,992,79"/>
<area shape="rect" href="../../d5/df8/a44145.html#a531ac27743a1f53231cdb49e24a9d346" title=" " alt="" coords="445,8,695,48"/>
<area shape="poly" title=" " alt="" coords="729,47,694,43,695,38,729,42"/>
<area shape="rect" href="../../d5/df8/a44145.html#afbafbd2adc67a3d9d1b68266f30785c1" title=" " alt="" coords="148,69,397,109"/>
<area shape="poly" title=" " alt="" coords="729,68,398,86,398,80,729,63"/>
<area shape="rect" href="../../de/dc5/a44141.html#a6479b38f0447a8263f7c6381f647e7fa" title="Initializes the Paging system. Creates the Master Kernel Directory, maps Kernel memory (0&#45;16MB),..." alt="" coords="181,5,365,45"/>
<area shape="poly" title=" " alt="" coords="431,29,365,29,365,23,431,24"/>
<area shape="rect" href="../../db/d72/a43103.html#abb4e4866092116b520310d61961bfe12" title="The main entry point for the C++ kernel." alt="" coords="5,45,100,70"/>
<area shape="poly" title=" " alt="" coords="167,43,100,53,100,48,166,38"/>
<area shape="poly" title=" " alt="" coords="134,72,100,67,101,62,135,67"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a0ac3c73d895bd677e848e0da96588a80" name="a0ac3c73d895bd677e848e0da96588a80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ac3c73d895bd677e848e0da96588a80">&#9670;&#160;</a></span>memory_bitmap</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t * memory::PhysicalMemoryManager::memory_bitmap = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dc1/a43157_source.html#l00022">22</a> of file <a class="el" href="../../de/dc1/a43157_source.html">kpmm.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc3/a43112_source.html#l00096">init()</a>, <a class="el" href="../../d1/dc3/a43112_source.html#l00086">is_used()</a>, <a class="el" href="../../d1/dc3/a43112_source.html#l00080">mark_free()</a>, and <a class="el" href="../../d1/dc3/a43112_source.html#l00074">mark_used()</a>.</p>

</div>
</div>
<a id="a3f58808eea71d8013268749425da5254" name="a3f58808eea71d8013268749425da5254"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f58808eea71d8013268749425da5254">&#9670;&#160;</a></span>total_blocks</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t memory::PhysicalMemoryManager::total_blocks = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dc1/a43157_source.html#l00025">25</a> of file <a class="el" href="../../de/dc1/a43157_source.html">kpmm.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc3/a43112_source.html#l00160">allocate_block()</a>, <a class="el" href="../../d1/dc3/a43112_source.html#l00187">get_free_memory_kb()</a>, and <a class="el" href="../../d1/dc3/a43112_source.html#l00096">init()</a>.</p>

</div>
</div>
<a id="ad6f21e656a2a090697654eac370951a5" name="ad6f21e656a2a090697654eac370951a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6f21e656a2a090697654eac370951a5">&#9670;&#160;</a></span>used_blocks</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t memory::PhysicalMemoryManager::used_blocks = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dc1/a43157_source.html#l00026">26</a> of file <a class="el" href="../../de/dc1/a43157_source.html">kpmm.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc3/a43112_source.html#l00160">allocate_block()</a>, <a class="el" href="../../d1/dc3/a43112_source.html#l00176">free_block()</a>, and <a class="el" href="../../d1/dc3/a43112_source.html#l00187">get_free_memory_kb()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../de/dc1/a43157_source.html">kpmm.hpp</a></li>
<li><a class="el" href="../../d1/dc3/a43112_source.html">kpmm.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d7/d0f/a43198.html">memory</a></li><li class="navelem"><a class="el" href="../../d5/df8/a44145.html">PhysicalMemoryManager</a></li>
    <li class="footer">Generated on Wed Jan 7 2026 18:07:55 for OSOS Dev by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
