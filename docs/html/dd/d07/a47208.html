<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OSOS Dev: hardware_communication::PCI_Controller</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<script type="text/javascript" src="../../darkmode_toggle.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">OSOS Dev
   </div>
   <div id="projectbrief">Developed by Shreekar</div>
  </td>
 </tr>
   <tr><td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td></tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dd/d07/a47208.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d6/d68/a47205.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">hardware_communication::PCI_Controller</div></div>
</div><!--header-->
<div class="contents">

<p>Manages communication with the PCI bus via the x86 Configuration Space mechanism.  
 <a href="../../dd/d07/a47208.html#details">More...</a></p>

<p><code>#include &quot;<a class="el" href="../../db/d74/a46247_source.html">kpci.hpp</a>&quot;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for hardware_communication::PCI_Controller:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/da2/a47206.png" border="0" usemap="#ahardware__communication_1_1PCI__Controller_coll__map" alt="Collaboration graph"/></div>
<map name="ahardware__communication_1_1PCI__Controller_coll__map" id="ahardware__communication_1_1PCI__Controller_coll__map">
<area shape="rect" title="Manages communication with the PCI bus via the x86 Configuration Space mechanism." alt="" coords="5,529,328,1555"/>
<area shape="rect" href="../../dc/df4/a47228.html" title="Represents a 32&#45;bit (double&#45;word&#45;sized) I/O Port." alt="" coords="75,283,258,452"/>
<area shape="poly" title=" " alt="" coords="169,452,169,513,164,513,164,452"/>
<area shape="rect" href="../../df/df1/a47212.html" title="Base class for hardware I/O port communication." alt="" coords="68,133,265,233"/>
<area shape="poly" title=" " alt="" coords="169,247,169,283,164,283,164,247"/>
<area shape="rect" title=" " alt="" coords="133,5,200,71"/>
<area shape="poly" title=" " alt="" coords="169,71,169,117,164,117,164,71"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a71d89c22009309f0d354da5cbf359dc7" id="r_a71d89c22009309f0d354da5cbf359dc7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d07/a47208.html#a71d89c22009309f0d354da5cbf359dc7">PCI_Controller</a> ()</td></tr>
<tr class="separator:a71d89c22009309f0d354da5cbf359dc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ee06d7487fe4ff999d2176786c2e743" id="r_a3ee06d7487fe4ff999d2176786c2e743"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d07/a47208.html#a3ee06d7487fe4ff999d2176786c2e743">~PCI_Controller</a> ()</td></tr>
<tr class="separator:a3ee06d7487fe4ff999d2176786c2e743"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54eaf77198f4b3816b9276f3d5be1661" id="r_a54eaf77198f4b3816b9276f3d5be1661"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d07/a47208.html#a54eaf77198f4b3816b9276f3d5be1661">deviceHasFunctions</a> (uint8_t bus, uint8_t device)</td></tr>
<tr class="memdesc:a54eaf77198f4b3816b9276f3d5be1661"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if a device is a multi-function device.  <br /></td></tr>
<tr class="separator:a54eaf77198f4b3816b9276f3d5be1661"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e00e862f7af95887e09f3b90f7357fc" id="r_a5e00e862f7af95887e09f3b90f7357fc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d9a/a46288.html#d9/d67/a47200">BaseAddressRegister</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d07/a47208.html#a5e00e862f7af95887e09f3b90f7357fc">getBaseAddressRegister</a> (uint8_t bus, uint8_t device, uint8_t function, uint16_t bar)</td></tr>
<tr class="memdesc:a5e00e862f7af95887e09f3b90f7357fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decodes a raw BAR value into a <a class="el" href="../../d4/d9a/a46288.html#d9/d67/a47200" title="Represents a parsed Base Address Register (BAR) from a PCI device.">BaseAddressRegister</a> object.  <br /></td></tr>
<tr class="separator:a5e00e862f7af95887e09f3b90f7357fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf54e2d1841368c2f8b2d5989a2fa7b0" id="r_adf54e2d1841368c2f8b2d5989a2fa7b0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d27/a47204.html">PCI_DeviceDescriptor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d07/a47208.html#adf54e2d1841368c2f8b2d5989a2fa7b0">getDeviceDescriptor</a> (uint8_t bus, uint8_t device, uint8_t function)</td></tr>
<tr class="memdesc:adf54e2d1841368c2f8b2d5989a2fa7b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the configuration header to create a descriptor object.  <br /></td></tr>
<tr class="separator:adf54e2d1841368c2f8b2d5989a2fa7b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a5c1a26be6003b1ef1478fdc7ae2466" id="r_a0a5c1a26be6003b1ef1478fdc7ae2466"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/da8/a47124.html">driver::Driver</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d07/a47208.html#a0a5c1a26be6003b1ef1478fdc7ae2466">getDriver</a> (<a class="el" href="../../dc/d27/a47204.html">PCI_DeviceDescriptor</a> dev, <a class="el" href="../../d6/d83/a47196.html">hardware_communication::InterruptManager</a> *interrupt_manager)</td></tr>
<tr class="memdesc:a0a5c1a26be6003b1ef1478fdc7ae2466"><td class="mdescLeft">&#160;</td><td class="mdescRight">Factory method that instantiates the correct driver for a given device.  <br /></td></tr>
<tr class="separator:a0a5c1a26be6003b1ef1478fdc7ae2466"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbe08b680f1d06bcd047cd0c8f215bfd" id="r_abbe08b680f1d06bcd047cd0c8f215bfd"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d07/a47208.html#abbe08b680f1d06bcd047cd0c8f215bfd">read16</a> (uint8_t bus, uint8_t device, uint8_t function, uint8_t registerOffset)</td></tr>
<tr class="memdesc:abbe08b680f1d06bcd047cd0c8f215bfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a 16-bit word from the PCI configuration space.  <br /></td></tr>
<tr class="separator:abbe08b680f1d06bcd047cd0c8f215bfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8be9d213f644608726499edca159e1e4" id="r_a8be9d213f644608726499edca159e1e4"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d07/a47208.html#a8be9d213f644608726499edca159e1e4">read32</a> (uint8_t bus, uint8_t device, uint8_t function, uint8_t registerOffset)</td></tr>
<tr class="memdesc:a8be9d213f644608726499edca159e1e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a 32-bit double word from the PCI configuration space.  <br /></td></tr>
<tr class="separator:a8be9d213f644608726499edca159e1e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e21604894939edaafd1d5baae2840dd" id="r_a6e21604894939edaafd1d5baae2840dd"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d07/a47208.html#a6e21604894939edaafd1d5baae2840dd">read8</a> (uint8_t bus, uint8_t device, uint8_t function, uint8_t registerOffset)</td></tr>
<tr class="memdesc:a6e21604894939edaafd1d5baae2840dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads an 8-bit byte from the PCI configuration space.  <br /></td></tr>
<tr class="separator:a6e21604894939edaafd1d5baae2840dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39f63594cdcdad7acc3860d6d339995e" id="r_a39f63594cdcdad7acc3860d6d339995e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d07/a47208.html#a39f63594cdcdad7acc3860d6d339995e">recursiveSelDriver</a> (uint8_t bus, <a class="el" href="../../d5/d64/a47128.html">driver::DriverManager</a> *driver_manager, <a class="el" href="../../d6/d83/a47196.html">hardware_communication::InterruptManager</a> *interrupt_manager)</td></tr>
<tr class="memdesc:a39f63594cdcdad7acc3860d6d339995e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recursively scans the bus for devices and bridges, assigning drivers where possible.  <br /></td></tr>
<tr class="separator:a39f63594cdcdad7acc3860d6d339995e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a676c96d825ec578ff98c965c4b999aec" id="r_a676c96d825ec578ff98c965c4b999aec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d07/a47208.html#a676c96d825ec578ff98c965c4b999aec">scanBus</a> (uint8_t bus)</td></tr>
<tr class="memdesc:a676c96d825ec578ff98c965c4b999aec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scans a bus just for listing devices (does not instantiate drivers).  <br /></td></tr>
<tr class="separator:a676c96d825ec578ff98c965c4b999aec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86f101dc2b53f938d5ac466c7ec33e2c" id="r_a86f101dc2b53f938d5ac466c7ec33e2c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d07/a47208.html#a86f101dc2b53f938d5ac466c7ec33e2c">selectDrivers</a> (<a class="el" href="../../d5/d64/a47128.html">driver::DriverManager</a> *driver_manager, <a class="el" href="../../d6/d83/a47196.html">hardware_communication::InterruptManager</a> *interrupt_manager)</td></tr>
<tr class="memdesc:a86f101dc2b53f938d5ac466c7ec33e2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the driver selection process from Bus 0.  <br /></td></tr>
<tr class="separator:a86f101dc2b53f938d5ac466c7ec33e2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4466a0762483fd1c3ec5f2745a58386" id="r_ac4466a0762483fd1c3ec5f2745a58386"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d07/a47208.html#ac4466a0762483fd1c3ec5f2745a58386">write16</a> (uint8_t bus, uint8_t device, uint8_t function, uint8_t registerOffset, uint16_t value)</td></tr>
<tr class="memdesc:ac4466a0762483fd1c3ec5f2745a58386"><td class="mdescLeft">&#160;</td><td class="mdescRight">Safely writes a 16-bit word to the PCI configuration space.  <br /></td></tr>
<tr class="separator:ac4466a0762483fd1c3ec5f2745a58386"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f72611558fb7dcc7971e748058832d8" id="r_a2f72611558fb7dcc7971e748058832d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d07/a47208.html#a2f72611558fb7dcc7971e748058832d8">write32</a> (uint8_t bus, uint8_t device, uint8_t function, uint8_t registerOffset, uint32_t value)</td></tr>
<tr class="memdesc:a2f72611558fb7dcc7971e748058832d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a 32-bit double word to the PCI configuration space.  <br /></td></tr>
<tr class="separator:a2f72611558fb7dcc7971e748058832d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bbd1027e1d181bb2eb280070e3d1831" id="r_a1bbd1027e1d181bb2eb280070e3d1831"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d07/a47208.html#a1bbd1027e1d181bb2eb280070e3d1831">write8</a> (uint8_t bus, uint8_t device, uint8_t function, uint8_t registerOffset, uint8_t value)</td></tr>
<tr class="memdesc:a1bbd1027e1d181bb2eb280070e3d1831"><td class="mdescLeft">&#160;</td><td class="mdescRight">Safely writes an 8-bit byte to the PCI configuration space.  <br /></td></tr>
<tr class="separator:a1bbd1027e1d181bb2eb280070e3d1831"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a99c80eb69bb5258a96fb3b9c61ce9dd3" id="r_a99c80eb69bb5258a96fb3b9c61ce9dd3"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d07/a47208.html#a99c80eb69bb5258a96fb3b9c61ce9dd3">getAddress</a> (uint8_t bus, uint8_t device, uint8_t function, uint8_t registerOffset)</td></tr>
<tr class="memdesc:a99c80eb69bb5258a96fb3b9c61ce9dd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper to construct the 32-bit CONFIG_ADDRESS.  <br /></td></tr>
<tr class="separator:a99c80eb69bb5258a96fb3b9c61ce9dd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ab6a9e1ba7e8934198624da046fc80bad" id="r_ab6a9e1ba7e8934198624da046fc80bad"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/df4/a47228.html">Port32Bit</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d07/a47208.html#ab6a9e1ba7e8934198624da046fc80bad">commandPort</a></td></tr>
<tr class="separator:ab6a9e1ba7e8934198624da046fc80bad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63cf29ae25d0a70ee448ac1e2896a041" id="r_a63cf29ae25d0a70ee448ac1e2896a041"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/df4/a47228.html">Port32Bit</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d07/a47208.html#a63cf29ae25d0a70ee448ac1e2896a041">dataPort</a></td></tr>
<tr class="separator:a63cf29ae25d0a70ee448ac1e2896a041"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Manages communication with the PCI bus via the x86 Configuration Space mechanism. </p>

<p class="definition">Definition at line <a class="el" href="../../db/d74/a46247_source.html#l00054">54</a> of file <a class="el" href="../../db/d74/a46247_source.html">kpci.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a71d89c22009309f0d354da5cbf359dc7" name="a71d89c22009309f0d354da5cbf359dc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71d89c22009309f0d354da5cbf359dc7">&#9670;&#160;</a></span>PCI_Controller()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PCI_Controller::PCI_Controller </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d2c/a46196_source.html#l00016">16</a> of file <a class="el" href="../../d2/d2c/a46196_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   16</span>: <a class="code hl_variable" href="../../dd/d07/a47208.html#a63cf29ae25d0a70ee448ac1e2896a041">dataPort</a>(0xCFC), <a class="code hl_variable" href="../../dd/d07/a47208.html#ab6a9e1ba7e8934198624da046fc80bad">commandPort</a>(0xCF8) {}</div>
<div class="ttc" id="aa47208_html_a63cf29ae25d0a70ee448ac1e2896a041"><div class="ttname"><a href="../../dd/d07/a47208.html#a63cf29ae25d0a70ee448ac1e2896a041">hardware_communication::PCI_Controller::dataPort</a></div><div class="ttdeci">Port32Bit dataPort</div><div class="ttdef"><b>Definition</b> <a href="../../db/d74/a46247_source.html#l00056">kpci.hpp:56</a></div></div>
<div class="ttc" id="aa47208_html_ab6a9e1ba7e8934198624da046fc80bad"><div class="ttname"><a href="../../dd/d07/a47208.html#ab6a9e1ba7e8934198624da046fc80bad">hardware_communication::PCI_Controller::commandPort</a></div><div class="ttdeci">Port32Bit commandPort</div><div class="ttdef"><b>Definition</b> <a href="../../db/d74/a46247_source.html#l00057">kpci.hpp:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3ee06d7487fe4ff999d2176786c2e743" name="a3ee06d7487fe4ff999d2176786c2e743"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ee06d7487fe4ff999d2176786c2e743">&#9670;&#160;</a></span>~PCI_Controller()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PCI_Controller::~PCI_Controller </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d2c/a46196_source.html#l00018">18</a> of file <a class="el" href="../../d2/d2c/a46196_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   18</span>{}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a54eaf77198f4b3816b9276f3d5be1661" name="a54eaf77198f4b3816b9276f3d5be1661"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54eaf77198f4b3816b9276f3d5be1661">&#9670;&#160;</a></span>deviceHasFunctions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PCI_Controller::deviceHasFunctions </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>device</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if a device is a multi-function device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>bus number. </td></tr>
    <tr><td class="paramname">device</td><td>device number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the device has multiple functions (bit 7 of Header Type is set), false otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d2c/a46196_source.html#l00087">87</a> of file <a class="el" href="../../d2/d2c/a46196_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   88</span>{</div>
<div class="line"><span class="lineno">   89</span>    <span class="keywordflow">return</span> (<a class="code hl_function" href="../../dd/d07/a47208.html#a6e21604894939edaafd1d5baae2840dd">read8</a>(bus, device, 0, 0x0E) &amp; 0x80);</div>
<div class="line"><span class="lineno">   90</span>}</div>
<div class="ttc" id="aa47208_html_a6e21604894939edaafd1d5baae2840dd"><div class="ttname"><a href="../../dd/d07/a47208.html#a6e21604894939edaafd1d5baae2840dd">hardware_communication::PCI_Controller::read8</a></div><div class="ttdeci">uint8_t read8(uint8_t bus, uint8_t device, uint8_t function, uint8_t registerOffset)</div><div class="ttdoc">Reads an 8-bit byte from the PCI configuration space.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d2c/a46196_source.html#l00047">kpci.cpp:47</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d2c/a46196_source.html#l00047">read8()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d2c/a46196_source.html#l00118">recursiveSelDriver()</a>, and <a class="el" href="../../d2/d2c/a46196_source.html#l00154">scanBus()</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_a54eaf77198f4b3816b9276f3d5be1661_cgraph.png" border="0" usemap="#add/d07/a47208_a54eaf77198f4b3816b9276f3d5be1661_cgraph" alt=""/></div>
<map name="add/d07/a47208_a54eaf77198f4b3816b9276f3d5be1661_cgraph" id="add/d07/a47208_a54eaf77198f4b3816b9276f3d5be1661_cgraph">
<area shape="rect" title="Checks if a device is a multi&#45;function device." alt="" coords="5,69,265,109"/>
<area shape="rect" href="../../dd/d07/a47208.html#a6e21604894939edaafd1d5baae2840dd" title="Reads an 8&#45;bit byte from the PCI configuration space." alt="" coords="313,69,504,109"/>
<area shape="poly" title=" " alt="" coords="266,87,300,87,300,92,266,92"/>
<area shape="rect" href="../../dd/d07/a47208.html#a8be9d213f644608726499edca159e1e4" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="552,69,743,109"/>
<area shape="poly" title=" " alt="" coords="504,87,538,87,538,92,504,92"/>
<area shape="rect" href="../../dd/d07/a47208.html#a99c80eb69bb5258a96fb3b9c61ce9dd3" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="791,5,993,45"/>
<area shape="poly" title=" " alt="" coords="724,67,801,46,803,51,725,72"/>
<area shape="rect" href="../../dc/df4/a47228.html#a742b40049c70bfda79a3031b85297948" title="Reads a 32&#45;bit value from the I/O port." alt="" coords="797,69,987,109"/>
<area shape="poly" title=" " alt="" coords="743,87,783,87,783,92,743,92"/>
<area shape="rect" href="../../dc/df4/a47228.html#ad13c0ec90a83f05b61c023dd8a1f53e8" title="Writes a 32&#45;bit value to the I/O port." alt="" coords="797,133,987,173"/>
<area shape="poly" title=" " alt="" coords="725,107,803,127,801,132,724,112"/>
</map>
</div>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_a54eaf77198f4b3816b9276f3d5be1661_icgraph.png" border="0" usemap="#add/d07/a47208_a54eaf77198f4b3816b9276f3d5be1661_icgraph" alt=""/></div>
<map name="add/d07/a47208_a54eaf77198f4b3816b9276f3d5be1661_icgraph" id="add/d07/a47208_a54eaf77198f4b3816b9276f3d5be1661_icgraph">
<area shape="rect" title="Checks if a device is a multi&#45;function device." alt="" coords="1200,85,1460,125"/>
<area shape="rect" href="../../dd/d07/a47208.html#a39f63594cdcdad7acc3860d6d339995e" title="Recursively scans the bus for devices and bridges, assigning drivers where possible." alt="" coords="941,29,1152,84"/>
<area shape="poly" title=" " alt="" coords="1198,85,1152,77,1153,72,1199,80"/>
<area shape="rect" href="../../dd/d07/a47208.html#a676c96d825ec578ff98c965c4b999aec" title="Scans a bus just for listing devices (does not instantiate drivers)." alt="" coords="951,133,1142,173"/>
<area shape="poly" title=" " alt="" coords="1198,130,1143,139,1142,134,1198,124"/>
<area shape="poly" title=" " alt="" coords="1085,18,1071,11,1047,8,1026,10,1013,15,1007,21,1007,29,1002,29,1002,19,1010,10,1025,5,1047,3,1073,6,1087,14"/>
<area shape="rect" href="../../dd/d07/a47208.html#a86f101dc2b53f938d5ac466c7ec33e2c" title="Starts the driver selection process from Bus 0." alt="" coords="476,41,692,81"/>
<area shape="poly" title=" " alt="" coords="927,60,692,62,692,57,927,55"/>
<area shape="rect" href="../../d2/d67/a46178.html#abb4e4866092116b520310d61961bfe12" title="Entrypoint for C++ code. we will call this function from assembly." alt="" coords="5,81,100,107"/>
<area shape="poly" title=" " alt="" coords="462,71,100,94,100,88,462,66"/>
<area shape="poly" title=" " alt="" coords="1086,121,1072,114,1047,111,1025,113,1011,118,1006,124,1009,132,1004,133,1001,123,1008,114,1023,108,1047,106,1073,109,1088,116"/>
<area shape="rect" href="../../d3/d76/a47120.html#a64cee1fd80a35d996188c0034ec26b64" title=" " alt="" coords="740,117,893,157"/>
<area shape="poly" title=" " alt="" coords="937,148,893,145,894,139,938,142"/>
<area shape="rect" href="../../d3/d76/a47120.html#a8aeac1a13eaf02ba12c6d086e804af53" title=" " alt="" coords="511,109,657,149"/>
<area shape="poly" title=" " alt="" coords="725,136,658,134,658,129,726,131"/>
<area shape="rect" href="../../d3/d76/a47120.html#a037a1007b9329e9067abbb3d8e0d128c" title="Called by the Main Thread. Processes keys with interrupts ENABLED." alt="" coords="280,109,428,135"/>
<area shape="poly" title=" " alt="" coords="496,129,428,127,428,121,496,123"/>
<area shape="rect" href="../../d2/d67/a46178.html#ac3a9df5d195991d85f6e1e9416082338" title="This is tail of kernelMain whose CPU state will be preserved." alt="" coords="148,107,232,132"/>
<area shape="poly" title=" " alt="" coords="266,123,232,123,232,117,266,118"/>
<area shape="poly" title=" " alt="" coords="134,112,100,105,101,100,135,107"/>
</map>
</div>

</div>
</div>
<a id="a99c80eb69bb5258a96fb3b9c61ce9dd3" name="a99c80eb69bb5258a96fb3b9c61ce9dd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99c80eb69bb5258a96fb3b9c61ce9dd3">&#9670;&#160;</a></span>getAddress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t PCI_Controller::getAddress </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>registerOffset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper to construct the 32-bit CONFIG_ADDRESS. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>bus number (0-255). </td></tr>
    <tr><td class="paramname">device</td><td>device number (0-31). </td></tr>
    <tr><td class="paramname">function</td><td>function number (0-7). </td></tr>
    <tr><td class="paramname">registerOffset</td><td>offset into the configuration space (must be 4-byte aligned). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A 32-bit integer formatted for port 0xCF8. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d2c/a46196_source.html#l00020">20</a> of file <a class="el" href="../../d2/d2c/a46196_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   21</span>{</div>
<div class="line"><span class="lineno">   22</span>    uint32_t lbus = (uint32_t)bus;</div>
<div class="line"><span class="lineno">   23</span>    uint32_t ldevice = (uint32_t)device;</div>
<div class="line"><span class="lineno">   24</span>    uint32_t lfunction = (uint32_t)function;</div>
<div class="line"><span class="lineno">   25</span> </div>
<div class="line"><span class="lineno">   26</span>    <span class="keywordflow">return</span> 0x80000000 </div>
<div class="line"><span class="lineno">   27</span>         | (lbus &lt;&lt; 16)</div>
<div class="line"><span class="lineno">   28</span>         | (ldevice &lt;&lt; 11)</div>
<div class="line"><span class="lineno">   29</span>         | (lfunction &lt;&lt; 8)</div>
<div class="line"><span class="lineno">   30</span>         | (registerOffset &amp; 0xFC);</div>
<div class="line"><span class="lineno">   31</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d2/d2c/a46196_source.html#l00033">read32()</a>, and <a class="el" href="../../d2/d2c/a46196_source.html#l00054">write32()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_a99c80eb69bb5258a96fb3b9c61ce9dd3_icgraph.png" border="0" usemap="#add/d07/a47208_a99c80eb69bb5258a96fb3b9c61ce9dd3_icgraph" alt=""/></div>
<map name="add/d07/a47208_a99c80eb69bb5258a96fb3b9c61ce9dd3_icgraph" id="add/d07/a47208_a99c80eb69bb5258a96fb3b9c61ce9dd3_icgraph">
<area shape="rect" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="1988,207,2191,247"/>
<area shape="rect" href="../../dd/d07/a47208.html#a8be9d213f644608726499edca159e1e4" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="1749,175,1940,215"/>
<area shape="poly" title=" " alt="" coords="1974,214,1940,210,1941,204,1975,209"/>
<area shape="rect" href="../../dd/d07/a47208.html#a2f72611558fb7dcc7971e748058832d8" title="Writes a 32&#45;bit double word to the PCI configuration space." alt="" coords="1749,239,1940,279"/>
<area shape="poly" title=" " alt="" coords="1975,244,1941,249,1940,244,1974,239"/>
<area shape="rect" href="../../dd/d07/a47208.html#a5e00e862f7af95887e09f3b90f7357fc" title="Decodes a raw BAR value into a BaseAddressRegister object." alt="" coords="1214,235,1449,290"/>
<area shape="poly" title=" " alt="" coords="1736,203,1627,211,1511,225,1444,238,1443,233,1510,220,1626,206,1735,197"/>
<area shape="rect" href="../../dd/d07/a47208.html#adf54e2d1841368c2f8b2d5989a2fa7b0" title="Reads the configuration header to create a descriptor object." alt="" coords="1200,5,1463,45"/>
<area shape="poly" title=" " alt="" coords="1804,169,1756,138,1700,110,1653,95,1587,79,1440,48,1441,43,1588,74,1654,90,1702,106,1758,134,1807,164"/>
<area shape="rect" href="../../dd/d07/a47208.html#abbe08b680f1d06bcd047cd0c8f215bfd" title="Reads a 16&#45;bit word from the PCI configuration space." alt="" coords="1511,5,1701,45"/>
<area shape="poly" title=" " alt="" coords="1815,167,1764,116,1700,66,1664,48,1667,43,1703,62,1768,112,1819,163"/>
<area shape="rect" href="../../dd/d07/a47208.html#a6e21604894939edaafd1d5baae2840dd" title="Reads an 8&#45;bit byte from the PCI configuration space." alt="" coords="1511,120,1701,160"/>
<area shape="poly" title=" " alt="" coords="1743,174,1693,163,1694,157,1744,169"/>
<area shape="rect" href="../../dd/d07/a47208.html#ac4466a0762483fd1c3ec5f2745a58386" title="Safely writes a 16&#45;bit word to the PCI configuration space." alt="" coords="1511,299,1701,339"/>
<area shape="poly" title=" " alt="" coords="1760,223,1751,229,1736,243,1728,258,1719,273,1703,289,1682,301,1679,296,1700,285,1715,270,1723,255,1732,240,1748,225,1757,219"/>
<area shape="rect" href="../../dd/d07/a47208.html#a1bbd1027e1d181bb2eb280070e3d1831" title="Safely writes an 8&#45;bit byte to the PCI configuration space." alt="" coords="1511,235,1701,275"/>
<area shape="poly" title=" " alt="" coords="1752,221,1687,237,1686,232,1750,216"/>
<area shape="rect" href="../../dd/d07/a47208.html#a39f63594cdcdad7acc3860d6d339995e" title="Recursively scans the bus for devices and bridges, assigning drivers where possible." alt="" coords="941,151,1152,206"/>
<area shape="poly" title=" " alt="" coords="1224,234,1139,209,1141,203,1226,229"/>
<area shape="poly" title=" " alt="" coords="1085,140,1071,133,1047,130,1026,132,1013,137,1007,143,1007,151,1002,151,1002,141,1010,132,1025,127,1047,125,1073,128,1087,136"/>
<area shape="rect" href="../../dd/d07/a47208.html#a86f101dc2b53f938d5ac466c7ec33e2c" title="Starts the driver selection process from Bus 0." alt="" coords="476,135,692,175"/>
<area shape="poly" title=" " alt="" coords="927,175,692,163,692,158,928,170"/>
<area shape="rect" href="../../d2/d67/a46178.html#abb4e4866092116b520310d61961bfe12" title="Entrypoint for C++ code. we will call this function from assembly." alt="" coords="5,110,100,135"/>
<area shape="poly" title=" " alt="" coords="462,150,100,128,100,123,462,145"/>
<area shape="poly" title=" " alt="" coords="1282,54,1100,153,1097,149,1280,50"/>
<area shape="rect" href="../../dd/d07/a47208.html#a676c96d825ec578ff98c965c4b999aec" title="Scans a bus just for listing devices (does not instantiate drivers)." alt="" coords="951,63,1142,103"/>
<area shape="poly" title=" " alt="" coords="1219,51,1143,66,1142,61,1217,45"/>
<area shape="poly" title=" " alt="" coords="1086,51,1072,44,1047,41,1025,43,1011,48,1006,54,1009,62,1004,63,1001,53,1008,44,1023,38,1047,36,1073,39,1088,46"/>
<area shape="rect" href="../../d3/d76/a47120.html#a64cee1fd80a35d996188c0034ec26b64" title=" " alt="" coords="740,65,893,105"/>
<area shape="poly" title=" " alt="" coords="937,87,893,87,893,82,937,81"/>
<area shape="rect" href="../../d3/d76/a47120.html#a8aeac1a13eaf02ba12c6d086e804af53" title=" " alt="" coords="511,67,657,107"/>
<area shape="poly" title=" " alt="" coords="726,89,658,89,658,84,726,83"/>
<area shape="rect" href="../../d3/d76/a47120.html#a037a1007b9329e9067abbb3d8e0d128c" title="Called by the Main Thread. Processes keys with interrupts ENABLED." alt="" coords="280,78,428,103"/>
<area shape="poly" title=" " alt="" coords="496,91,428,92,428,87,496,86"/>
<area shape="rect" href="../../d2/d67/a46178.html#ac3a9df5d195991d85f6e1e9416082338" title="This is tail of kernelMain whose CPU state will be preserved." alt="" coords="148,82,232,107"/>
<area shape="poly" title=" " alt="" coords="266,95,233,96,232,91,266,90"/>
<area shape="poly" title=" " alt="" coords="135,108,101,116,100,110,134,103"/>
<area shape="poly" title=" " alt="" coords="1497,28,1463,28,1463,23,1497,23"/>
<area shape="poly" title=" " alt="" coords="1537,168,1512,181,1488,200,1464,218,1422,238,1420,233,1461,214,1485,195,1509,176,1535,163"/>
<area shape="poly" title=" " alt="" coords="1516,166,1463,175,1382,182,1300,186,1152,186,1152,180,1300,180,1381,177,1462,169,1516,160"/>
<area shape="poly" title=" " alt="" coords="1535,117,1509,104,1485,84,1461,66,1416,48,1418,43,1464,62,1489,80,1512,99,1537,112"/>
<area shape="poly" title=" " alt="" coords="1513,120,1462,111,1293,94,1142,87,1142,81,1293,88,1463,105,1513,114"/>
<area shape="rect" href="../../dd/d07/a47208.html#a54eaf77198f4b3816b9276f3d5be1661" title="Checks if a device is a multi&#45;function device." alt="" coords="1201,120,1461,160"/>
<area shape="poly" title=" " alt="" coords="1497,143,1461,143,1461,137,1497,137"/>
<area shape="poly" title=" " alt="" coords="1188,162,1152,167,1152,162,1187,157"/>
<area shape="poly" title=" " alt="" coords="1217,120,1142,104,1143,99,1219,115"/>
<area shape="poly" title=" " alt="" coords="1752,285,1687,301,1686,296,1750,280"/>
<area shape="poly" title=" " alt="" coords="1735,260,1701,259,1702,254,1735,254"/>
</map>
</div>

</div>
</div>
<a id="a5e00e862f7af95887e09f3b90f7357fc" name="a5e00e862f7af95887e09f3b90f7357fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e00e862f7af95887e09f3b90f7357fc">&#9670;&#160;</a></span>getBaseAddressRegister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d9a/a46288.html#d9/d67/a47200">BaseAddressRegister</a> PCI_Controller::getBaseAddressRegister </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>bar</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decodes a raw BAR value into a <a class="el" href="../../d4/d9a/a46288.html#d9/d67/a47200" title="Represents a parsed Base Address Register (BAR) from a PCI device.">BaseAddressRegister</a> object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>bus number. </td></tr>
    <tr><td class="paramname">device</td><td>device number. </td></tr>
    <tr><td class="paramname">function</td><td>function number. </td></tr>
    <tr><td class="paramname">bar</td><td>index of the BAR to read (0-5). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="../../d4/d9a/a46288.html#d9/d67/a47200" title="Represents a parsed Base Address Register (BAR) from a PCI device.">BaseAddressRegister</a> struct with the decoded address and type. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d2c/a46196_source.html#l00218">218</a> of file <a class="el" href="../../d2/d2c/a46196_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  219</span>{</div>
<div class="line"><span class="lineno">  220</span>    <a class="code hl_class" href="../../d4/d9a/a46288.html#d9/d67/a47200">BaseAddressRegister</a> result;</div>
<div class="line"><span class="lineno">  221</span> </div>
<div class="line"><span class="lineno">  222</span>    uint32_t headertype = <a class="code hl_function" href="../../dd/d07/a47208.html#a6e21604894939edaafd1d5baae2840dd">read8</a>(bus, device, function, 0x0E) &amp; 0x7F;</div>
<div class="line"><span class="lineno">  223</span>    <span class="keywordtype">int</span> maxBARs = 6 - (4 * headertype);</div>
<div class="line"><span class="lineno">  224</span>    <span class="keywordflow">if</span>(bar &gt;= maxBARs) <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  225</span> </div>
<div class="line"><span class="lineno">  226</span>    uint32_t bar_value = <a class="code hl_function" href="../../dd/d07/a47208.html#a8be9d213f644608726499edca159e1e4">read32</a>(bus, device, function, 0x10 + (4 * bar));</div>
<div class="line"><span class="lineno">  227</span>    </div>
<div class="line"><span class="lineno">  228</span>    result.<a class="code hl_variable" href="../../d4/d9a/a46288.html#a1ed46e6ec12ae23a9d647ec0f659940a">type</a> = (bar_value &amp; 0x1) ? <a class="code hl_enumvalue" href="../../d4/d9a/a46288.html#ad38a4a4ac62c5165be6aad855b6dab82a85507086ea5f27de7d6c37f3305976d1">inputOutput</a> : <a class="code hl_enumvalue" href="../../d4/d9a/a46288.html#ad38a4a4ac62c5165be6aad855b6dab82aedac33a38f15a3d9168fc0067c65cd14">memoryMapping</a>;</div>
<div class="line"><span class="lineno">  229</span> </div>
<div class="line"><span class="lineno">  230</span>    <span class="keywordflow">if</span>(result.<a class="code hl_variable" href="../../d4/d9a/a46288.html#a1ed46e6ec12ae23a9d647ec0f659940a">type</a> == <a class="code hl_enumvalue" href="../../d4/d9a/a46288.html#ad38a4a4ac62c5165be6aad855b6dab82aedac33a38f15a3d9168fc0067c65cd14">memoryMapping</a>)</div>
<div class="line"><span class="lineno">  231</span>    {</div>
<div class="line"><span class="lineno">  232</span>        result.<a class="code hl_variable" href="../../d4/d9a/a46288.html#ab9e334c4ce84a03d60cea629ddd148b8">address</a> = (uint8_t*)(bar_value &amp; ~0xF);</div>
<div class="line"><span class="lineno">  233</span>        result.<a class="code hl_variable" href="../../d4/d9a/a46288.html#a0cef7240cfffa9f07d92dc14cf4d3ef9">prefetchable</a> = ((bar_value &amp; 0x8) != 0);</div>
<div class="line"><span class="lineno">  234</span>    }</div>
<div class="line"><span class="lineno">  235</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  236</span>    {</div>
<div class="line"><span class="lineno">  237</span>        result.<a class="code hl_variable" href="../../d4/d9a/a46288.html#ab9e334c4ce84a03d60cea629ddd148b8">address</a> = (uint8_t*)(bar_value &amp; ~0x3);</div>
<div class="line"><span class="lineno">  238</span>        result.<a class="code hl_variable" href="../../d4/d9a/a46288.html#a0cef7240cfffa9f07d92dc14cf4d3ef9">prefetchable</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  239</span>    }</div>
<div class="line"><span class="lineno">  240</span> </div>
<div class="line"><span class="lineno">  241</span>    <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  242</span>}</div>
<div class="ttc" id="aa46288_html_a0cef7240cfffa9f07d92dc14cf4d3ef9"><div class="ttname"><a href="../../d4/d9a/a46288.html#a0cef7240cfffa9f07d92dc14cf4d3ef9">hardware_communication::BaseAddressRegister::prefetchable</a></div><div class="ttdeci">bool prefetchable</div><div class="ttdef"><b>Definition</b> <a href="../../db/d74/a46247_source.html#l00020">kpci.hpp:20</a></div></div>
<div class="ttc" id="aa46288_html_a1ed46e6ec12ae23a9d647ec0f659940a"><div class="ttname"><a href="../../d4/d9a/a46288.html#a1ed46e6ec12ae23a9d647ec0f659940a">hardware_communication::BaseAddressRegister::type</a></div><div class="ttdeci">BaseAddressRegisterType type</div><div class="ttdef"><b>Definition</b> <a href="../../db/d74/a46247_source.html#l00023">kpci.hpp:23</a></div></div>
<div class="ttc" id="aa46288_html_ab9e334c4ce84a03d60cea629ddd148b8"><div class="ttname"><a href="../../d4/d9a/a46288.html#ab9e334c4ce84a03d60cea629ddd148b8">hardware_communication::BaseAddressRegister::address</a></div><div class="ttdeci">uint8_t * address</div><div class="ttdef"><b>Definition</b> <a href="../../db/d74/a46247_source.html#l00021">kpci.hpp:21</a></div></div>
<div class="ttc" id="aa46288_html_ad38a4a4ac62c5165be6aad855b6dab82a85507086ea5f27de7d6c37f3305976d1"><div class="ttname"><a href="../../d4/d9a/a46288.html#ad38a4a4ac62c5165be6aad855b6dab82a85507086ea5f27de7d6c37f3305976d1">hardware_communication::inputOutput</a></div><div class="ttdeci">@ inputOutput</div><div class="ttdef"><b>Definition</b> <a href="../../db/d74/a46247_source.html#l00015">kpci.hpp:14</a></div></div>
<div class="ttc" id="aa46288_html_ad38a4a4ac62c5165be6aad855b6dab82aedac33a38f15a3d9168fc0067c65cd14"><div class="ttname"><a href="../../d4/d9a/a46288.html#ad38a4a4ac62c5165be6aad855b6dab82aedac33a38f15a3d9168fc0067c65cd14">hardware_communication::memoryMapping</a></div><div class="ttdeci">@ memoryMapping</div><div class="ttdef"><b>Definition</b> <a href="../../db/d74/a46247_source.html#l00013">kpci.hpp:13</a></div></div>
<div class="ttc" id="aa46288_html_d9/d67/a47200"><div class="ttname"><a href="../../d4/d9a/a46288.html#d9/d67/a47200">hardware_communication::BaseAddressRegister</a></div><div class="ttdoc">Represents a parsed Base Address Register (BAR) from a PCI device.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d74/a46247_source.html#l00018">kpci.hpp:18</a></div></div>
<div class="ttc" id="aa47208_html_a8be9d213f644608726499edca159e1e4"><div class="ttname"><a href="../../dd/d07/a47208.html#a8be9d213f644608726499edca159e1e4">hardware_communication::PCI_Controller::read32</a></div><div class="ttdeci">uint32_t read32(uint8_t bus, uint8_t device, uint8_t function, uint8_t registerOffset)</div><div class="ttdoc">Reads a 32-bit double word from the PCI configuration space.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d2c/a46196_source.html#l00033">kpci.cpp:33</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d74/a46247_source.html#l00021">hardware_communication::BaseAddressRegister::address</a>, <a class="el" href="../../db/d74/a46247_source.html#l00014">hardware_communication::inputOutput</a>, <a class="el" href="../../db/d74/a46247_source.html#l00013">hardware_communication::memoryMapping</a>, <a class="el" href="../../db/d74/a46247_source.html#l00020">hardware_communication::BaseAddressRegister::prefetchable</a>, <a class="el" href="../../d2/d2c/a46196_source.html#l00033">read32()</a>, <a class="el" href="../../d2/d2c/a46196_source.html#l00047">read8()</a>, and <a class="el" href="../../db/d74/a46247_source.html#l00023">hardware_communication::BaseAddressRegister::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d2c/a46196_source.html#l00118">recursiveSelDriver()</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_a5e00e862f7af95887e09f3b90f7357fc_cgraph.png" border="0" usemap="#add/d07/a47208_a5e00e862f7af95887e09f3b90f7357fc_cgraph" alt=""/></div>
<map name="add/d07/a47208_a5e00e862f7af95887e09f3b90f7357fc_cgraph" id="add/d07/a47208_a5e00e862f7af95887e09f3b90f7357fc_cgraph">
<area shape="rect" title="Decodes a raw BAR value into a BaseAddressRegister object." alt="" coords="5,62,240,117"/>
<area shape="rect" href="../../dd/d07/a47208.html#a8be9d213f644608726499edca159e1e4" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="527,69,717,109"/>
<area shape="poly" title=" " alt="" coords="240,83,288,83,479,83,513,83,513,89,479,88,288,88,240,89"/>
<area shape="rect" href="../../dd/d07/a47208.html#a6e21604894939edaafd1d5baae2840dd" title="Reads an 8&#45;bit byte from the PCI configuration space." alt="" coords="288,97,479,137"/>
<area shape="poly" title=" " alt="" coords="240,99,274,103,274,108,240,105"/>
<area shape="rect" href="../../dd/d07/a47208.html#a99c80eb69bb5258a96fb3b9c61ce9dd3" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="765,5,968,45"/>
<area shape="poly" title=" " alt="" coords="699,67,776,46,777,51,700,72"/>
<area shape="rect" href="../../dc/df4/a47228.html#a742b40049c70bfda79a3031b85297948" title="Reads a 32&#45;bit value from the I/O port." alt="" coords="771,69,962,109"/>
<area shape="poly" title=" " alt="" coords="718,87,757,87,757,92,718,92"/>
<area shape="rect" href="../../dc/df4/a47228.html#ad13c0ec90a83f05b61c023dd8a1f53e8" title="Writes a 32&#45;bit value to the I/O port." alt="" coords="771,133,962,173"/>
<area shape="poly" title=" " alt="" coords="700,107,777,127,776,132,699,112"/>
<area shape="poly" title=" " alt="" coords="479,103,513,99,514,105,479,109"/>
</map>
</div>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_a5e00e862f7af95887e09f3b90f7357fc_icgraph.png" border="0" usemap="#add/d07/a47208_a5e00e862f7af95887e09f3b90f7357fc_icgraph" alt=""/></div>
<map name="add/d07/a47208_a5e00e862f7af95887e09f3b90f7357fc_icgraph" id="add/d07/a47208_a5e00e862f7af95887e09f3b90f7357fc_icgraph">
<area shape="rect" title="Decodes a raw BAR value into a BaseAddressRegister object." alt="" coords="671,29,905,84"/>
<area shape="rect" href="../../dd/d07/a47208.html#a39f63594cdcdad7acc3860d6d339995e" title="Recursively scans the bus for devices and bridges, assigning drivers where possible." alt="" coords="412,29,623,84"/>
<area shape="poly" title=" " alt="" coords="657,59,623,59,623,54,657,54"/>
<area shape="poly" title=" " alt="" coords="561,18,545,11,517,8,494,10,479,15,472,21,472,29,467,29,467,19,476,10,493,5,517,3,547,6,563,14"/>
<area shape="rect" href="../../dd/d07/a47208.html#a86f101dc2b53f938d5ac466c7ec33e2c" title="Starts the driver selection process from Bus 0." alt="" coords="148,37,364,77"/>
<area shape="poly" title=" " alt="" coords="399,59,364,59,364,54,399,54"/>
<area shape="rect" href="../../d2/d67/a46178.html#abb4e4866092116b520310d61961bfe12" title="Entrypoint for C++ code. we will call this function from assembly." alt="" coords="5,44,100,69"/>
<area shape="poly" title=" " alt="" coords="134,59,100,59,100,54,134,54"/>
</map>
</div>

</div>
</div>
<a id="adf54e2d1841368c2f8b2d5989a2fa7b0" name="adf54e2d1841368c2f8b2d5989a2fa7b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf54e2d1841368c2f8b2d5989a2fa7b0">&#9670;&#160;</a></span>getDeviceDescriptor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d27/a47204.html">PCI_DeviceDescriptor</a> PCI_Controller::getDeviceDescriptor </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>function</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the configuration header to create a descriptor object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>bus number. </td></tr>
    <tr><td class="paramname">device</td><td>device number. </td></tr>
    <tr><td class="paramname">function</td><td>function number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A populated <a class="el" href="../../dc/d27/a47204.html" title="A descriptor containing all essential information about a specific PCI device function.">PCI_DeviceDescriptor</a> object. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d2c/a46196_source.html#l00092">92</a> of file <a class="el" href="../../d2/d2c/a46196_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   93</span>{</div>
<div class="line"><span class="lineno">   94</span>    <a class="code hl_class" href="../../dc/d27/a47204.html">PCI_DeviceDescriptor</a> result;</div>
<div class="line"><span class="lineno">   95</span>    result.<a class="code hl_variable" href="../../dc/d27/a47204.html#a604fdd0b445c8727be6c3f0f1a3683f4">bus</a> =        bus;</div>
<div class="line"><span class="lineno">   96</span>    result.<a class="code hl_variable" href="../../dc/d27/a47204.html#a0fabbff95539e5b1ed92a995f509da3a">device</a> =     device;</div>
<div class="line"><span class="lineno">   97</span>    result.<a class="code hl_variable" href="../../dc/d27/a47204.html#a6693e1484a8c125631ed61427c85b14e">function</a> =   function;</div>
<div class="line"><span class="lineno">   98</span> </div>
<div class="line"><span class="lineno">   99</span>    result.<a class="code hl_variable" href="../../dc/d27/a47204.html#aee5360551eec5a3b31638a0372fdda71">vendorId</a> =   <a class="code hl_function" href="../../dd/d07/a47208.html#abbe08b680f1d06bcd047cd0c8f215bfd">read16</a>(bus, device, function, 0x00);</div>
<div class="line"><span class="lineno">  100</span>    result.<a class="code hl_variable" href="../../dc/d27/a47204.html#afaf41d7a2a6080418e68115af06710b3">deviceId</a> =   <a class="code hl_function" href="../../dd/d07/a47208.html#abbe08b680f1d06bcd047cd0c8f215bfd">read16</a>(bus, device, function, 0x02);</div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>    result.<a class="code hl_variable" href="../../dc/d27/a47204.html#a47709787dd44be45e9b622dbea4c17f0">revision</a> =       <a class="code hl_function" href="../../dd/d07/a47208.html#a6e21604894939edaafd1d5baae2840dd">read8</a>(bus, device, function, 0x08);</div>
<div class="line"><span class="lineno">  103</span>    result.<a class="code hl_variable" href="../../dc/d27/a47204.html#a40aef755e64abb912c480142443461d7">interfaceId</a> =    <a class="code hl_function" href="../../dd/d07/a47208.html#a6e21604894939edaafd1d5baae2840dd">read8</a>(bus, device, function, 0x09);</div>
<div class="line"><span class="lineno">  104</span>    result.<a class="code hl_variable" href="../../dc/d27/a47204.html#aab6f4d0868ad0278d4094f49026b7cdb">subclassId</a> =     <a class="code hl_function" href="../../dd/d07/a47208.html#a6e21604894939edaafd1d5baae2840dd">read8</a>(bus, device, function, 0x0A);</div>
<div class="line"><span class="lineno">  105</span>    result.<a class="code hl_variable" href="../../dc/d27/a47204.html#ad622a6f55e45fd14250fcd10c42a3c97">classId</a> =        <a class="code hl_function" href="../../dd/d07/a47208.html#a6e21604894939edaafd1d5baae2840dd">read8</a>(bus, device, function, 0x0B);</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>    result.<a class="code hl_variable" href="../../dc/d27/a47204.html#a4b95645003dcb8c06e1646904e73a496">headerType</a> = <a class="code hl_function" href="../../dd/d07/a47208.html#a6e21604894939edaafd1d5baae2840dd">read8</a>(bus, device, function, 0x0E);</div>
<div class="line"><span class="lineno">  108</span>    </div>
<div class="line"><span class="lineno">  109</span>    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 6; i++){</div>
<div class="line"><span class="lineno">  110</span>        result.<a class="code hl_variable" href="../../dc/d27/a47204.html#a29a14a80fbb46d80c05a0fe6fcb6228d">bar</a>[i] = <a class="code hl_function" href="../../dd/d07/a47208.html#a8be9d213f644608726499edca159e1e4">read32</a>(bus, device, function, 0x10 + (i * 4));</div>
<div class="line"><span class="lineno">  111</span>    }</div>
<div class="line"><span class="lineno">  112</span>    </div>
<div class="line"><span class="lineno">  113</span>    result.<a class="code hl_variable" href="../../dc/d27/a47204.html#ad2b77550b237a1d9a4665601427da19f">interrupt</a> =  <a class="code hl_function" href="../../dd/d07/a47208.html#a6e21604894939edaafd1d5baae2840dd">read8</a>(bus, device, function, 0x3C);</div>
<div class="line"><span class="lineno">  114</span> </div>
<div class="line"><span class="lineno">  115</span>    <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  116</span>}</div>
<div class="ttc" id="aa47204_html"><div class="ttname"><a href="../../dc/d27/a47204.html">hardware_communication::PCI_DeviceDescriptor</a></div><div class="ttdoc">A descriptor containing all essential information about a specific PCI device function.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d74/a46247_source.html#l00027">kpci.hpp:27</a></div></div>
<div class="ttc" id="aa47204_html_a0fabbff95539e5b1ed92a995f509da3a"><div class="ttname"><a href="../../dc/d27/a47204.html#a0fabbff95539e5b1ed92a995f509da3a">hardware_communication::PCI_DeviceDescriptor::device</a></div><div class="ttdeci">uint8_t device</div><div class="ttdef"><b>Definition</b> <a href="../../db/d74/a46247_source.html#l00030">kpci.hpp:30</a></div></div>
<div class="ttc" id="aa47204_html_a29a14a80fbb46d80c05a0fe6fcb6228d"><div class="ttname"><a href="../../dc/d27/a47204.html#a29a14a80fbb46d80c05a0fe6fcb6228d">hardware_communication::PCI_DeviceDescriptor::bar</a></div><div class="ttdeci">uint32_t bar[6]</div><div class="ttdef"><b>Definition</b> <a href="../../db/d74/a46247_source.html#l00043">kpci.hpp:43</a></div></div>
<div class="ttc" id="aa47204_html_a40aef755e64abb912c480142443461d7"><div class="ttname"><a href="../../dc/d27/a47204.html#a40aef755e64abb912c480142443461d7">hardware_communication::PCI_DeviceDescriptor::interfaceId</a></div><div class="ttdeci">uint8_t interfaceId</div><div class="ttdef"><b>Definition</b> <a href="../../db/d74/a46247_source.html#l00037">kpci.hpp:37</a></div></div>
<div class="ttc" id="aa47204_html_a47709787dd44be45e9b622dbea4c17f0"><div class="ttname"><a href="../../dc/d27/a47204.html#a47709787dd44be45e9b622dbea4c17f0">hardware_communication::PCI_DeviceDescriptor::revision</a></div><div class="ttdeci">uint8_t revision</div><div class="ttdef"><b>Definition</b> <a href="../../db/d74/a46247_source.html#l00036">kpci.hpp:36</a></div></div>
<div class="ttc" id="aa47204_html_a4b95645003dcb8c06e1646904e73a496"><div class="ttname"><a href="../../dc/d27/a47204.html#a4b95645003dcb8c06e1646904e73a496">hardware_communication::PCI_DeviceDescriptor::headerType</a></div><div class="ttdeci">uint8_t headerType</div><div class="ttdef"><b>Definition</b> <a href="../../db/d74/a46247_source.html#l00041">kpci.hpp:41</a></div></div>
<div class="ttc" id="aa47204_html_a604fdd0b445c8727be6c3f0f1a3683f4"><div class="ttname"><a href="../../dc/d27/a47204.html#a604fdd0b445c8727be6c3f0f1a3683f4">hardware_communication::PCI_DeviceDescriptor::bus</a></div><div class="ttdeci">uint8_t bus</div><div class="ttdef"><b>Definition</b> <a href="../../db/d74/a46247_source.html#l00029">kpci.hpp:29</a></div></div>
<div class="ttc" id="aa47204_html_a6693e1484a8c125631ed61427c85b14e"><div class="ttname"><a href="../../dc/d27/a47204.html#a6693e1484a8c125631ed61427c85b14e">hardware_communication::PCI_DeviceDescriptor::function</a></div><div class="ttdeci">uint8_t function</div><div class="ttdef"><b>Definition</b> <a href="../../db/d74/a46247_source.html#l00031">kpci.hpp:31</a></div></div>
<div class="ttc" id="aa47204_html_aab6f4d0868ad0278d4094f49026b7cdb"><div class="ttname"><a href="../../dc/d27/a47204.html#aab6f4d0868ad0278d4094f49026b7cdb">hardware_communication::PCI_DeviceDescriptor::subclassId</a></div><div class="ttdeci">uint8_t subclassId</div><div class="ttdef"><b>Definition</b> <a href="../../db/d74/a46247_source.html#l00038">kpci.hpp:38</a></div></div>
<div class="ttc" id="aa47204_html_ad2b77550b237a1d9a4665601427da19f"><div class="ttname"><a href="../../dc/d27/a47204.html#ad2b77550b237a1d9a4665601427da19f">hardware_communication::PCI_DeviceDescriptor::interrupt</a></div><div class="ttdeci">uint8_t interrupt</div><div class="ttdef"><b>Definition</b> <a href="../../db/d74/a46247_source.html#l00045">kpci.hpp:45</a></div></div>
<div class="ttc" id="aa47204_html_ad622a6f55e45fd14250fcd10c42a3c97"><div class="ttname"><a href="../../dc/d27/a47204.html#ad622a6f55e45fd14250fcd10c42a3c97">hardware_communication::PCI_DeviceDescriptor::classId</a></div><div class="ttdeci">uint8_t classId</div><div class="ttdef"><b>Definition</b> <a href="../../db/d74/a46247_source.html#l00039">kpci.hpp:39</a></div></div>
<div class="ttc" id="aa47204_html_aee5360551eec5a3b31638a0372fdda71"><div class="ttname"><a href="../../dc/d27/a47204.html#aee5360551eec5a3b31638a0372fdda71">hardware_communication::PCI_DeviceDescriptor::vendorId</a></div><div class="ttdeci">uint16_t vendorId</div><div class="ttdef"><b>Definition</b> <a href="../../db/d74/a46247_source.html#l00033">kpci.hpp:33</a></div></div>
<div class="ttc" id="aa47204_html_afaf41d7a2a6080418e68115af06710b3"><div class="ttname"><a href="../../dc/d27/a47204.html#afaf41d7a2a6080418e68115af06710b3">hardware_communication::PCI_DeviceDescriptor::deviceId</a></div><div class="ttdeci">uint16_t deviceId</div><div class="ttdef"><b>Definition</b> <a href="../../db/d74/a46247_source.html#l00034">kpci.hpp:34</a></div></div>
<div class="ttc" id="aa47208_html_abbe08b680f1d06bcd047cd0c8f215bfd"><div class="ttname"><a href="../../dd/d07/a47208.html#abbe08b680f1d06bcd047cd0c8f215bfd">hardware_communication::PCI_Controller::read16</a></div><div class="ttdeci">uint16_t read16(uint8_t bus, uint8_t device, uint8_t function, uint8_t registerOffset)</div><div class="ttdoc">Reads a 16-bit word from the PCI configuration space.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d2c/a46196_source.html#l00040">kpci.cpp:40</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d74/a46247_source.html#l00043">hardware_communication::PCI_DeviceDescriptor::bar</a>, <a class="el" href="../../db/d74/a46247_source.html#l00029">hardware_communication::PCI_DeviceDescriptor::bus</a>, <a class="el" href="../../db/d74/a46247_source.html#l00039">hardware_communication::PCI_DeviceDescriptor::classId</a>, <a class="el" href="../../db/d74/a46247_source.html#l00030">hardware_communication::PCI_DeviceDescriptor::device</a>, <a class="el" href="../../db/d74/a46247_source.html#l00034">hardware_communication::PCI_DeviceDescriptor::deviceId</a>, <a class="el" href="../../db/d74/a46247_source.html#l00031">hardware_communication::PCI_DeviceDescriptor::function</a>, <a class="el" href="../../db/d74/a46247_source.html#l00041">hardware_communication::PCI_DeviceDescriptor::headerType</a>, <a class="el" href="../../db/d74/a46247_source.html#l00037">hardware_communication::PCI_DeviceDescriptor::interfaceId</a>, <a class="el" href="../../db/d74/a46247_source.html#l00045">hardware_communication::PCI_DeviceDescriptor::interrupt</a>, <a class="el" href="../../d2/d2c/a46196_source.html#l00040">read16()</a>, <a class="el" href="../../d2/d2c/a46196_source.html#l00033">read32()</a>, <a class="el" href="../../d2/d2c/a46196_source.html#l00047">read8()</a>, <a class="el" href="../../db/d74/a46247_source.html#l00036">hardware_communication::PCI_DeviceDescriptor::revision</a>, <a class="el" href="../../db/d74/a46247_source.html#l00038">hardware_communication::PCI_DeviceDescriptor::subclassId</a>, and <a class="el" href="../../db/d74/a46247_source.html#l00033">hardware_communication::PCI_DeviceDescriptor::vendorId</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d2c/a46196_source.html#l00118">recursiveSelDriver()</a>, and <a class="el" href="../../d2/d2c/a46196_source.html#l00154">scanBus()</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_adf54e2d1841368c2f8b2d5989a2fa7b0_cgraph.png" border="0" usemap="#add/d07/a47208_adf54e2d1841368c2f8b2d5989a2fa7b0_cgraph" alt=""/></div>
<map name="add/d07/a47208_adf54e2d1841368c2f8b2d5989a2fa7b0_cgraph" id="add/d07/a47208_adf54e2d1841368c2f8b2d5989a2fa7b0_cgraph">
<area shape="rect" title="Reads the configuration header to create a descriptor object." alt="" coords="5,69,268,109"/>
<area shape="rect" href="../../dd/d07/a47208.html#abbe08b680f1d06bcd047cd0c8f215bfd" title="Reads a 16&#45;bit word from the PCI configuration space." alt="" coords="316,12,507,52"/>
<area shape="poly" title=" " alt="" coords="233,67,302,52,303,57,234,72"/>
<area shape="rect" href="../../dd/d07/a47208.html#a8be9d213f644608726499edca159e1e4" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="555,69,745,109"/>
<area shape="poly" title=" " alt="" coords="268,87,541,87,541,92,268,92"/>
<area shape="rect" href="../../dd/d07/a47208.html#a6e21604894939edaafd1d5baae2840dd" title="Reads an 8&#45;bit byte from the PCI configuration space." alt="" coords="316,127,507,167"/>
<area shape="poly" title=" " alt="" coords="234,107,303,121,302,127,233,112"/>
<area shape="poly" title=" " alt="" coords="496,49,554,64,552,69,495,55"/>
<area shape="rect" href="../../dd/d07/a47208.html#a99c80eb69bb5258a96fb3b9c61ce9dd3" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="793,5,996,45"/>
<area shape="poly" title=" " alt="" coords="727,67,804,46,805,51,728,72"/>
<area shape="rect" href="../../dc/df4/a47228.html#a742b40049c70bfda79a3031b85297948" title="Reads a 32&#45;bit value from the I/O port." alt="" coords="799,69,990,109"/>
<area shape="poly" title=" " alt="" coords="746,87,785,87,785,92,746,92"/>
<area shape="rect" href="../../dc/df4/a47228.html#ad13c0ec90a83f05b61c023dd8a1f53e8" title="Writes a 32&#45;bit value to the I/O port." alt="" coords="799,133,990,173"/>
<area shape="poly" title=" " alt="" coords="728,107,805,127,804,132,727,112"/>
<area shape="poly" title=" " alt="" coords="495,124,552,110,554,115,496,129"/>
</map>
</div>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_adf54e2d1841368c2f8b2d5989a2fa7b0_icgraph.png" border="0" usemap="#add/d07/a47208_adf54e2d1841368c2f8b2d5989a2fa7b0_icgraph" alt=""/></div>
<map name="add/d07/a47208_adf54e2d1841368c2f8b2d5989a2fa7b0_icgraph" id="add/d07/a47208_adf54e2d1841368c2f8b2d5989a2fa7b0_icgraph">
<area shape="rect" title="Reads the configuration header to create a descriptor object." alt="" coords="1200,85,1463,125"/>
<area shape="rect" href="../../dd/d07/a47208.html#a39f63594cdcdad7acc3860d6d339995e" title="Recursively scans the bus for devices and bridges, assigning drivers where possible." alt="" coords="941,29,1152,84"/>
<area shape="poly" title=" " alt="" coords="1199,85,1152,77,1153,72,1200,80"/>
<area shape="rect" href="../../dd/d07/a47208.html#a676c96d825ec578ff98c965c4b999aec" title="Scans a bus just for listing devices (does not instantiate drivers)." alt="" coords="951,133,1142,173"/>
<area shape="poly" title=" " alt="" coords="1200,130,1143,139,1142,134,1199,124"/>
<area shape="poly" title=" " alt="" coords="1085,18,1071,11,1047,8,1026,10,1013,15,1007,21,1007,29,1002,29,1002,19,1010,10,1025,5,1047,3,1073,6,1087,14"/>
<area shape="rect" href="../../dd/d07/a47208.html#a86f101dc2b53f938d5ac466c7ec33e2c" title="Starts the driver selection process from Bus 0." alt="" coords="476,41,692,81"/>
<area shape="poly" title=" " alt="" coords="927,60,692,62,692,57,927,55"/>
<area shape="rect" href="../../d2/d67/a46178.html#abb4e4866092116b520310d61961bfe12" title="Entrypoint for C++ code. we will call this function from assembly." alt="" coords="5,81,100,107"/>
<area shape="poly" title=" " alt="" coords="462,71,100,94,100,88,462,66"/>
<area shape="poly" title=" " alt="" coords="1086,121,1072,114,1047,111,1025,113,1011,118,1006,124,1009,132,1004,133,1001,123,1008,114,1023,108,1047,106,1073,109,1088,116"/>
<area shape="rect" href="../../d3/d76/a47120.html#a64cee1fd80a35d996188c0034ec26b64" title=" " alt="" coords="740,117,893,157"/>
<area shape="poly" title=" " alt="" coords="937,148,893,145,894,139,938,142"/>
<area shape="rect" href="../../d3/d76/a47120.html#a8aeac1a13eaf02ba12c6d086e804af53" title=" " alt="" coords="511,109,657,149"/>
<area shape="poly" title=" " alt="" coords="725,136,658,134,658,129,726,131"/>
<area shape="rect" href="../../d3/d76/a47120.html#a037a1007b9329e9067abbb3d8e0d128c" title="Called by the Main Thread. Processes keys with interrupts ENABLED." alt="" coords="280,109,428,135"/>
<area shape="poly" title=" " alt="" coords="496,129,428,127,428,121,496,123"/>
<area shape="rect" href="../../d2/d67/a46178.html#ac3a9df5d195991d85f6e1e9416082338" title="This is tail of kernelMain whose CPU state will be preserved." alt="" coords="148,107,232,132"/>
<area shape="poly" title=" " alt="" coords="266,123,232,123,232,117,266,118"/>
<area shape="poly" title=" " alt="" coords="134,112,100,105,101,100,135,107"/>
</map>
</div>

</div>
</div>
<a id="a0a5c1a26be6003b1ef1478fdc7ae2466" name="a0a5c1a26be6003b1ef1478fdc7ae2466"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a5c1a26be6003b1ef1478fdc7ae2466">&#9670;&#160;</a></span>getDriver()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/da8/a47124.html">driver::Driver</a> * PCI_Controller::getDriver </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d27/a47204.html">PCI_DeviceDescriptor</a>&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d83/a47196.html">hardware_communication::InterruptManager</a> *&#160;</td>
          <td class="paramname"><em>interrupt_manager</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Factory method that instantiates the correct driver for a given device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>device descriptor containing VendorID and DeviceID. </td></tr>
    <tr><td class="paramname">interrupt_manager</td><td>interrupt manager to pass to the driver. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the new driver instance, or 0 if no driver is found. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d2c/a46196_source.html#l00244">244</a> of file <a class="el" href="../../d2/d2c/a46196_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  245</span>{</div>
<div class="line"><span class="lineno">  246</span>    (void) interrupt_manager;</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>    <a class="code hl_class" href="../../d4/da8/a47124.html">driver::Driver</a>* <a class="code hl_namespace" href="../../dd/d38/a46287.html">driver</a> = 0;</div>
<div class="line"><span class="lineno">  249</span>    <span class="keywordflow">return</span> <a class="code hl_namespace" href="../../dd/d38/a46287.html">driver</a>; </div>
<div class="line"><span class="lineno">  250</span>    <span class="keywordflow">switch</span>(dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#aee5360551eec5a3b31638a0372fdda71">vendorId</a>)</div>
<div class="line"><span class="lineno">  251</span>    {</div>
<div class="line"><span class="lineno">  252</span>        <span class="keywordflow">case</span> 0x1022: <span class="comment">// AMD</span></div>
<div class="line"><span class="lineno">  253</span>            <span class="keywordflow">switch</span>(dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#afaf41d7a2a6080418e68115af06710b3">deviceId</a>)</div>
<div class="line"><span class="lineno">  254</span>            {</div>
<div class="line"><span class="lineno">  255</span>                <span class="keywordflow">case</span> 0x2000:</div>
<div class="line"><span class="lineno">  256</span>                    <a class="code hl_function" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;AMD am79c973 &quot;</span>);</div>
<div class="line"><span class="lineno">  257</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  258</span>            }</div>
<div class="line"><span class="lineno">  259</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  260</span> </div>
<div class="line"><span class="lineno">  261</span>        <span class="keywordflow">case</span> 0x8086: <span class="comment">// Intel</span></div>
<div class="line"><span class="lineno">  262</span>            <span class="keywordflow">switch</span>(dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#afaf41d7a2a6080418e68115af06710b3">deviceId</a>)</div>
<div class="line"><span class="lineno">  263</span>            {</div>
<div class="line"><span class="lineno">  264</span>                <span class="keywordflow">case</span> 0x1237: <a class="code hl_function" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;Intel 440FX Host Bridge &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  265</span>                <span class="keywordflow">case</span> 0x7000: <a class="code hl_function" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;Intel PIIX3 ISA Bridge &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  266</span>                <span class="keywordflow">case</span> 0x7010: <a class="code hl_function" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;Intel PIIX3 IDE Controller &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  267</span>                <span class="keywordflow">case</span> 0x7113: <a class="code hl_function" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;Intel PIIX4 ACPI &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  268</span>                <span class="keywordflow">case</span> 0x100E: <a class="code hl_function" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;Intel E1000 Ethernet &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  269</span>            }</div>
<div class="line"><span class="lineno">  270</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  271</span>            </div>
<div class="line"><span class="lineno">  272</span>        <span class="keywordflow">case</span> 0x1234:</div>
<div class="line"><span class="lineno">  273</span>            <span class="keywordflow">switch</span>(dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#afaf41d7a2a6080418e68115af06710b3">deviceId</a>)</div>
<div class="line"><span class="lineno">  274</span>            {</div>
<div class="line"><span class="lineno">  275</span>                <span class="keywordflow">case</span> 0x1111: <a class="code hl_function" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;QEMU VGA Graphics &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  276</span>            }</div>
<div class="line"><span class="lineno">  277</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  278</span>    }</div>
<div class="line"><span class="lineno">  279</span>    <a class="code hl_function" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;| &quot;</span>);</div>
<div class="line"><span class="lineno">  280</span>    </div>
<div class="line"><span class="lineno">  281</span>    <span class="keywordflow">switch</span>(dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#ad622a6f55e45fd14250fcd10c42a3c97">classId</a>)</div>
<div class="line"><span class="lineno">  282</span>    {</div>
<div class="line"><span class="lineno">  283</span>        <span class="keywordflow">case</span> 0x03:</div>
<div class="line"><span class="lineno">  284</span>            <span class="keywordflow">if</span>(dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#aab6f4d0868ad0278d4094f49026b7cdb">subclassId</a> == 0x00) <a class="code hl_function" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;Generic VGA &quot;</span>);</div>
<div class="line"><span class="lineno">  285</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  286</span>        <span class="keywordflow">case</span> 0x02:</div>
<div class="line"><span class="lineno">  287</span>            <a class="code hl_function" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;Generic Network Card &quot;</span>);</div>
<div class="line"><span class="lineno">  288</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  289</span>    }</div>
<div class="line"><span class="lineno">  290</span> </div>
<div class="line"><span class="lineno">  291</span>    <a class="code hl_function" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;|\n---\n&quot;</span>);</div>
<div class="line"><span class="lineno">  292</span>    <span class="keywordflow">return</span> <a class="code hl_namespace" href="../../dd/d38/a46287.html">driver</a>;</div>
<div class="line"><span class="lineno">  293</span>}</div>
<div class="ttc" id="aa46284_html_a45ee52b918a784ff0e96e7c8917a91d9"><div class="ttname"><a href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a></div><div class="ttdeci">int printf(const char *format,...)</div><div class="ttdoc">A custom implementation of the standard printf function for writing to both VGA text mode memory and ...</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dbc/a46190_source.html#l00237">kiostream.cpp:237</a></div></div>
<div class="ttc" id="aa46287_html"><div class="ttname"><a href="../../dd/d38/a46287.html">driver</a></div><div class="ttdef"><b>Definition</b> <a href="../../d8/d74/a46268_source.html#l00006">kdriver.hpp:7</a></div></div>
<div class="ttc" id="aa47124_html"><div class="ttname"><a href="../../d4/da8/a47124.html">driver::Driver</a></div><div class="ttdoc">Base class (interface) for all hardware drivers in the operating system.</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d74/a46268_source.html#l00009">kdriver.hpp:9</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d74/a46247_source.html#l00039">hardware_communication::PCI_DeviceDescriptor::classId</a>, <a class="el" href="../../db/d74/a46247_source.html#l00034">hardware_communication::PCI_DeviceDescriptor::deviceId</a>, <a class="el" href="../../d1/dbc/a46190_source.html#l00237">basic::printf()</a>, <a class="el" href="../../db/d74/a46247_source.html#l00038">hardware_communication::PCI_DeviceDescriptor::subclassId</a>, and <a class="el" href="../../db/d74/a46247_source.html#l00033">hardware_communication::PCI_DeviceDescriptor::vendorId</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d2c/a46196_source.html#l00118">recursiveSelDriver()</a>.</p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_a0a5c1a26be6003b1ef1478fdc7ae2466_cgraph.png" border="0" usemap="#add/d07/a47208_a0a5c1a26be6003b1ef1478fdc7ae2466_cgraph" alt=""/></div>
<map name="add/d07/a47208_a0a5c1a26be6003b1ef1478fdc7ae2466_cgraph" id="add/d07/a47208_a0a5c1a26be6003b1ef1478fdc7ae2466_cgraph">
<area shape="rect" title="Factory method that instantiates the correct driver for a given device." alt="" coords="5,99,196,139"/>
<area shape="rect" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9" title="A custom implementation of the standard printf function for writing to both VGA text mode memory and ..." alt="" coords="244,107,343,132"/>
<area shape="poly" title=" " alt="" coords="196,117,230,117,230,122,196,122"/>
<area shape="rect" href="../../df/db2/a46284.html#aeacdadb7f1bb76f1452689d0e5cd4dad" title=" " alt="" coords="391,5,551,31"/>
<area shape="poly" title=" " alt="" coords="309,104,344,77,389,48,419,33,422,38,392,52,348,81,312,108"/>
<area shape="rect" href="../../df/db2/a46284.html#a84a72638a4a04f5706b7f9b217359ecf" title=" " alt="" coords="628,56,760,81"/>
<area shape="poly" title=" " alt="" coords="336,104,390,91,507,76,614,69,614,74,508,82,391,97,337,109"/>
<area shape="rect" href="../../df/db2/a46284.html#a3d0041ad59dbbae5bc9adbb8ab784499" title=" " alt="" coords="623,135,765,160"/>
<area shape="poly" title=" " alt="" coords="337,129,391,141,504,149,609,149,609,154,504,154,390,146,336,135"/>
<area shape="rect" href="../../df/db2/a46284.html#a5ecbf4c8112c602ba65a689ebe5014f8" title=" " alt="" coords="411,107,531,132"/>
<area shape="poly" title=" " alt="" coords="343,117,396,117,396,122,343,122"/>
<area shape="rect" href="../../df/db2/a46284.html#a9d1f0f838e646660db6d9284725c2b4c" title="Updates the position of the text mode cursor." alt="" coords="393,208,549,233"/>
<area shape="poly" title=" " alt="" coords="312,130,348,158,392,186,422,200,419,205,389,191,344,162,309,134"/>
<area shape="rect" href="../../df/db2/a46284.html#aa7de4c6aa018e049aa8992b037cc052a" title=" " alt="" coords="642,5,746,31"/>
<area shape="poly" title=" " alt="" coords="551,15,628,15,628,21,551,21"/>
<area shape="poly" title=" " alt="" coords="528,28,625,50,623,56,527,33"/>
<area shape="rect" href="../../df/db2/a46284.html#a6cfc2f6949fb98dfc419f9fd19f95982" title=" " alt="" coords="860,56,973,81"/>
<area shape="poly" title=" " alt="" coords="760,66,846,66,846,71,760,71"/>
<area shape="rect" href="../../d4/d91/a47144.html#adfb4220d2c664ae5ba11e04d9d182f70" title="Calculates the video memory value for the mouse cursor block." alt="" coords="837,120,996,175"/>
<area shape="poly" title=" " alt="" coords="766,145,823,145,823,150,766,150"/>
<area shape="poly" title=" " alt="" coords="527,104,623,82,625,87,528,109"/>
<area shape="poly" title=" " alt="" coords="531,124,609,134,609,139,531,129"/>
<area shape="rect" href="../../de/db0/a47216.html#a6ede8fba6ba7e26c5982a91a3d5ffa72" title="Writes an 8&#45;bit value to the I/O port." alt="" coords="599,201,789,241"/>
<area shape="poly" title=" " alt="" coords="549,218,585,218,585,223,549,223"/>
</map>
</div>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_a0a5c1a26be6003b1ef1478fdc7ae2466_icgraph.png" border="0" usemap="#add/d07/a47208_a0a5c1a26be6003b1ef1478fdc7ae2466_icgraph" alt=""/></div>
<map name="add/d07/a47208_a0a5c1a26be6003b1ef1478fdc7ae2466_icgraph" id="add/d07/a47208_a0a5c1a26be6003b1ef1478fdc7ae2466_icgraph">
<area shape="rect" title="Factory method that instantiates the correct driver for a given device." alt="" coords="671,37,861,77"/>
<area shape="rect" href="../../dd/d07/a47208.html#a39f63594cdcdad7acc3860d6d339995e" title="Recursively scans the bus for devices and bridges, assigning drivers where possible." alt="" coords="412,29,623,84"/>
<area shape="poly" title=" " alt="" coords="657,59,623,59,623,54,657,54"/>
<area shape="poly" title=" " alt="" coords="559,18,544,11,517,8,495,10,481,15,474,21,474,29,469,29,469,19,478,10,494,5,517,3,545,6,561,14"/>
<area shape="rect" href="../../dd/d07/a47208.html#a86f101dc2b53f938d5ac466c7ec33e2c" title="Starts the driver selection process from Bus 0." alt="" coords="148,37,364,77"/>
<area shape="poly" title=" " alt="" coords="399,59,364,59,364,54,399,54"/>
<area shape="rect" href="../../d2/d67/a46178.html#abb4e4866092116b520310d61961bfe12" title="Entrypoint for C++ code. we will call this function from assembly." alt="" coords="5,44,100,69"/>
<area shape="poly" title=" " alt="" coords="134,59,100,59,100,54,134,54"/>
</map>
</div>

</div>
</div>
<a id="abbe08b680f1d06bcd047cd0c8f215bfd" name="abbe08b680f1d06bcd047cd0c8f215bfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbe08b680f1d06bcd047cd0c8f215bfd">&#9670;&#160;</a></span>read16()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t PCI_Controller::read16 </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>registerOffset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads a 16-bit word from the PCI configuration space. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>bus number. </td></tr>
    <tr><td class="paramname">device</td><td>device number. </td></tr>
    <tr><td class="paramname">function</td><td>function number. </td></tr>
    <tr><td class="paramname">registerOffset</td><td>offset. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>16-bit value. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d2c/a46196_source.html#l00040">40</a> of file <a class="el" href="../../d2/d2c/a46196_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   41</span>{</div>
<div class="line"><span class="lineno">   42</span>    uint32_t dword = <a class="code hl_function" href="../../dd/d07/a47208.html#a8be9d213f644608726499edca159e1e4">read32</a>(bus, device, function, registerOffset);</div>
<div class="line"><span class="lineno">   43</span>    uint32_t shift = (8 * (registerOffset % 4));</div>
<div class="line"><span class="lineno">   44</span>    <span class="keywordflow">return</span> (uint16_t)(dword &gt;&gt; shift);</div>
<div class="line"><span class="lineno">   45</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d2c/a46196_source.html#l00033">read32()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d2c/a46196_source.html#l00092">getDeviceDescriptor()</a>.</p>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_abbe08b680f1d06bcd047cd0c8f215bfd_cgraph.png" border="0" usemap="#add/d07/a47208_abbe08b680f1d06bcd047cd0c8f215bfd_cgraph" alt=""/></div>
<map name="add/d07/a47208_abbe08b680f1d06bcd047cd0c8f215bfd_cgraph" id="add/d07/a47208_abbe08b680f1d06bcd047cd0c8f215bfd_cgraph">
<area shape="rect" title="Reads a 16&#45;bit word from the PCI configuration space." alt="" coords="5,69,196,109"/>
<area shape="rect" href="../../dd/d07/a47208.html#a8be9d213f644608726499edca159e1e4" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="244,69,435,109"/>
<area shape="poly" title=" " alt="" coords="196,87,230,87,230,92,196,92"/>
<area shape="rect" href="../../dd/d07/a47208.html#a99c80eb69bb5258a96fb3b9c61ce9dd3" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="483,5,685,45"/>
<area shape="poly" title=" " alt="" coords="416,67,493,46,495,51,417,72"/>
<area shape="rect" href="../../dc/df4/a47228.html#a742b40049c70bfda79a3031b85297948" title="Reads a 32&#45;bit value from the I/O port." alt="" coords="489,69,679,109"/>
<area shape="poly" title=" " alt="" coords="435,87,475,87,475,92,435,92"/>
<area shape="rect" href="../../dc/df4/a47228.html#ad13c0ec90a83f05b61c023dd8a1f53e8" title="Writes a 32&#45;bit value to the I/O port." alt="" coords="489,133,679,173"/>
<area shape="poly" title=" " alt="" coords="417,107,495,127,493,132,416,112"/>
</map>
</div>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_abbe08b680f1d06bcd047cd0c8f215bfd_icgraph.png" border="0" usemap="#add/d07/a47208_abbe08b680f1d06bcd047cd0c8f215bfd_icgraph" alt=""/></div>
<map name="add/d07/a47208_abbe08b680f1d06bcd047cd0c8f215bfd_icgraph" id="add/d07/a47208_abbe08b680f1d06bcd047cd0c8f215bfd_icgraph">
<area shape="rect" title="Reads a 16&#45;bit word from the PCI configuration space." alt="" coords="1511,85,1701,125"/>
<area shape="rect" href="../../dd/d07/a47208.html#adf54e2d1841368c2f8b2d5989a2fa7b0" title="Reads the configuration header to create a descriptor object." alt="" coords="1200,85,1463,125"/>
<area shape="poly" title=" " alt="" coords="1497,107,1463,107,1463,102,1497,102"/>
<area shape="rect" href="../../dd/d07/a47208.html#a39f63594cdcdad7acc3860d6d339995e" title="Recursively scans the bus for devices and bridges, assigning drivers where possible." alt="" coords="941,29,1152,84"/>
<area shape="poly" title=" " alt="" coords="1199,85,1152,77,1153,72,1200,80"/>
<area shape="rect" href="../../dd/d07/a47208.html#a676c96d825ec578ff98c965c4b999aec" title="Scans a bus just for listing devices (does not instantiate drivers)." alt="" coords="951,133,1142,173"/>
<area shape="poly" title=" " alt="" coords="1200,130,1143,139,1142,134,1199,124"/>
<area shape="poly" title=" " alt="" coords="1085,18,1071,11,1047,8,1026,10,1013,15,1007,21,1007,29,1002,29,1002,19,1010,10,1025,5,1047,3,1073,6,1087,14"/>
<area shape="rect" href="../../dd/d07/a47208.html#a86f101dc2b53f938d5ac466c7ec33e2c" title="Starts the driver selection process from Bus 0." alt="" coords="476,41,692,81"/>
<area shape="poly" title=" " alt="" coords="927,60,692,62,692,57,927,55"/>
<area shape="rect" href="../../d2/d67/a46178.html#abb4e4866092116b520310d61961bfe12" title="Entrypoint for C++ code. we will call this function from assembly." alt="" coords="5,81,100,107"/>
<area shape="poly" title=" " alt="" coords="462,71,100,94,100,88,462,66"/>
<area shape="poly" title=" " alt="" coords="1086,121,1072,114,1047,111,1025,113,1011,118,1006,124,1009,132,1004,133,1001,123,1008,114,1023,108,1047,106,1073,109,1088,116"/>
<area shape="rect" href="../../d3/d76/a47120.html#a64cee1fd80a35d996188c0034ec26b64" title=" " alt="" coords="740,117,893,157"/>
<area shape="poly" title=" " alt="" coords="937,148,893,145,894,139,938,142"/>
<area shape="rect" href="../../d3/d76/a47120.html#a8aeac1a13eaf02ba12c6d086e804af53" title=" " alt="" coords="511,109,657,149"/>
<area shape="poly" title=" " alt="" coords="725,136,658,134,658,129,726,131"/>
<area shape="rect" href="../../d3/d76/a47120.html#a037a1007b9329e9067abbb3d8e0d128c" title="Called by the Main Thread. Processes keys with interrupts ENABLED." alt="" coords="280,109,428,135"/>
<area shape="poly" title=" " alt="" coords="496,129,428,127,428,121,496,123"/>
<area shape="rect" href="../../d2/d67/a46178.html#ac3a9df5d195991d85f6e1e9416082338" title="This is tail of kernelMain whose CPU state will be preserved." alt="" coords="148,107,232,132"/>
<area shape="poly" title=" " alt="" coords="266,123,232,123,232,117,266,118"/>
<area shape="poly" title=" " alt="" coords="134,112,100,105,101,100,135,107"/>
</map>
</div>

</div>
</div>
<a id="a8be9d213f644608726499edca159e1e4" name="a8be9d213f644608726499edca159e1e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8be9d213f644608726499edca159e1e4">&#9670;&#160;</a></span>read32()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t PCI_Controller::read32 </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>registerOffset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads a 32-bit double word from the PCI configuration space. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>bus number. </td></tr>
    <tr><td class="paramname">device</td><td>device number. </td></tr>
    <tr><td class="paramname">function</td><td>function number. </td></tr>
    <tr><td class="paramname">registerOffset</td><td>offset (will be aligned automatically). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>32-bit value at the register. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d2c/a46196_source.html#l00033">33</a> of file <a class="el" href="../../d2/d2c/a46196_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   34</span>{</div>
<div class="line"><span class="lineno">   35</span>    uint32_t address = <a class="code hl_function" href="../../dd/d07/a47208.html#a99c80eb69bb5258a96fb3b9c61ce9dd3">getAddress</a>(bus, device, function, registerOffset);</div>
<div class="line"><span class="lineno">   36</span>    <a class="code hl_variable" href="../../dd/d07/a47208.html#ab6a9e1ba7e8934198624da046fc80bad">commandPort</a>.<a class="code hl_function" href="../../dc/df4/a47228.html#ad13c0ec90a83f05b61c023dd8a1f53e8">write</a>(address);</div>
<div class="line"><span class="lineno">   37</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="../../dd/d07/a47208.html#a63cf29ae25d0a70ee448ac1e2896a041">dataPort</a>.<a class="code hl_function" href="../../dc/df4/a47228.html#a742b40049c70bfda79a3031b85297948">read</a>();</div>
<div class="line"><span class="lineno">   38</span>}</div>
<div class="ttc" id="aa47208_html_a99c80eb69bb5258a96fb3b9c61ce9dd3"><div class="ttname"><a href="../../dd/d07/a47208.html#a99c80eb69bb5258a96fb3b9c61ce9dd3">hardware_communication::PCI_Controller::getAddress</a></div><div class="ttdeci">uint32_t getAddress(uint8_t bus, uint8_t device, uint8_t function, uint8_t registerOffset)</div><div class="ttdoc">Helper to construct the 32-bit CONFIG_ADDRESS.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d2c/a46196_source.html#l00020">kpci.cpp:20</a></div></div>
<div class="ttc" id="aa47228_html_a742b40049c70bfda79a3031b85297948"><div class="ttname"><a href="../../dc/df4/a47228.html#a742b40049c70bfda79a3031b85297948">hardware_communication::Port32Bit::read</a></div><div class="ttdeci">uint32_t read()</div><div class="ttdoc">Reads a 32-bit value from the I/O port.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/da9/a46199_source.html#l00062">kport.cpp:62</a></div></div>
<div class="ttc" id="aa47228_html_ad13c0ec90a83f05b61c023dd8a1f53e8"><div class="ttname"><a href="../../dc/df4/a47228.html#ad13c0ec90a83f05b61c023dd8a1f53e8">hardware_communication::Port32Bit::write</a></div><div class="ttdeci">void write(uint32_t data)</div><div class="ttdoc">Writes a 32-bit value to the I/O port.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/da9/a46199_source.html#l00057">kport.cpp:57</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d74/a46247_source.html#l00057">commandPort</a>, <a class="el" href="../../db/d74/a46247_source.html#l00056">dataPort</a>, <a class="el" href="../../d2/d2c/a46196_source.html#l00020">getAddress()</a>, <a class="el" href="../../d5/da9/a46199_source.html#l00062">hardware_communication::Port32Bit::read()</a>, and <a class="el" href="../../d5/da9/a46199_source.html#l00057">hardware_communication::Port32Bit::write()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d2c/a46196_source.html#l00218">getBaseAddressRegister()</a>, <a class="el" href="../../d2/d2c/a46196_source.html#l00092">getDeviceDescriptor()</a>, <a class="el" href="../../d2/d2c/a46196_source.html#l00040">read16()</a>, <a class="el" href="../../d2/d2c/a46196_source.html#l00047">read8()</a>, <a class="el" href="../../d2/d2c/a46196_source.html#l00061">write16()</a>, and <a class="el" href="../../d2/d2c/a46196_source.html#l00074">write8()</a>.</p>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_a8be9d213f644608726499edca159e1e4_cgraph.png" border="0" usemap="#add/d07/a47208_a8be9d213f644608726499edca159e1e4_cgraph" alt=""/></div>
<map name="add/d07/a47208_a8be9d213f644608726499edca159e1e4_cgraph" id="add/d07/a47208_a8be9d213f644608726499edca159e1e4_cgraph">
<area shape="rect" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="5,69,196,109"/>
<area shape="rect" href="../../dd/d07/a47208.html#a99c80eb69bb5258a96fb3b9c61ce9dd3" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="244,5,447,45"/>
<area shape="poly" title=" " alt="" coords="177,67,255,46,256,51,179,72"/>
<area shape="rect" href="../../dc/df4/a47228.html#a742b40049c70bfda79a3031b85297948" title="Reads a 32&#45;bit value from the I/O port." alt="" coords="250,69,441,109"/>
<area shape="poly" title=" " alt="" coords="196,87,236,87,236,92,196,92"/>
<area shape="rect" href="../../dc/df4/a47228.html#ad13c0ec90a83f05b61c023dd8a1f53e8" title="Writes a 32&#45;bit value to the I/O port." alt="" coords="250,133,441,173"/>
<area shape="poly" title=" " alt="" coords="179,107,256,127,255,132,177,112"/>
</map>
</div>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_a8be9d213f644608726499edca159e1e4_icgraph.png" border="0" usemap="#add/d07/a47208_a8be9d213f644608726499edca159e1e4_icgraph" alt=""/></div>
<map name="add/d07/a47208_a8be9d213f644608726499edca159e1e4_icgraph" id="add/d07/a47208_a8be9d213f644608726499edca159e1e4_icgraph">
<area shape="rect" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="1749,222,1940,262"/>
<area shape="rect" href="../../dd/d07/a47208.html#a5e00e862f7af95887e09f3b90f7357fc" title="Decodes a raw BAR value into a BaseAddressRegister object." alt="" coords="1214,5,1449,60"/>
<area shape="poly" title=" " alt="" coords="1814,214,1764,168,1733,145,1700,126,1638,99,1573,78,1448,50,1449,45,1574,72,1640,94,1703,121,1736,141,1767,164,1818,210"/>
<area shape="rect" href="../../dd/d07/a47208.html#adf54e2d1841368c2f8b2d5989a2fa7b0" title="Reads the configuration header to create a descriptor object." alt="" coords="1200,250,1463,290"/>
<area shape="poly" title=" " alt="" coords="1735,241,1701,241,1606,237,1511,241,1426,253,1426,247,1510,235,1606,232,1701,235,1736,236"/>
<area shape="rect" href="../../dd/d07/a47208.html#abbe08b680f1d06bcd047cd0c8f215bfd" title="Reads a 16&#45;bit word from the PCI configuration space." alt="" coords="1511,250,1701,290"/>
<area shape="poly" title=" " alt="" coords="1736,257,1702,261,1701,256,1735,252"/>
<area shape="rect" href="../../dd/d07/a47208.html#a6e21604894939edaafd1d5baae2840dd" title="Reads an 8&#45;bit byte from the PCI configuration space." alt="" coords="1511,135,1701,175"/>
<area shape="poly" title=" " alt="" coords="1775,220,1661,178,1663,173,1777,215"/>
<area shape="rect" href="../../dd/d07/a47208.html#ac4466a0762483fd1c3ec5f2745a58386" title="Safely writes a 16&#45;bit word to the PCI configuration space." alt="" coords="1511,314,1701,354"/>
<area shape="poly" title=" " alt="" coords="1787,270,1702,304,1669,316,1667,311,1700,300,1785,265"/>
<area shape="rect" href="../../dd/d07/a47208.html#a1bbd1027e1d181bb2eb280070e3d1831" title="Safely writes an 8&#45;bit byte to the PCI configuration space." alt="" coords="1511,378,1701,418"/>
<area shape="poly" title=" " alt="" coords="1817,274,1767,322,1703,368,1678,380,1675,376,1700,364,1763,318,1814,270"/>
<area shape="rect" href="../../dd/d07/a47208.html#a39f63594cdcdad7acc3860d6d339995e" title="Recursively scans the bus for devices and bridges, assigning drivers where possible." alt="" coords="941,89,1152,144"/>
<area shape="poly" title=" " alt="" coords="1226,67,1141,92,1139,87,1224,61"/>
<area shape="poly" title=" " alt="" coords="1085,78,1071,71,1047,68,1026,70,1013,75,1007,81,1007,89,1002,89,1002,79,1010,70,1025,65,1047,63,1073,66,1087,74"/>
<area shape="rect" href="../../dd/d07/a47208.html#a86f101dc2b53f938d5ac466c7ec33e2c" title="Starts the driver selection process from Bus 0." alt="" coords="476,101,692,141"/>
<area shape="poly" title=" " alt="" coords="927,120,692,122,692,117,927,115"/>
<area shape="rect" href="../../d2/d67/a46178.html#abb4e4866092116b520310d61961bfe12" title="Entrypoint for C++ code. we will call this function from assembly." alt="" coords="5,141,100,167"/>
<area shape="poly" title=" " alt="" coords="462,131,100,154,100,148,462,126"/>
<area shape="poly" title=" " alt="" coords="1286,245,1199,190,1151,159,1124,147,1126,142,1153,154,1201,185,1288,240"/>
<area shape="rect" href="../../dd/d07/a47208.html#a676c96d825ec578ff98c965c4b999aec" title="Scans a bus just for listing devices (does not instantiate drivers)." alt="" coords="951,193,1142,233"/>
<area shape="poly" title=" " alt="" coords="1217,250,1142,234,1143,229,1219,245"/>
<area shape="poly" title=" " alt="" coords="1086,181,1072,174,1047,171,1025,173,1011,178,1006,184,1009,192,1004,193,1001,183,1008,174,1023,168,1047,166,1073,169,1088,176"/>
<area shape="rect" href="../../d3/d76/a47120.html#a64cee1fd80a35d996188c0034ec26b64" title=" " alt="" coords="740,177,893,217"/>
<area shape="poly" title=" " alt="" coords="937,208,893,205,894,199,938,202"/>
<area shape="rect" href="../../d3/d76/a47120.html#a8aeac1a13eaf02ba12c6d086e804af53" title=" " alt="" coords="511,169,657,209"/>
<area shape="poly" title=" " alt="" coords="725,196,658,194,658,189,726,191"/>
<area shape="rect" href="../../d3/d76/a47120.html#a037a1007b9329e9067abbb3d8e0d128c" title="Called by the Main Thread. Processes keys with interrupts ENABLED." alt="" coords="280,169,428,195"/>
<area shape="poly" title=" " alt="" coords="496,189,428,187,428,181,496,183"/>
<area shape="rect" href="../../d2/d67/a46178.html#ac3a9df5d195991d85f6e1e9416082338" title="This is tail of kernelMain whose CPU state will be preserved." alt="" coords="148,167,232,192"/>
<area shape="poly" title=" " alt="" coords="266,183,232,183,232,177,266,178"/>
<area shape="poly" title=" " alt="" coords="134,172,100,165,101,160,135,167"/>
<area shape="poly" title=" " alt="" coords="1497,273,1463,273,1463,267,1497,267"/>
<area shape="poly" title=" " alt="" coords="1557,131,1462,82,1414,63,1416,58,1464,77,1560,126"/>
<area shape="poly" title=" " alt="" coords="1516,135,1462,126,1381,119,1300,115,1152,115,1152,110,1300,110,1382,113,1463,121,1516,130"/>
<area shape="poly" title=" " alt="" coords="1537,183,1512,196,1489,215,1464,234,1418,252,1416,247,1461,229,1485,211,1509,192,1535,179"/>
<area shape="poly" title=" " alt="" coords="1513,181,1463,190,1293,207,1142,214,1142,209,1293,202,1462,185,1513,176"/>
<area shape="rect" href="../../dd/d07/a47208.html#a54eaf77198f4b3816b9276f3d5be1661" title="Checks if a device is a multi&#45;function device." alt="" coords="1201,135,1461,175"/>
<area shape="poly" title=" " alt="" coords="1497,158,1461,158,1461,153,1497,153"/>
<area shape="poly" title=" " alt="" coords="1187,138,1152,134,1152,128,1188,133"/>
<area shape="poly" title=" " alt="" coords="1219,181,1143,196,1142,191,1217,175"/>
</map>
</div>

</div>
</div>
<a id="a6e21604894939edaafd1d5baae2840dd" name="a6e21604894939edaafd1d5baae2840dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e21604894939edaafd1d5baae2840dd">&#9670;&#160;</a></span>read8()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t PCI_Controller::read8 </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>registerOffset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads an 8-bit byte from the PCI configuration space. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>bus number. </td></tr>
    <tr><td class="paramname">device</td><td>device number. </td></tr>
    <tr><td class="paramname">function</td><td>function number. </td></tr>
    <tr><td class="paramname">registerOffset</td><td>offset. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>8-bit value. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d2c/a46196_source.html#l00047">47</a> of file <a class="el" href="../../d2/d2c/a46196_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   48</span>{</div>
<div class="line"><span class="lineno">   49</span>    uint32_t dword = <a class="code hl_function" href="../../dd/d07/a47208.html#a8be9d213f644608726499edca159e1e4">read32</a>(bus, device, function, registerOffset);</div>
<div class="line"><span class="lineno">   50</span>    uint32_t shift = (8 * (registerOffset % 4));</div>
<div class="line"><span class="lineno">   51</span>    <span class="keywordflow">return</span> (uint8_t)(dword &gt;&gt; shift);</div>
<div class="line"><span class="lineno">   52</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d2c/a46196_source.html#l00033">read32()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d2c/a46196_source.html#l00087">deviceHasFunctions()</a>, <a class="el" href="../../d2/d2c/a46196_source.html#l00218">getBaseAddressRegister()</a>, <a class="el" href="../../d2/d2c/a46196_source.html#l00092">getDeviceDescriptor()</a>, <a class="el" href="../../d2/d2c/a46196_source.html#l00118">recursiveSelDriver()</a>, and <a class="el" href="../../d2/d2c/a46196_source.html#l00154">scanBus()</a>.</p>
<div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_a6e21604894939edaafd1d5baae2840dd_cgraph.png" border="0" usemap="#add/d07/a47208_a6e21604894939edaafd1d5baae2840dd_cgraph" alt=""/></div>
<map name="add/d07/a47208_a6e21604894939edaafd1d5baae2840dd_cgraph" id="add/d07/a47208_a6e21604894939edaafd1d5baae2840dd_cgraph">
<area shape="rect" title="Reads an 8&#45;bit byte from the PCI configuration space." alt="" coords="5,69,196,109"/>
<area shape="rect" href="../../dd/d07/a47208.html#a8be9d213f644608726499edca159e1e4" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="244,69,435,109"/>
<area shape="poly" title=" " alt="" coords="196,87,230,87,230,92,196,92"/>
<area shape="rect" href="../../dd/d07/a47208.html#a99c80eb69bb5258a96fb3b9c61ce9dd3" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="483,5,685,45"/>
<area shape="poly" title=" " alt="" coords="416,67,493,46,495,51,417,72"/>
<area shape="rect" href="../../dc/df4/a47228.html#a742b40049c70bfda79a3031b85297948" title="Reads a 32&#45;bit value from the I/O port." alt="" coords="489,69,679,109"/>
<area shape="poly" title=" " alt="" coords="435,87,475,87,475,92,435,92"/>
<area shape="rect" href="../../dc/df4/a47228.html#ad13c0ec90a83f05b61c023dd8a1f53e8" title="Writes a 32&#45;bit value to the I/O port." alt="" coords="489,133,679,173"/>
<area shape="poly" title=" " alt="" coords="417,107,495,127,493,132,416,112"/>
</map>
</div>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_a6e21604894939edaafd1d5baae2840dd_icgraph.png" border="0" usemap="#add/d07/a47208_a6e21604894939edaafd1d5baae2840dd_icgraph" alt=""/></div>
<map name="add/d07/a47208_a6e21604894939edaafd1d5baae2840dd_icgraph" id="add/d07/a47208_a6e21604894939edaafd1d5baae2840dd_icgraph">
<area shape="rect" title="Reads an 8&#45;bit byte from the PCI configuration space." alt="" coords="1511,135,1701,175"/>
<area shape="rect" href="../../dd/d07/a47208.html#a54eaf77198f4b3816b9276f3d5be1661" title="Checks if a device is a multi&#45;function device." alt="" coords="1201,199,1461,239"/>
<area shape="poly" title=" " alt="" coords="1507,181,1418,202,1417,197,1506,176"/>
<area shape="rect" href="../../dd/d07/a47208.html#a39f63594cdcdad7acc3860d6d339995e" title="Recursively scans the bus for devices and bridges, assigning drivers where possible." alt="" coords="941,96,1152,151"/>
<area shape="poly" title=" " alt="" coords="1516,135,1462,126,1381,120,1300,117,1152,120,1152,114,1300,112,1382,114,1463,121,1517,130"/>
<area shape="rect" href="../../dd/d07/a47208.html#a676c96d825ec578ff98c965c4b999aec" title="Scans a bus just for listing devices (does not instantiate drivers)." alt="" coords="951,199,1142,239"/>
<area shape="poly" title=" " alt="" coords="1575,187,1525,224,1495,241,1463,254,1418,265,1370,270,1276,270,1187,258,1114,242,1116,237,1188,253,1276,264,1370,265,1417,259,1462,249,1493,236,1522,220,1572,182"/>
<area shape="rect" href="../../dd/d07/a47208.html#a5e00e862f7af95887e09f3b90f7357fc" title="Decodes a raw BAR value into a BaseAddressRegister object." alt="" coords="1214,5,1449,60"/>
<area shape="poly" title=" " alt="" coords="1557,131,1462,82,1414,63,1416,58,1464,77,1560,126"/>
<area shape="rect" href="../../dd/d07/a47208.html#adf54e2d1841368c2f8b2d5989a2fa7b0" title="Reads the configuration header to create a descriptor object." alt="" coords="1200,135,1463,175"/>
<area shape="poly" title=" " alt="" coords="1497,158,1463,158,1463,153,1497,153"/>
<area shape="poly" title=" " alt="" coords="1224,198,1199,190,1151,166,1121,153,1123,148,1153,161,1201,185,1225,193"/>
<area shape="poly" title=" " alt="" coords="1188,222,1142,222,1142,217,1188,217"/>
<area shape="poly" title=" " alt="" coords="1085,85,1071,78,1047,75,1026,77,1013,81,1007,88,1007,96,1002,96,1002,86,1010,77,1025,71,1047,69,1073,72,1087,80"/>
<area shape="rect" href="../../dd/d07/a47208.html#a86f101dc2b53f938d5ac466c7ec33e2c" title="Starts the driver selection process from Bus 0." alt="" coords="476,107,692,147"/>
<area shape="poly" title=" " alt="" coords="927,127,692,129,692,124,927,122"/>
<area shape="rect" href="../../d2/d67/a46178.html#abb4e4866092116b520310d61961bfe12" title="Entrypoint for C++ code. we will call this function from assembly." alt="" coords="5,148,100,173"/>
<area shape="poly" title=" " alt="" coords="462,138,100,160,100,155,462,132"/>
<area shape="poly" title=" " alt="" coords="1086,188,1072,181,1047,178,1025,180,1011,185,1006,191,1009,198,1004,200,1001,190,1008,180,1023,175,1047,173,1073,176,1088,183"/>
<area shape="rect" href="../../d3/d76/a47120.html#a64cee1fd80a35d996188c0034ec26b64" title=" " alt="" coords="740,183,893,223"/>
<area shape="poly" title=" " alt="" coords="937,214,893,211,894,206,938,209"/>
<area shape="rect" href="../../d3/d76/a47120.html#a8aeac1a13eaf02ba12c6d086e804af53" title=" " alt="" coords="511,175,657,215"/>
<area shape="poly" title=" " alt="" coords="725,203,658,201,658,195,726,198"/>
<area shape="rect" href="../../d3/d76/a47120.html#a037a1007b9329e9067abbb3d8e0d128c" title="Called by the Main Thread. Processes keys with interrupts ENABLED." alt="" coords="280,176,428,201"/>
<area shape="poly" title=" " alt="" coords="496,195,428,193,428,188,496,190"/>
<area shape="rect" href="../../d2/d67/a46178.html#ac3a9df5d195991d85f6e1e9416082338" title="This is tail of kernelMain whose CPU state will be preserved." alt="" coords="148,173,232,199"/>
<area shape="poly" title=" " alt="" coords="266,190,232,189,232,184,266,185"/>
<area shape="poly" title=" " alt="" coords="134,178,100,172,101,167,135,173"/>
<area shape="poly" title=" " alt="" coords="1232,67,1134,99,1132,93,1231,62"/>
<area shape="poly" title=" " alt="" coords="1186,142,1152,138,1153,133,1187,136"/>
<area shape="poly" title=" " alt="" coords="1229,181,1137,202,1136,197,1228,176"/>
</map>
</div>

</div>
</div>
<a id="a39f63594cdcdad7acc3860d6d339995e" name="a39f63594cdcdad7acc3860d6d339995e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39f63594cdcdad7acc3860d6d339995e">&#9670;&#160;</a></span>recursiveSelDriver()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PCI_Controller::recursiveSelDriver </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/d64/a47128.html">driver::DriverManager</a> *&#160;</td>
          <td class="paramname"><em>driver_manager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d83/a47196.html">hardware_communication::InterruptManager</a> *&#160;</td>
          <td class="paramname"><em>interrupt_manager</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Recursively scans the bus for devices and bridges, assigning drivers where possible. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>current bus being scanned. </td></tr>
    <tr><td class="paramname">driver_manager</td><td>Pointer to the global driver manager. </td></tr>
    <tr><td class="paramname">interrupt_manager</td><td>Pointer to the global interrupt manager. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d2c/a46196_source.html#l00118">118</a> of file <a class="el" href="../../d2/d2c/a46196_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  119</span>{</div>
<div class="line"><span class="lineno">  120</span>    <span class="keywordflow">for</span>(uint8_t device=0; device&lt;32; device++)</div>
<div class="line"><span class="lineno">  121</span>    {</div>
<div class="line"><span class="lineno">  122</span>        uint8_t numFunctions = <a class="code hl_function" href="../../dd/d07/a47208.html#a54eaf77198f4b3816b9276f3d5be1661">deviceHasFunctions</a>(bus, device) ? 8 : 1;</div>
<div class="line"><span class="lineno">  123</span>        </div>
<div class="line"><span class="lineno">  124</span>        <span class="keywordflow">for</span>(uint8_t function=0; function&lt;numFunctions; function++)</div>
<div class="line"><span class="lineno">  125</span>        {</div>
<div class="line"><span class="lineno">  126</span>            <a class="code hl_class" href="../../dc/d27/a47204.html">PCI_DeviceDescriptor</a> dev = <a class="code hl_function" href="../../dd/d07/a47208.html#adf54e2d1841368c2f8b2d5989a2fa7b0">getDeviceDescriptor</a>(bus, device, function);</div>
<div class="line"><span class="lineno">  127</span> </div>
<div class="line"><span class="lineno">  128</span>            <span class="keywordflow">if</span>(dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#aee5360551eec5a3b31638a0372fdda71">vendorId</a> == 0x0000 || dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#aee5360551eec5a3b31638a0372fdda71">vendorId</a> == 0xFFFF) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  129</span>            </div>
<div class="line"><span class="lineno">  130</span>            <span class="comment">// basic::printf(&quot;PCI Bus %#3x, Device %#3x, Function %#3x &quot;, bus, device, function);</span></div>
<div class="line"><span class="lineno">  131</span>            <span class="comment">// basic::printf(&quot;=&gt; Vendor %#5hx, Device %#5hx (Class %#3x, Sub %#3x)\n&quot;, dev.vendorId, dev.deviceId, dev.classId, dev.subclassId);</span></div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>            <span class="keywordflow">for</span>(uint16_t barNum = 0; barNum &lt; 6; barNum++){</div>
<div class="line"><span class="lineno">  134</span>                <a class="code hl_class" href="../../d4/d9a/a46288.html#d9/d67/a47200">BaseAddressRegister</a> bar = <a class="code hl_function" href="../../dd/d07/a47208.html#a5e00e862f7af95887e09f3b90f7357fc">getBaseAddressRegister</a>(bus, device, function, barNum);</div>
<div class="line"><span class="lineno">  135</span>                <span class="keywordflow">if</span>(bar.<a class="code hl_variable" href="../../d4/d9a/a46288.html#ab9e334c4ce84a03d60cea629ddd148b8">address</a> &amp;&amp; (bar.<a class="code hl_variable" href="../../d4/d9a/a46288.html#a1ed46e6ec12ae23a9d647ec0f659940a">type</a> == <a class="code hl_enumvalue" href="../../d4/d9a/a46288.html#ad38a4a4ac62c5165be6aad855b6dab82a85507086ea5f27de7d6c37f3305976d1">inputOutput</a>)) dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#a0f39aba6d685303dcde01c88d894b743">portBase</a>[barNum] = (uint32_t)bar.<a class="code hl_variable" href="../../d4/d9a/a46288.html#ab9e334c4ce84a03d60cea629ddd148b8">address</a>;</div>
<div class="line"><span class="lineno">  136</span>            }</div>
<div class="line"><span class="lineno">  137</span>            <a class="code hl_class" href="../../d4/da8/a47124.html">driver::Driver</a>* <a class="code hl_namespace" href="../../dd/d38/a46287.html">driver</a> = <a class="code hl_function" href="../../dd/d07/a47208.html#a0a5c1a26be6003b1ef1478fdc7ae2466">getDriver</a>(dev, interrupt_manager);</div>
<div class="line"><span class="lineno">  138</span>            <span class="keywordflow">if</span>(<a class="code hl_namespace" href="../../dd/d38/a46287.html">driver</a> != 0) driver_manager-&gt;<a class="code hl_function" href="../../d5/d64/a47128.html#a5c5383f5f4dddb9e9e2126c8cc598f26">addDriver</a>(<a class="code hl_namespace" href="../../dd/d38/a46287.html">driver</a>);</div>
<div class="line"><span class="lineno">  139</span>            </div>
<div class="line"><span class="lineno">  140</span>            <span class="keywordflow">if</span>(dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#ad622a6f55e45fd14250fcd10c42a3c97">classId</a> == 0x06 &amp;&amp; dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#aab6f4d0868ad0278d4094f49026b7cdb">subclassId</a> == 0x04)</div>
<div class="line"><span class="lineno">  141</span>            {</div>
<div class="line"><span class="lineno">  142</span>                uint8_t secondaryBus = <a class="code hl_function" href="../../dd/d07/a47208.html#a6e21604894939edaafd1d5baae2840dd">read8</a>(bus, device, function, 0x19);</div>
<div class="line"><span class="lineno">  143</span>                <span class="keywordflow">if</span> (secondaryBus != bus) <a class="code hl_function" href="../../dd/d07/a47208.html#a39f63594cdcdad7acc3860d6d339995e">recursiveSelDriver</a>(secondaryBus, driver_manager, interrupt_manager);</div>
<div class="line"><span class="lineno">  144</span>            }</div>
<div class="line"><span class="lineno">  145</span>        }</div>
<div class="line"><span class="lineno">  146</span>    }</div>
<div class="line"><span class="lineno">  147</span>}</div>
<div class="ttc" id="aa47128_html_a5c5383f5f4dddb9e9e2126c8cc598f26"><div class="ttname"><a href="../../d5/d64/a47128.html#a5c5383f5f4dddb9e9e2126c8cc598f26">driver::DriverManager::addDriver</a></div><div class="ttdeci">void addDriver(Driver *)</div><div class="ttdoc">Adds a driver to the manager's list.</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d97/a46211_source.html#l00015">kdriver.cpp:15</a></div></div>
<div class="ttc" id="aa47204_html_a0f39aba6d685303dcde01c88d894b743"><div class="ttname"><a href="../../dc/d27/a47204.html#a0f39aba6d685303dcde01c88d894b743">hardware_communication::PCI_DeviceDescriptor::portBase</a></div><div class="ttdeci">uint32_t portBase[6]</div><div class="ttdef"><b>Definition</b> <a href="../../db/d74/a46247_source.html#l00047">kpci.hpp:47</a></div></div>
<div class="ttc" id="aa47208_html_a0a5c1a26be6003b1ef1478fdc7ae2466"><div class="ttname"><a href="../../dd/d07/a47208.html#a0a5c1a26be6003b1ef1478fdc7ae2466">hardware_communication::PCI_Controller::getDriver</a></div><div class="ttdeci">driver::Driver * getDriver(PCI_DeviceDescriptor dev, hardware_communication::InterruptManager *interrupt_manager)</div><div class="ttdoc">Factory method that instantiates the correct driver for a given device.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d2c/a46196_source.html#l00244">kpci.cpp:244</a></div></div>
<div class="ttc" id="aa47208_html_a39f63594cdcdad7acc3860d6d339995e"><div class="ttname"><a href="../../dd/d07/a47208.html#a39f63594cdcdad7acc3860d6d339995e">hardware_communication::PCI_Controller::recursiveSelDriver</a></div><div class="ttdeci">void recursiveSelDriver(uint8_t bus, driver::DriverManager *driver_manager, hardware_communication::InterruptManager *interrupt_manager)</div><div class="ttdoc">Recursively scans the bus for devices and bridges, assigning drivers where possible.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d2c/a46196_source.html#l00118">kpci.cpp:118</a></div></div>
<div class="ttc" id="aa47208_html_a54eaf77198f4b3816b9276f3d5be1661"><div class="ttname"><a href="../../dd/d07/a47208.html#a54eaf77198f4b3816b9276f3d5be1661">hardware_communication::PCI_Controller::deviceHasFunctions</a></div><div class="ttdeci">bool deviceHasFunctions(uint8_t bus, uint8_t device)</div><div class="ttdoc">Checks if a device is a multi-function device.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d2c/a46196_source.html#l00087">kpci.cpp:87</a></div></div>
<div class="ttc" id="aa47208_html_a5e00e862f7af95887e09f3b90f7357fc"><div class="ttname"><a href="../../dd/d07/a47208.html#a5e00e862f7af95887e09f3b90f7357fc">hardware_communication::PCI_Controller::getBaseAddressRegister</a></div><div class="ttdeci">BaseAddressRegister getBaseAddressRegister(uint8_t bus, uint8_t device, uint8_t function, uint16_t bar)</div><div class="ttdoc">Decodes a raw BAR value into a BaseAddressRegister object.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d2c/a46196_source.html#l00218">kpci.cpp:218</a></div></div>
<div class="ttc" id="aa47208_html_adf54e2d1841368c2f8b2d5989a2fa7b0"><div class="ttname"><a href="../../dd/d07/a47208.html#adf54e2d1841368c2f8b2d5989a2fa7b0">hardware_communication::PCI_Controller::getDeviceDescriptor</a></div><div class="ttdeci">PCI_DeviceDescriptor getDeviceDescriptor(uint8_t bus, uint8_t device, uint8_t function)</div><div class="ttdoc">Reads the configuration header to create a descriptor object.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d2c/a46196_source.html#l00092">kpci.cpp:92</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/d97/a46211_source.html#l00015">driver::DriverManager::addDriver()</a>, <a class="el" href="../../db/d74/a46247_source.html#l00021">hardware_communication::BaseAddressRegister::address</a>, <a class="el" href="../../db/d74/a46247_source.html#l00039">hardware_communication::PCI_DeviceDescriptor::classId</a>, <a class="el" href="../../d2/d2c/a46196_source.html#l00087">deviceHasFunctions()</a>, <a class="el" href="../../d2/d2c/a46196_source.html#l00218">getBaseAddressRegister()</a>, <a class="el" href="../../d2/d2c/a46196_source.html#l00092">getDeviceDescriptor()</a>, <a class="el" href="../../d2/d2c/a46196_source.html#l00244">getDriver()</a>, <a class="el" href="../../db/d74/a46247_source.html#l00014">hardware_communication::inputOutput</a>, <a class="el" href="../../db/d74/a46247_source.html#l00047">hardware_communication::PCI_DeviceDescriptor::portBase</a>, <a class="el" href="../../d2/d2c/a46196_source.html#l00047">read8()</a>, <a class="el" href="../../d2/d2c/a46196_source.html#l00118">recursiveSelDriver()</a>, <a class="el" href="../../db/d74/a46247_source.html#l00038">hardware_communication::PCI_DeviceDescriptor::subclassId</a>, <a class="el" href="../../db/d74/a46247_source.html#l00023">hardware_communication::BaseAddressRegister::type</a>, and <a class="el" href="../../db/d74/a46247_source.html#l00033">hardware_communication::PCI_DeviceDescriptor::vendorId</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d2c/a46196_source.html#l00118">recursiveSelDriver()</a>, and <a class="el" href="../../d2/d2c/a46196_source.html#l00149">selectDrivers()</a>.</p>
<div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_a39f63594cdcdad7acc3860d6d339995e_cgraph.png" border="0" usemap="#add/d07/a47208_a39f63594cdcdad7acc3860d6d339995e_cgraph" alt=""/></div>
<map name="add/d07/a47208_a39f63594cdcdad7acc3860d6d339995e_cgraph" id="add/d07/a47208_a39f63594cdcdad7acc3860d6d339995e_cgraph">
<area shape="rect" title="Recursively scans the bus for devices and bridges, assigning drivers where possible." alt="" coords="5,171,216,226"/>
<area shape="poly" title=" " alt="" coords="56,171,56,161,66,152,84,147,111,145,142,148,160,156,158,160,141,153,111,150,85,152,69,157,61,163,61,171"/>
<area shape="rect" href="../../d5/d64/a47128.html#a5c5383f5f4dddb9e9e2126c8cc598f26" title="Adds a driver to the manager&#39;s list." alt="" coords="313,5,478,45"/>
<area shape="poly" title=" " alt="" coords="132,169,187,111,223,81,263,55,299,40,301,45,265,60,227,85,191,115,136,173"/>
<area shape="rect" href="../../dd/d07/a47208.html#a54eaf77198f4b3816b9276f3d5be1661" title="Checks if a device is a multi&#45;function device." alt="" coords="265,149,525,189"/>
<area shape="poly" title=" " alt="" coords="216,185,251,182,252,187,216,190"/>
<area shape="rect" href="../../dd/d07/a47208.html#a6e21604894939edaafd1d5baae2840dd" title="Reads an 8&#45;bit byte from the PCI configuration space." alt="" coords="575,149,765,189"/>
<area shape="poly" title=" " alt="" coords="216,203,364,207,445,205,526,199,580,190,581,195,527,204,446,210,364,212,216,209"/>
<area shape="rect" href="../../dd/d07/a47208.html#a5e00e862f7af95887e09f3b90f7357fc" title="Decodes a raw BAR value into a BaseAddressRegister object." alt="" coords="278,70,513,125"/>
<area shape="poly" title=" " alt="" coords="175,169,263,135,288,126,289,131,265,140,177,174"/>
<area shape="rect" href="../../dd/d07/a47208.html#adf54e2d1841368c2f8b2d5989a2fa7b0" title="Reads the configuration header to create a descriptor object." alt="" coords="264,264,527,304"/>
<area shape="poly" title=" " alt="" coords="202,224,265,243,314,258,312,263,263,248,200,229"/>
<area shape="rect" href="../../dd/d07/a47208.html#a0a5c1a26be6003b1ef1478fdc7ae2466" title="Factory method that instantiates the correct driver for a given device." alt="" coords="300,336,491,376"/>
<area shape="poly" title=" " alt="" coords="143,224,198,270,265,314,301,329,299,334,263,318,194,274,140,228"/>
<area shape="poly" title=" " alt="" coords="525,167,561,167,561,172,525,172"/>
<area shape="rect" href="../../dd/d07/a47208.html#a8be9d213f644608726499edca159e1e4" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="813,149,1004,189"/>
<area shape="poly" title=" " alt="" coords="766,167,799,167,799,172,766,172"/>
<area shape="rect" href="../../dd/d07/a47208.html#a99c80eb69bb5258a96fb3b9c61ce9dd3" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="1052,72,1255,112"/>
<area shape="poly" title=" " alt="" coords="972,147,1076,114,1077,119,974,152"/>
<area shape="rect" href="../../dc/df4/a47228.html#a742b40049c70bfda79a3031b85297948" title="Reads a 32&#45;bit value from the I/O port." alt="" coords="1058,136,1249,176"/>
<area shape="poly" title=" " alt="" coords="1004,161,1044,159,1044,165,1004,167"/>
<area shape="rect" href="../../dc/df4/a47228.html#ad13c0ec90a83f05b61c023dd8a1f53e8" title="Writes a 32&#45;bit value to the I/O port." alt="" coords="1058,200,1249,240"/>
<area shape="poly" title=" " alt="" coords="1005,186,1045,195,1044,200,1004,192"/>
<area shape="poly" title=" " alt="" coords="501,122,580,143,579,148,500,127"/>
<area shape="poly" title=" " alt="" coords="513,104,635,117,766,135,813,144,812,149,765,140,635,122,513,109"/>
<area shape="poly" title=" " alt="" coords="480,261,525,243,549,225,573,206,599,193,601,197,576,210,553,229,528,248,482,266"/>
<area shape="poly" title=" " alt="" coords="485,261,765,199,804,190,806,195,766,204,487,267"/>
<area shape="rect" href="../../dd/d07/a47208.html#abbe08b680f1d06bcd047cd0c8f215bfd" title="Reads a 16&#45;bit word from the PCI configuration space." alt="" coords="575,264,765,304"/>
<area shape="poly" title=" " alt="" coords="527,281,561,281,561,287,527,287"/>
<area shape="poly" title=" " alt="" coords="722,261,764,243,859,194,862,198,766,248,724,266"/>
<area shape="rect" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9" title="A custom implementation of the standard printf function for writing to both VGA text mode memory and ..." alt="" coords="621,361,719,386"/>
<area shape="poly" title=" " alt="" coords="491,359,607,367,607,372,491,365"/>
<area shape="rect" href="../../df/db2/a46284.html#aeacdadb7f1bb76f1452689d0e5cd4dad" title=" " alt="" coords="829,466,989,491"/>
<area shape="poly" title=" " alt="" coords="695,384,749,413,814,444,854,459,852,464,812,449,746,418,692,388"/>
<area shape="rect" href="../../df/db2/a46284.html#a84a72638a4a04f5706b7f9b217359ecf" title=" " alt="" coords="1087,415,1219,441"/>
<area shape="poly" title=" " alt="" coords="720,382,814,400,951,415,1073,422,1073,428,950,420,813,405,719,388"/>
<area shape="rect" href="../../df/db2/a46284.html#a3d0041ad59dbbae5bc9adbb8ab784499" title=" " alt="" coords="1082,337,1225,362"/>
<area shape="poly" title=" " alt="" coords="719,362,813,351,947,345,1068,345,1068,350,948,350,814,356,720,368"/>
<area shape="rect" href="../../df/db2/a46284.html#a5ecbf4c8112c602ba65a689ebe5014f8" title=" " alt="" coords="849,365,969,390"/>
<area shape="poly" title=" " alt="" coords="720,371,835,373,835,379,720,377"/>
<area shape="rect" href="../../df/db2/a46284.html#a9d1f0f838e646660db6d9284725c2b4c" title="Updates the position of the text mode cursor." alt="" coords="831,263,987,289"/>
<area shape="poly" title=" " alt="" coords="696,358,812,306,853,291,855,296,814,310,698,363"/>
<area shape="rect" href="../../df/db2/a46284.html#aa7de4c6aa018e049aa8992b037cc052a" title=" " alt="" coords="1101,466,1205,491"/>
<area shape="poly" title=" " alt="" coords="989,476,1088,476,1088,481,989,481"/>
<area shape="poly" title=" " alt="" coords="971,463,1078,441,1079,446,972,468"/>
<area shape="rect" href="../../df/db2/a46284.html#a6cfc2f6949fb98dfc419f9fd19f95982" title=" " alt="" coords="1325,415,1439,441"/>
<area shape="poly" title=" " alt="" coords="1219,425,1312,425,1312,431,1219,431"/>
<area shape="rect" href="../../d4/d91/a47144.html#adfb4220d2c664ae5ba11e04d9d182f70" title="Calculates the video memory value for the mouse cursor block." alt="" coords="1303,322,1461,377"/>
<area shape="poly" title=" " alt="" coords="1225,347,1289,347,1289,352,1225,352"/>
<area shape="poly" title=" " alt="" coords="970,387,1079,410,1078,415,969,392"/>
<area shape="poly" title=" " alt="" coords="969,368,1068,356,1069,362,970,373"/>
<area shape="rect" href="../../de/db0/a47216.html#a6ede8fba6ba7e26c5982a91a3d5ffa72" title="Writes an 8&#45;bit value to the I/O port." alt="" coords="1058,264,1249,304"/>
<area shape="poly" title=" " alt="" coords="987,276,1045,278,1044,283,987,281"/>
</map>
</div>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_a39f63594cdcdad7acc3860d6d339995e_icgraph.png" border="0" usemap="#add/d07/a47208_a39f63594cdcdad7acc3860d6d339995e_icgraph" alt=""/></div>
<map name="add/d07/a47208_a39f63594cdcdad7acc3860d6d339995e_icgraph" id="add/d07/a47208_a39f63594cdcdad7acc3860d6d339995e_icgraph">
<area shape="rect" title="Recursively scans the bus for devices and bridges, assigning drivers where possible." alt="" coords="412,29,623,84"/>
<area shape="poly" title=" " alt="" coords="561,18,545,11,517,8,494,10,479,15,472,21,472,29,467,29,467,19,476,10,493,5,517,3,547,6,563,14"/>
<area shape="rect" href="../../dd/d07/a47208.html#a86f101dc2b53f938d5ac466c7ec33e2c" title="Starts the driver selection process from Bus 0." alt="" coords="148,37,364,77"/>
<area shape="poly" title=" " alt="" coords="399,59,364,59,364,54,399,54"/>
<area shape="rect" href="../../d2/d67/a46178.html#abb4e4866092116b520310d61961bfe12" title="Entrypoint for C++ code. we will call this function from assembly." alt="" coords="5,44,100,69"/>
<area shape="poly" title=" " alt="" coords="134,59,100,59,100,54,134,54"/>
</map>
</div>

</div>
</div>
<a id="a676c96d825ec578ff98c965c4b999aec" name="a676c96d825ec578ff98c965c4b999aec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a676c96d825ec578ff98c965c4b999aec">&#9670;&#160;</a></span>scanBus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PCI_Controller::scanBus </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Scans a bus just for listing devices (does not instantiate drivers). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>bus number to scan. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d2c/a46196_source.html#l00154">154</a> of file <a class="el" href="../../d2/d2c/a46196_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  155</span>{</div>
<div class="line"><span class="lineno">  156</span>    <span class="keywordflow">for</span>(uint8_t device=0; device&lt;32; device++)</div>
<div class="line"><span class="lineno">  157</span>    {</div>
<div class="line"><span class="lineno">  158</span>        uint8_t numFunctions = <a class="code hl_function" href="../../dd/d07/a47208.html#a54eaf77198f4b3816b9276f3d5be1661">deviceHasFunctions</a>(bus, (uint8_t)device) ? 8 : 1;</div>
<div class="line"><span class="lineno">  159</span>        </div>
<div class="line"><span class="lineno">  160</span>        <span class="keywordflow">for</span>(uint8_t function=0; function&lt;numFunctions; function++)</div>
<div class="line"><span class="lineno">  161</span>        {</div>
<div class="line"><span class="lineno">  162</span>            <a class="code hl_class" href="../../dc/d27/a47204.html">PCI_DeviceDescriptor</a> dev = <a class="code hl_function" href="../../dd/d07/a47208.html#adf54e2d1841368c2f8b2d5989a2fa7b0">getDeviceDescriptor</a>(bus, device, function);</div>
<div class="line"><span class="lineno">  163</span>            </div>
<div class="line"><span class="lineno">  164</span>            <span class="keywordflow">if</span>(dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#aee5360551eec5a3b31638a0372fdda71">vendorId</a> == 0x0000 || dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#aee5360551eec5a3b31638a0372fdda71">vendorId</a> == 0xFFFF) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  165</span>            <a class="code hl_function" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;---\n&quot;</span>);</div>
<div class="line"><span class="lineno">  166</span>            <a class="code hl_function" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;=&gt; PCI Bus %#x, Device %#x, Function %#x\n&quot;</span>, bus, device, function);</div>
<div class="line"><span class="lineno">  167</span>            <a class="code hl_function" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;   Vendor %#hx, Device %#hx (Class %#x, Sub %#x)\n&quot;</span>, dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#aee5360551eec5a3b31638a0372fdda71">vendorId</a>, dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#afaf41d7a2a6080418e68115af06710b3">deviceId</a>, dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#ad622a6f55e45fd14250fcd10c42a3c97">classId</a>, dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#aab6f4d0868ad0278d4094f49026b7cdb">subclassId</a>);</div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span>            <span class="keywordflow">switch</span>(dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#aee5360551eec5a3b31638a0372fdda71">vendorId</a>)</div>
<div class="line"><span class="lineno">  170</span>            {</div>
<div class="line"><span class="lineno">  171</span>                <span class="keywordflow">case</span> 0x1022: <span class="comment">// AMD</span></div>
<div class="line"><span class="lineno">  172</span>                    <span class="keywordflow">switch</span>(dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#afaf41d7a2a6080418e68115af06710b3">deviceId</a>)</div>
<div class="line"><span class="lineno">  173</span>                    {</div>
<div class="line"><span class="lineno">  174</span>                        <span class="keywordflow">case</span> 0x2000: <a class="code hl_function" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;   AMD am79c973 &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  175</span>                    }</div>
<div class="line"><span class="lineno">  176</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span>                <span class="keywordflow">case</span> 0x8086: <span class="comment">// Intel</span></div>
<div class="line"><span class="lineno">  179</span>                    <span class="keywordflow">switch</span>(dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#afaf41d7a2a6080418e68115af06710b3">deviceId</a>)</div>
<div class="line"><span class="lineno">  180</span>                    {</div>
<div class="line"><span class="lineno">  181</span>                        <span class="keywordflow">case</span> 0x1237: <a class="code hl_function" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;   Intel 440FX Host Bridge &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  182</span>                        <span class="keywordflow">case</span> 0x7000: <a class="code hl_function" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;   Intel PIIX3 ISA Bridge &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  183</span>                        <span class="keywordflow">case</span> 0x7010: <a class="code hl_function" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;   Intel PIIX3 IDE Controller &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  184</span>                        <span class="keywordflow">case</span> 0x7113: <a class="code hl_function" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;   Intel PIIX4 ACPI &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  185</span>                        <span class="keywordflow">case</span> 0x100E: <a class="code hl_function" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;   Intel E1000 Ethernet &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  186</span>                    }</div>
<div class="line"><span class="lineno">  187</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  188</span>                    </div>
<div class="line"><span class="lineno">  189</span>                <span class="keywordflow">case</span> 0x1234: <span class="comment">// QEMU / Bochs</span></div>
<div class="line"><span class="lineno">  190</span>                    <span class="keywordflow">switch</span>(dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#afaf41d7a2a6080418e68115af06710b3">deviceId</a>)</div>
<div class="line"><span class="lineno">  191</span>                    {</div>
<div class="line"><span class="lineno">  192</span>                        <span class="keywordflow">case</span> 0x1111: <a class="code hl_function" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;   QEMU VGA Graphics &quot;</span>); <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  193</span>                    }</div>
<div class="line"><span class="lineno">  194</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  195</span>            }</div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="line"><span class="lineno">  197</span>            <span class="keywordflow">switch</span>(dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#ad622a6f55e45fd14250fcd10c42a3c97">classId</a>)</div>
<div class="line"><span class="lineno">  198</span>            {</div>
<div class="line"><span class="lineno">  199</span>                <span class="keywordflow">case</span> 0x03:</div>
<div class="line"><span class="lineno">  200</span>                    <span class="keywordflow">if</span>(dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#aab6f4d0868ad0278d4094f49026b7cdb">subclassId</a> == 0x00) <a class="code hl_function" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;| Generic VGA &quot;</span>);</div>
<div class="line"><span class="lineno">  201</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  202</span>                <span class="keywordflow">case</span> 0x02:</div>
<div class="line"><span class="lineno">  203</span>                    <a class="code hl_function" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;| Generic Network Card &quot;</span>);</div>
<div class="line"><span class="lineno">  204</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  205</span>            }</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>            <a class="code hl_function" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</a>(<span class="stringliteral">&quot;|\n&quot;</span>);</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span>            <span class="keywordflow">if</span>(dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#ad622a6f55e45fd14250fcd10c42a3c97">classId</a> == 0x06 &amp;&amp; dev.<a class="code hl_variable" href="../../dc/d27/a47204.html#aab6f4d0868ad0278d4094f49026b7cdb">subclassId</a> == 0x04)</div>
<div class="line"><span class="lineno">  210</span>            {</div>
<div class="line"><span class="lineno">  211</span>                uint8_t secondaryBus = <a class="code hl_function" href="../../dd/d07/a47208.html#a6e21604894939edaafd1d5baae2840dd">read8</a>(bus, device, function, 0x19);</div>
<div class="line"><span class="lineno">  212</span>                <span class="keywordflow">if</span> (secondaryBus != bus) <a class="code hl_function" href="../../dd/d07/a47208.html#a676c96d825ec578ff98c965c4b999aec">scanBus</a>(secondaryBus);</div>
<div class="line"><span class="lineno">  213</span>            }</div>
<div class="line"><span class="lineno">  214</span>        }</div>
<div class="line"><span class="lineno">  215</span>    }</div>
<div class="line"><span class="lineno">  216</span>}</div>
<div class="ttc" id="aa47208_html_a676c96d825ec578ff98c965c4b999aec"><div class="ttname"><a href="../../dd/d07/a47208.html#a676c96d825ec578ff98c965c4b999aec">hardware_communication::PCI_Controller::scanBus</a></div><div class="ttdeci">void scanBus(uint8_t bus)</div><div class="ttdoc">Scans a bus just for listing devices (does not instantiate drivers).</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d2c/a46196_source.html#l00154">kpci.cpp:154</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d74/a46247_source.html#l00039">hardware_communication::PCI_DeviceDescriptor::classId</a>, <a class="el" href="../../d2/d2c/a46196_source.html#l00087">deviceHasFunctions()</a>, <a class="el" href="../../db/d74/a46247_source.html#l00034">hardware_communication::PCI_DeviceDescriptor::deviceId</a>, <a class="el" href="../../d2/d2c/a46196_source.html#l00092">getDeviceDescriptor()</a>, <a class="el" href="../../d1/dbc/a46190_source.html#l00237">basic::printf()</a>, <a class="el" href="../../d2/d2c/a46196_source.html#l00047">read8()</a>, <a class="el" href="../../d2/d2c/a46196_source.html#l00154">scanBus()</a>, <a class="el" href="../../db/d74/a46247_source.html#l00038">hardware_communication::PCI_DeviceDescriptor::subclassId</a>, and <a class="el" href="../../db/d74/a46247_source.html#l00033">hardware_communication::PCI_DeviceDescriptor::vendorId</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/da8/a46172_source.html#l00105">KernelShell::process_command()</a>, and <a class="el" href="../../d2/d2c/a46196_source.html#l00154">scanBus()</a>.</p>
<div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_a676c96d825ec578ff98c965c4b999aec_cgraph.png" border="0" usemap="#add/d07/a47208_a676c96d825ec578ff98c965c4b999aec_cgraph" alt=""/></div>
<map name="add/d07/a47208_a676c96d825ec578ff98c965c4b999aec_cgraph" id="add/d07/a47208_a676c96d825ec578ff98c965c4b999aec_cgraph">
<area shape="rect" title="Scans a bus just for listing devices (does not instantiate drivers)." alt="" coords="5,92,196,132"/>
<area shape="poly" title=" " alt="" coords="50,92,47,82,55,73,73,67,101,65,132,68,150,75,148,80,131,73,101,71,74,73,58,78,52,83,55,91"/>
<area shape="rect" href="../../dd/d07/a47208.html#a54eaf77198f4b3816b9276f3d5be1661" title="Checks if a device is a multi&#45;function device." alt="" coords="245,5,505,45"/>
<area shape="poly" title=" " alt="" coords="159,89,243,61,291,47,292,52,245,67,161,94"/>
<area shape="rect" href="../../dd/d07/a47208.html#a6e21604894939edaafd1d5baae2840dd" title="Reads an 8&#45;bit byte from the PCI configuration space." alt="" coords="555,33,745,73"/>
<area shape="poly" title=" " alt="" coords="196,99,540,62,541,68,197,104"/>
<area shape="rect" href="../../dd/d07/a47208.html#adf54e2d1841368c2f8b2d5989a2fa7b0" title="Reads the configuration header to create a descriptor object." alt="" coords="244,120,507,160"/>
<area shape="poly" title=" " alt="" coords="197,119,231,123,230,128,196,124"/>
<area shape="rect" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9" title="A custom implementation of the standard printf function for writing to both VGA text mode memory and ..." alt="" coords="326,289,425,314"/>
<area shape="poly" title=" " alt="" coords="133,130,346,278,343,283,130,134"/>
<area shape="poly" title=" " alt="" coords="506,36,541,40,541,45,505,41"/>
<area shape="rect" href="../../dd/d07/a47208.html#a8be9d213f644608726499edca159e1e4" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="793,91,984,131"/>
<area shape="poly" title=" " alt="" coords="735,71,792,85,791,90,733,76"/>
<area shape="rect" href="../../dd/d07/a47208.html#a99c80eb69bb5258a96fb3b9c61ce9dd3" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="1032,27,1235,67"/>
<area shape="poly" title=" " alt="" coords="965,88,1043,68,1044,73,967,93"/>
<area shape="rect" href="../../dc/df4/a47228.html#a742b40049c70bfda79a3031b85297948" title="Reads a 32&#45;bit value from the I/O port." alt="" coords="1038,91,1229,131"/>
<area shape="poly" title=" " alt="" coords="984,108,1024,108,1024,113,984,113"/>
<area shape="rect" href="../../dc/df4/a47228.html#ad13c0ec90a83f05b61c023dd8a1f53e8" title="Writes a 32&#45;bit value to the I/O port." alt="" coords="1038,155,1229,195"/>
<area shape="poly" title=" " alt="" coords="967,128,1044,149,1043,154,965,133"/>
<area shape="poly" title=" " alt="" coords="445,117,506,99,577,75,579,80,507,104,447,122"/>
<area shape="poly" title=" " alt="" coords="507,130,780,114,780,120,507,135"/>
<area shape="rect" href="../../dd/d07/a47208.html#abbe08b680f1d06bcd047cd0c8f215bfd" title="Reads a 16&#45;bit word from the PCI configuration space." alt="" coords="555,148,745,188"/>
<area shape="poly" title=" " alt="" coords="507,151,541,154,541,160,506,156"/>
<area shape="poly" title=" " alt="" coords="733,145,791,131,792,136,735,151"/>
<area shape="rect" href="../../df/db2/a46284.html#aeacdadb7f1bb76f1452689d0e5cd4dad" title=" " alt="" coords="570,213,730,238"/>
<area shape="poly" title=" " alt="" coords="421,286,589,239,591,244,423,291"/>
<area shape="rect" href="../../df/db2/a46284.html#a84a72638a4a04f5706b7f9b217359ecf" title=" " alt="" coords="823,263,955,289"/>
<area shape="poly" title=" " alt="" coords="425,296,808,277,809,283,425,302"/>
<area shape="rect" href="../../df/db2/a46284.html#a3d0041ad59dbbae5bc9adbb8ab784499" title=" " alt="" coords="817,342,960,367"/>
<area shape="poly" title=" " alt="" coords="413,311,478,332,555,348,620,355,685,358,803,357,803,362,685,363,619,360,554,353,477,337,411,317"/>
<area shape="rect" href="../../df/db2/a46284.html#a5ecbf4c8112c602ba65a689ebe5014f8" title=" " alt="" coords="590,314,710,339"/>
<area shape="poly" title=" " alt="" coords="425,303,576,317,576,323,424,308"/>
<area shape="rect" href="../../df/db2/a46284.html#a9d1f0f838e646660db6d9284725c2b4c" title="Updates the position of the text mode cursor." alt="" coords="572,415,728,441"/>
<area shape="poly" title=" " alt="" coords="399,312,468,350,556,394,595,408,593,413,554,398,466,355,397,316"/>
<area shape="rect" href="../../df/db2/a46284.html#aa7de4c6aa018e049aa8992b037cc052a" title=" " alt="" coords="837,213,941,238"/>
<area shape="poly" title=" " alt="" coords="731,223,823,223,823,228,731,228"/>
<area shape="poly" title=" " alt="" coords="711,236,815,258,814,263,710,241"/>
<area shape="rect" href="../../df/db2/a46284.html#a6cfc2f6949fb98dfc419f9fd19f95982" title=" " alt="" coords="1077,263,1190,289"/>
<area shape="poly" title=" " alt="" coords="955,273,1063,273,1063,279,955,279"/>
<area shape="rect" href="../../d4/d91/a47144.html#adfb4220d2c664ae5ba11e04d9d182f70" title="Calculates the video memory value for the mouse cursor block." alt="" coords="1054,327,1213,382"/>
<area shape="poly" title=" " alt="" coords="961,352,1040,352,1040,357,961,357"/>
<area shape="poly" title=" " alt="" coords="710,311,815,289,816,294,711,317"/>
<area shape="poly" title=" " alt="" coords="711,331,804,342,803,347,710,336"/>
<area shape="rect" href="../../de/db0/a47216.html#a6ede8fba6ba7e26c5982a91a3d5ffa72" title="Writes an 8&#45;bit value to the I/O port." alt="" coords="793,408,984,448"/>
<area shape="poly" title=" " alt="" coords="729,425,779,425,779,431,729,431"/>
</map>
</div>
<div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_a676c96d825ec578ff98c965c4b999aec_icgraph.png" border="0" usemap="#add/d07/a47208_a676c96d825ec578ff98c965c4b999aec_icgraph" alt=""/></div>
<map name="add/d07/a47208_a676c96d825ec578ff98c965c4b999aec_icgraph" id="add/d07/a47208_a676c96d825ec578ff98c965c4b999aec_icgraph">
<area shape="rect" title="Scans a bus just for listing devices (does not instantiate drivers)." alt="" coords="872,29,1063,69"/>
<area shape="poly" title=" " alt="" coords="1004,18,991,11,967,8,946,10,934,15,929,21,931,28,926,30,924,20,930,10,945,5,967,3,993,6,1007,13"/>
<area shape="rect" href="../../d3/d76/a47120.html#a64cee1fd80a35d996188c0034ec26b64" title=" " alt="" coords="671,29,824,69"/>
<area shape="poly" title=" " alt="" coords="859,52,825,52,825,47,859,47"/>
<area shape="rect" href="../../d3/d76/a47120.html#a8aeac1a13eaf02ba12c6d086e804af53" title=" " alt="" coords="476,29,623,69"/>
<area shape="poly" title=" " alt="" coords="657,52,623,52,623,47,657,47"/>
<area shape="rect" href="../../d3/d76/a47120.html#a037a1007b9329e9067abbb3d8e0d128c" title="Called by the Main Thread. Processes keys with interrupts ENABLED." alt="" coords="280,37,428,62"/>
<area shape="poly" title=" " alt="" coords="462,52,428,52,428,47,462,47"/>
<area shape="rect" href="../../d2/d67/a46178.html#ac3a9df5d195991d85f6e1e9416082338" title="This is tail of kernelMain whose CPU state will be preserved." alt="" coords="148,37,232,62"/>
<area shape="poly" title=" " alt="" coords="266,52,232,52,232,47,266,47"/>
<area shape="rect" href="../../d2/d67/a46178.html#abb4e4866092116b520310d61961bfe12" title="Entrypoint for C++ code. we will call this function from assembly." alt="" coords="5,37,100,62"/>
<area shape="poly" title=" " alt="" coords="134,52,100,52,100,47,134,47"/>
</map>
</div>

</div>
</div>
<a id="a86f101dc2b53f938d5ac466c7ec33e2c" name="a86f101dc2b53f938d5ac466c7ec33e2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86f101dc2b53f938d5ac466c7ec33e2c">&#9670;&#160;</a></span>selectDrivers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PCI_Controller::selectDrivers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d64/a47128.html">driver::DriverManager</a> *&#160;</td>
          <td class="paramname"><em>driver_manager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d83/a47196.html">hardware_communication::InterruptManager</a> *&#160;</td>
          <td class="paramname"><em>interrupt_manager</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts the driver selection process from Bus 0. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">driver_manager</td><td>Pointer to the global driver manager. </td></tr>
    <tr><td class="paramname">interrupt_manager</td><td>Pointer to the global interrupt manager. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d2c/a46196_source.html#l00149">149</a> of file <a class="el" href="../../d2/d2c/a46196_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  150</span>{</div>
<div class="line"><span class="lineno">  151</span>    <a class="code hl_function" href="../../dd/d07/a47208.html#a39f63594cdcdad7acc3860d6d339995e">recursiveSelDriver</a>(0, driver_manager, interrupt_manager); </div>
<div class="line"><span class="lineno">  152</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d2c/a46196_source.html#l00118">recursiveSelDriver()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d67/a46178_source.html#l00034">kernelMain()</a>.</p>
<div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_a86f101dc2b53f938d5ac466c7ec33e2c_cgraph.png" border="0" usemap="#add/d07/a47208_a86f101dc2b53f938d5ac466c7ec33e2c_cgraph" alt=""/></div>
<map name="add/d07/a47208_a86f101dc2b53f938d5ac466c7ec33e2c_cgraph" id="add/d07/a47208_a86f101dc2b53f938d5ac466c7ec33e2c_cgraph">
<area shape="rect" title="Starts the driver selection process from Bus 0." alt="" coords="5,179,221,219"/>
<area shape="rect" href="../../dd/d07/a47208.html#a39f63594cdcdad7acc3860d6d339995e" title="Recursively scans the bus for devices and bridges, assigning drivers where possible." alt="" coords="269,171,480,226"/>
<area shape="poly" title=" " alt="" coords="221,196,255,196,255,201,221,201"/>
<area shape="poly" title=" " alt="" coords="324,171,324,161,333,152,350,147,375,145,404,148,421,156,418,160,403,153,375,150,351,152,336,157,329,163,329,171"/>
<area shape="rect" href="../../d5/d64/a47128.html#a5c5383f5f4dddb9e9e2126c8cc598f26" title="Adds a driver to the manager&#39;s list." alt="" coords="577,5,742,45"/>
<area shape="poly" title=" " alt="" coords="396,169,451,111,487,81,527,55,563,40,565,45,529,60,491,85,455,115,400,173"/>
<area shape="rect" href="../../dd/d07/a47208.html#a54eaf77198f4b3816b9276f3d5be1661" title="Checks if a device is a multi&#45;function device." alt="" coords="529,149,789,189"/>
<area shape="poly" title=" " alt="" coords="480,185,515,182,516,187,480,190"/>
<area shape="rect" href="../../dd/d07/a47208.html#a6e21604894939edaafd1d5baae2840dd" title="Reads an 8&#45;bit byte from the PCI configuration space." alt="" coords="839,149,1029,189"/>
<area shape="poly" title=" " alt="" coords="480,203,628,207,709,205,790,199,844,190,845,195,791,204,710,210,628,212,480,209"/>
<area shape="rect" href="../../dd/d07/a47208.html#a5e00e862f7af95887e09f3b90f7357fc" title="Decodes a raw BAR value into a BaseAddressRegister object." alt="" coords="542,70,777,125"/>
<area shape="poly" title=" " alt="" coords="439,169,527,135,552,126,553,131,529,140,441,174"/>
<area shape="rect" href="../../dd/d07/a47208.html#adf54e2d1841368c2f8b2d5989a2fa7b0" title="Reads the configuration header to create a descriptor object." alt="" coords="528,264,791,304"/>
<area shape="poly" title=" " alt="" coords="466,224,529,243,578,258,576,263,527,248,464,229"/>
<area shape="rect" href="../../dd/d07/a47208.html#a0a5c1a26be6003b1ef1478fdc7ae2466" title="Factory method that instantiates the correct driver for a given device." alt="" coords="564,336,755,376"/>
<area shape="poly" title=" " alt="" coords="407,224,462,270,529,314,565,329,563,334,527,318,458,274,404,228"/>
<area shape="poly" title=" " alt="" coords="789,167,825,167,825,172,789,172"/>
<area shape="rect" href="../../dd/d07/a47208.html#a8be9d213f644608726499edca159e1e4" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="1077,149,1268,189"/>
<area shape="poly" title=" " alt="" coords="1030,167,1063,167,1063,172,1030,172"/>
<area shape="rect" href="../../dd/d07/a47208.html#a99c80eb69bb5258a96fb3b9c61ce9dd3" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="1316,72,1519,112"/>
<area shape="poly" title=" " alt="" coords="1236,147,1340,114,1341,119,1238,152"/>
<area shape="rect" href="../../dc/df4/a47228.html#a742b40049c70bfda79a3031b85297948" title="Reads a 32&#45;bit value from the I/O port." alt="" coords="1322,136,1513,176"/>
<area shape="poly" title=" " alt="" coords="1268,161,1308,159,1308,165,1268,167"/>
<area shape="rect" href="../../dc/df4/a47228.html#ad13c0ec90a83f05b61c023dd8a1f53e8" title="Writes a 32&#45;bit value to the I/O port." alt="" coords="1322,200,1513,240"/>
<area shape="poly" title=" " alt="" coords="1269,186,1309,195,1308,200,1268,192"/>
<area shape="poly" title=" " alt="" coords="765,122,844,143,843,148,764,127"/>
<area shape="poly" title=" " alt="" coords="777,104,899,117,1030,135,1077,144,1076,149,1029,140,899,122,777,109"/>
<area shape="poly" title=" " alt="" coords="744,261,789,243,813,225,837,206,863,193,865,197,840,210,817,229,792,248,746,266"/>
<area shape="poly" title=" " alt="" coords="749,261,1029,199,1068,190,1070,195,1030,204,751,267"/>
<area shape="rect" href="../../dd/d07/a47208.html#abbe08b680f1d06bcd047cd0c8f215bfd" title="Reads a 16&#45;bit word from the PCI configuration space." alt="" coords="839,264,1029,304"/>
<area shape="poly" title=" " alt="" coords="791,281,825,281,825,287,791,287"/>
<area shape="poly" title=" " alt="" coords="986,261,1028,243,1123,194,1126,198,1030,248,988,266"/>
<area shape="rect" href="../../df/db2/a46284.html#a45ee52b918a784ff0e96e7c8917a91d9" title="A custom implementation of the standard printf function for writing to both VGA text mode memory and ..." alt="" coords="885,361,983,386"/>
<area shape="poly" title=" " alt="" coords="755,359,871,367,871,372,755,365"/>
<area shape="rect" href="../../df/db2/a46284.html#aeacdadb7f1bb76f1452689d0e5cd4dad" title=" " alt="" coords="1093,466,1253,491"/>
<area shape="poly" title=" " alt="" coords="959,384,1013,413,1078,444,1118,459,1116,464,1076,449,1010,418,956,388"/>
<area shape="rect" href="../../df/db2/a46284.html#a84a72638a4a04f5706b7f9b217359ecf" title=" " alt="" coords="1351,415,1483,441"/>
<area shape="poly" title=" " alt="" coords="984,382,1078,400,1215,415,1337,422,1337,428,1214,420,1077,405,983,388"/>
<area shape="rect" href="../../df/db2/a46284.html#a3d0041ad59dbbae5bc9adbb8ab784499" title=" " alt="" coords="1346,337,1489,362"/>
<area shape="poly" title=" " alt="" coords="983,362,1077,351,1211,345,1332,345,1332,350,1212,350,1078,356,984,368"/>
<area shape="rect" href="../../df/db2/a46284.html#a5ecbf4c8112c602ba65a689ebe5014f8" title=" " alt="" coords="1113,365,1233,390"/>
<area shape="poly" title=" " alt="" coords="984,371,1099,373,1099,379,984,377"/>
<area shape="rect" href="../../df/db2/a46284.html#a9d1f0f838e646660db6d9284725c2b4c" title="Updates the position of the text mode cursor." alt="" coords="1095,263,1251,289"/>
<area shape="poly" title=" " alt="" coords="960,358,1076,306,1117,291,1119,296,1078,310,962,363"/>
<area shape="rect" href="../../df/db2/a46284.html#aa7de4c6aa018e049aa8992b037cc052a" title=" " alt="" coords="1365,466,1469,491"/>
<area shape="poly" title=" " alt="" coords="1253,476,1352,476,1352,481,1253,481"/>
<area shape="poly" title=" " alt="" coords="1235,463,1342,441,1343,446,1236,468"/>
<area shape="rect" href="../../df/db2/a46284.html#a6cfc2f6949fb98dfc419f9fd19f95982" title=" " alt="" coords="1589,415,1703,441"/>
<area shape="poly" title=" " alt="" coords="1483,425,1576,425,1576,431,1483,431"/>
<area shape="rect" href="../../d4/d91/a47144.html#adfb4220d2c664ae5ba11e04d9d182f70" title="Calculates the video memory value for the mouse cursor block." alt="" coords="1567,322,1725,377"/>
<area shape="poly" title=" " alt="" coords="1489,347,1553,347,1553,352,1489,352"/>
<area shape="poly" title=" " alt="" coords="1234,387,1343,410,1342,415,1233,392"/>
<area shape="poly" title=" " alt="" coords="1233,368,1332,356,1333,362,1234,373"/>
<area shape="rect" href="../../de/db0/a47216.html#a6ede8fba6ba7e26c5982a91a3d5ffa72" title="Writes an 8&#45;bit value to the I/O port." alt="" coords="1322,264,1513,304"/>
<area shape="poly" title=" " alt="" coords="1251,276,1309,278,1308,283,1251,281"/>
</map>
</div>
<div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_a86f101dc2b53f938d5ac466c7ec33e2c_icgraph.png" border="0" usemap="#add/d07/a47208_a86f101dc2b53f938d5ac466c7ec33e2c_icgraph" alt=""/></div>
<map name="add/d07/a47208_a86f101dc2b53f938d5ac466c7ec33e2c_icgraph" id="add/d07/a47208_a86f101dc2b53f938d5ac466c7ec33e2c_icgraph">
<area shape="rect" title="Starts the driver selection process from Bus 0." alt="" coords="148,5,364,45"/>
<area shape="rect" href="../../d2/d67/a46178.html#abb4e4866092116b520310d61961bfe12" title="Entrypoint for C++ code. we will call this function from assembly." alt="" coords="5,13,100,38"/>
<area shape="poly" title=" " alt="" coords="134,28,100,28,100,23,134,23"/>
</map>
</div>

</div>
</div>
<a id="ac4466a0762483fd1c3ec5f2745a58386" name="ac4466a0762483fd1c3ec5f2745a58386"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4466a0762483fd1c3ec5f2745a58386">&#9670;&#160;</a></span>write16()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PCI_Controller::write16 </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>registerOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Safely writes a 16-bit word to the PCI configuration space. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>bus number. </td></tr>
    <tr><td class="paramname">device</td><td>device number. </td></tr>
    <tr><td class="paramname">function</td><td>function number. </td></tr>
    <tr><td class="paramname">registerOffset</td><td>offset. </td></tr>
    <tr><td class="paramname">value</td><td>16-bit value to write. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d2c/a46196_source.html#l00061">61</a> of file <a class="el" href="../../d2/d2c/a46196_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   62</span>{</div>
<div class="line"><span class="lineno">   63</span>    uint32_t dword = <a class="code hl_function" href="../../dd/d07/a47208.html#a8be9d213f644608726499edca159e1e4">read32</a>(bus, device, function, registerOffset);</div>
<div class="line"><span class="lineno">   64</span>    </div>
<div class="line"><span class="lineno">   65</span>    uint32_t shift = (8 * (registerOffset % 4));</div>
<div class="line"><span class="lineno">   66</span>    uint32_t mask = 0xFFFF &lt;&lt; shift;</div>
<div class="line"><span class="lineno">   67</span>    </div>
<div class="line"><span class="lineno">   68</span>    dword &amp;= ~mask;</div>
<div class="line"><span class="lineno">   69</span>    dword |= ((uint32_t)value &lt;&lt; shift);</div>
<div class="line"><span class="lineno">   70</span>    </div>
<div class="line"><span class="lineno">   71</span>    <a class="code hl_function" href="../../dd/d07/a47208.html#a2f72611558fb7dcc7971e748058832d8">write32</a>(bus, device, function, registerOffset, dword);</div>
<div class="line"><span class="lineno">   72</span>}</div>
<div class="ttc" id="aa47208_html_a2f72611558fb7dcc7971e748058832d8"><div class="ttname"><a href="../../dd/d07/a47208.html#a2f72611558fb7dcc7971e748058832d8">hardware_communication::PCI_Controller::write32</a></div><div class="ttdeci">void write32(uint8_t bus, uint8_t device, uint8_t function, uint8_t registerOffset, uint32_t value)</div><div class="ttdoc">Writes a 32-bit double word to the PCI configuration space.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d2c/a46196_source.html#l00054">kpci.cpp:54</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d2c/a46196_source.html#l00033">read32()</a>, and <a class="el" href="../../d2/d2c/a46196_source.html#l00054">write32()</a>.</p>
<div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_ac4466a0762483fd1c3ec5f2745a58386_cgraph.png" border="0" usemap="#add/d07/a47208_ac4466a0762483fd1c3ec5f2745a58386_cgraph" alt=""/></div>
<map name="add/d07/a47208_ac4466a0762483fd1c3ec5f2745a58386_cgraph" id="add/d07/a47208_ac4466a0762483fd1c3ec5f2745a58386_cgraph">
<area shape="rect" title="Safely writes a 16&#45;bit word to the PCI configuration space." alt="" coords="5,37,196,77"/>
<area shape="rect" href="../../dd/d07/a47208.html#a8be9d213f644608726499edca159e1e4" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="244,69,435,109"/>
<area shape="poly" title=" " alt="" coords="197,67,231,72,230,77,196,73"/>
<area shape="rect" href="../../dd/d07/a47208.html#a2f72611558fb7dcc7971e748058832d8" title="Writes a 32&#45;bit double word to the PCI configuration space." alt="" coords="244,5,435,45"/>
<area shape="poly" title=" " alt="" coords="196,42,230,37,231,43,197,47"/>
<area shape="rect" href="../../dd/d07/a47208.html#a99c80eb69bb5258a96fb3b9c61ce9dd3" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="483,69,685,109"/>
<area shape="poly" title=" " alt="" coords="435,87,469,87,469,92,435,92"/>
<area shape="rect" href="../../dc/df4/a47228.html#a742b40049c70bfda79a3031b85297948" title="Reads a 32&#45;bit value from the I/O port." alt="" coords="489,133,679,173"/>
<area shape="poly" title=" " alt="" coords="417,107,495,127,493,132,416,112"/>
<area shape="rect" href="../../dc/df4/a47228.html#ad13c0ec90a83f05b61c023dd8a1f53e8" title="Writes a 32&#45;bit value to the I/O port." alt="" coords="489,5,679,45"/>
<area shape="poly" title=" " alt="" coords="416,67,493,46,495,51,417,72"/>
<area shape="poly" title=" " alt="" coords="417,43,495,63,493,68,416,48"/>
<area shape="poly" title=" " alt="" coords="435,23,475,23,475,28,435,28"/>
</map>
</div>

</div>
</div>
<a id="a2f72611558fb7dcc7971e748058832d8" name="a2f72611558fb7dcc7971e748058832d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f72611558fb7dcc7971e748058832d8">&#9670;&#160;</a></span>write32()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PCI_Controller::write32 </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>registerOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a 32-bit double word to the PCI configuration space. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>bus number. </td></tr>
    <tr><td class="paramname">device</td><td>device number. </td></tr>
    <tr><td class="paramname">function</td><td>function number. </td></tr>
    <tr><td class="paramname">registerOffset</td><td>offset. </td></tr>
    <tr><td class="paramname">value</td><td>32-bit value to write. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d2c/a46196_source.html#l00054">54</a> of file <a class="el" href="../../d2/d2c/a46196_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   55</span>{</div>
<div class="line"><span class="lineno">   56</span>    uint32_t address = <a class="code hl_function" href="../../dd/d07/a47208.html#a99c80eb69bb5258a96fb3b9c61ce9dd3">getAddress</a>(bus, device, function, registerOffset);</div>
<div class="line"><span class="lineno">   57</span>    <a class="code hl_variable" href="../../dd/d07/a47208.html#ab6a9e1ba7e8934198624da046fc80bad">commandPort</a>.<a class="code hl_function" href="../../dc/df4/a47228.html#ad13c0ec90a83f05b61c023dd8a1f53e8">write</a>(address);</div>
<div class="line"><span class="lineno">   58</span>    <a class="code hl_variable" href="../../dd/d07/a47208.html#a63cf29ae25d0a70ee448ac1e2896a041">dataPort</a>.<a class="code hl_function" href="../../dc/df4/a47228.html#ad13c0ec90a83f05b61c023dd8a1f53e8">write</a>(value);</div>
<div class="line"><span class="lineno">   59</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d74/a46247_source.html#l00057">commandPort</a>, <a class="el" href="../../db/d74/a46247_source.html#l00056">dataPort</a>, <a class="el" href="../../d2/d2c/a46196_source.html#l00020">getAddress()</a>, and <a class="el" href="../../d5/da9/a46199_source.html#l00057">hardware_communication::Port32Bit::write()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d2c/a46196_source.html#l00061">write16()</a>, and <a class="el" href="../../d2/d2c/a46196_source.html#l00074">write8()</a>.</p>
<div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_a2f72611558fb7dcc7971e748058832d8_cgraph.png" border="0" usemap="#add/d07/a47208_a2f72611558fb7dcc7971e748058832d8_cgraph" alt=""/></div>
<map name="add/d07/a47208_a2f72611558fb7dcc7971e748058832d8_cgraph" id="add/d07/a47208_a2f72611558fb7dcc7971e748058832d8_cgraph">
<area shape="rect" title="Writes a 32&#45;bit double word to the PCI configuration space." alt="" coords="5,37,196,77"/>
<area shape="rect" href="../../dd/d07/a47208.html#a99c80eb69bb5258a96fb3b9c61ce9dd3" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="244,5,447,45"/>
<area shape="poly" title=" " alt="" coords="196,42,230,38,231,43,197,48"/>
<area shape="rect" href="../../dc/df4/a47228.html#ad13c0ec90a83f05b61c023dd8a1f53e8" title="Writes a 32&#45;bit value to the I/O port." alt="" coords="250,69,441,109"/>
<area shape="poly" title=" " alt="" coords="197,67,237,72,236,78,196,72"/>
</map>
</div>
<div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_a2f72611558fb7dcc7971e748058832d8_icgraph.png" border="0" usemap="#add/d07/a47208_a2f72611558fb7dcc7971e748058832d8_icgraph" alt=""/></div>
<map name="add/d07/a47208_a2f72611558fb7dcc7971e748058832d8_icgraph" id="add/d07/a47208_a2f72611558fb7dcc7971e748058832d8_icgraph">
<area shape="rect" title="Writes a 32&#45;bit double word to the PCI configuration space." alt="" coords="244,37,435,77"/>
<area shape="rect" href="../../dd/d07/a47208.html#ac4466a0762483fd1c3ec5f2745a58386" title="Safely writes a 16&#45;bit word to the PCI configuration space." alt="" coords="5,5,196,45"/>
<area shape="poly" title=" " alt="" coords="230,45,196,41,196,35,231,40"/>
<area shape="rect" href="../../dd/d07/a47208.html#a1bbd1027e1d181bb2eb280070e3d1831" title="Safely writes an 8&#45;bit byte to the PCI configuration space." alt="" coords="5,69,196,109"/>
<area shape="poly" title=" " alt="" coords="231,75,196,79,196,74,230,69"/>
</map>
</div>

</div>
</div>
<a id="a1bbd1027e1d181bb2eb280070e3d1831" name="a1bbd1027e1d181bb2eb280070e3d1831"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bbd1027e1d181bb2eb280070e3d1831">&#9670;&#160;</a></span>write8()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PCI_Controller::write8 </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>registerOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Safely writes an 8-bit byte to the PCI configuration space. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus</td><td>bus number. </td></tr>
    <tr><td class="paramname">device</td><td>device number. </td></tr>
    <tr><td class="paramname">function</td><td>function number. </td></tr>
    <tr><td class="paramname">registerOffset</td><td>offset. </td></tr>
    <tr><td class="paramname">value</td><td>8-bit value to write. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d2c/a46196_source.html#l00074">74</a> of file <a class="el" href="../../d2/d2c/a46196_source.html">kpci.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   75</span>{</div>
<div class="line"><span class="lineno">   76</span>    uint32_t dword = <a class="code hl_function" href="../../dd/d07/a47208.html#a8be9d213f644608726499edca159e1e4">read32</a>(bus, device, function, registerOffset);</div>
<div class="line"><span class="lineno">   77</span>    </div>
<div class="line"><span class="lineno">   78</span>    uint32_t shift = (8 * (registerOffset % 4));</div>
<div class="line"><span class="lineno">   79</span>    uint32_t mask = 0xFF &lt;&lt; shift;</div>
<div class="line"><span class="lineno">   80</span>    </div>
<div class="line"><span class="lineno">   81</span>    dword &amp;= ~mask;</div>
<div class="line"><span class="lineno">   82</span>    dword |= ((uint32_t)value &lt;&lt; shift);</div>
<div class="line"><span class="lineno">   83</span>    </div>
<div class="line"><span class="lineno">   84</span>    <a class="code hl_function" href="../../dd/d07/a47208.html#a2f72611558fb7dcc7971e748058832d8">write32</a>(bus, device, function, registerOffset, dword);</div>
<div class="line"><span class="lineno">   85</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d2c/a46196_source.html#l00033">read32()</a>, and <a class="el" href="../../d2/d2c/a46196_source.html#l00054">write32()</a>.</p>
<div id="dynsection-25" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d07/a47208_a1bbd1027e1d181bb2eb280070e3d1831_cgraph.png" border="0" usemap="#add/d07/a47208_a1bbd1027e1d181bb2eb280070e3d1831_cgraph" alt=""/></div>
<map name="add/d07/a47208_a1bbd1027e1d181bb2eb280070e3d1831_cgraph" id="add/d07/a47208_a1bbd1027e1d181bb2eb280070e3d1831_cgraph">
<area shape="rect" title="Safely writes an 8&#45;bit byte to the PCI configuration space." alt="" coords="5,37,196,77"/>
<area shape="rect" href="../../dd/d07/a47208.html#a8be9d213f644608726499edca159e1e4" title="Reads a 32&#45;bit double word from the PCI configuration space." alt="" coords="244,69,435,109"/>
<area shape="poly" title=" " alt="" coords="197,67,231,72,230,77,196,73"/>
<area shape="rect" href="../../dd/d07/a47208.html#a2f72611558fb7dcc7971e748058832d8" title="Writes a 32&#45;bit double word to the PCI configuration space." alt="" coords="244,5,435,45"/>
<area shape="poly" title=" " alt="" coords="196,42,230,37,231,43,197,47"/>
<area shape="rect" href="../../dd/d07/a47208.html#a99c80eb69bb5258a96fb3b9c61ce9dd3" title="Helper to construct the 32&#45;bit CONFIG_ADDRESS." alt="" coords="483,69,685,109"/>
<area shape="poly" title=" " alt="" coords="435,87,469,87,469,92,435,92"/>
<area shape="rect" href="../../dc/df4/a47228.html#a742b40049c70bfda79a3031b85297948" title="Reads a 32&#45;bit value from the I/O port." alt="" coords="489,133,679,173"/>
<area shape="poly" title=" " alt="" coords="417,107,495,127,493,132,416,112"/>
<area shape="rect" href="../../dc/df4/a47228.html#ad13c0ec90a83f05b61c023dd8a1f53e8" title="Writes a 32&#45;bit value to the I/O port." alt="" coords="489,5,679,45"/>
<area shape="poly" title=" " alt="" coords="416,67,493,46,495,51,417,72"/>
<area shape="poly" title=" " alt="" coords="417,43,495,63,493,68,416,48"/>
<area shape="poly" title=" " alt="" coords="435,23,475,23,475,28,435,28"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ab6a9e1ba7e8934198624da046fc80bad" name="ab6a9e1ba7e8934198624da046fc80bad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6a9e1ba7e8934198624da046fc80bad">&#9670;&#160;</a></span>commandPort</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/df4/a47228.html">Port32Bit</a> hardware_communication::PCI_Controller::commandPort</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d74/a46247_source.html#l00057">57</a> of file <a class="el" href="../../db/d74/a46247_source.html">kpci.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d2c/a46196_source.html#l00033">read32()</a>, and <a class="el" href="../../d2/d2c/a46196_source.html#l00054">write32()</a>.</p>

</div>
</div>
<a id="a63cf29ae25d0a70ee448ac1e2896a041" name="a63cf29ae25d0a70ee448ac1e2896a041"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63cf29ae25d0a70ee448ac1e2896a041">&#9670;&#160;</a></span>dataPort</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/df4/a47228.html">Port32Bit</a> hardware_communication::PCI_Controller::dataPort</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d74/a46247_source.html#l00056">56</a> of file <a class="el" href="../../db/d74/a46247_source.html">kpci.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d2c/a46196_source.html#l00033">read32()</a>, and <a class="el" href="../../d2/d2c/a46196_source.html#l00054">write32()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../db/d74/a46247_source.html">kpci.hpp</a></li>
<li><a class="el" href="../../d2/d2c/a46196_source.html">kpci.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d4/d9a/a46288.html">hardware_communication</a></li><li class="navelem"><a class="el" href="../../dd/d07/a47208.html">PCI_Controller</a></li>
    <li class="footer">Generated on Fri Jan 9 2026 22:36:13 for OSOS Dev by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
