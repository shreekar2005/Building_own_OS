<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_a16259_source" xml:lang="en-US">
<title>kiostream.cpp</title>
<indexterm><primary>/home/shreekar/Desktop/Building_own_OS/OSOS/libk_src/basic/kiostream.cpp</primary></indexterm>
Go to the documentation of this file.<programlisting linenumbering="unnumbered"><anchor xml:id="_a16259_source_1l00001"/>00001 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="_a16232">basic/kiostream.hpp</link>&quot;</emphasis>
<anchor xml:id="_a16259_source_1l00002"/>00002 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="_a16244">driver/kmouse.hpp</link>&quot;</emphasis>
<anchor xml:id="_a16259_source_1l00003"/>00003 
<anchor xml:id="_a16259_source_1l00004"/><link linkend="_a16259_1a133981c4ba48aed67a5b874f7b213583">00004</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keywordtype">int</emphasis>&#32;<link linkend="_a16259_1a133981c4ba48aed67a5b874f7b213583">cursor_x_</link>&#32;=&#32;0;
<anchor xml:id="_a16259_source_1l00005"/><link linkend="_a16259_1a1bda227f31ddf346294cb531f7554ef3">00005</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keywordtype">int</emphasis>&#32;<link linkend="_a16259_1a1bda227f31ddf346294cb531f7554ef3">cursor_y_</link>&#32;=&#32;0;
<anchor xml:id="_a16259_source_1l00006"/>00006 
<anchor xml:id="_a16259_source_1l00007"/><link linkend="_a16259_1a5be9493285a1f50a67d98b887537217d">00007</link> <emphasis role="preprocessor">#define&#32;MAGIC_WIDTH&#32;80</emphasis>
<anchor xml:id="_a16259_source_1l00008"/><link linkend="_a16259_1a887422301cbe9a94f8b96263415640cf">00008</link> <emphasis role="preprocessor">#define&#32;MAGIC_HEIGHT&#32;25</emphasis>
<anchor xml:id="_a16259_source_1l00009"/><link linkend="_a16259_1a49426d7a9b562958ad2ab7fbf134f368">00009</link> <emphasis role="preprocessor">#define&#32;TAB_WIDTH&#32;4&#32;</emphasis>
<anchor xml:id="_a16259_source_1l00010"/>00010 
<anchor xml:id="_a16259_source_1l00011"/>00011 <emphasis role="comment">//&#32;---&#32;Global&#32;Port&#32;Objects&#32;---</emphasis>
<anchor xml:id="_a16259_source_1l00012"/><link linkend="_a16259_1a0cece8394c6a6dedd523238e9057125f">00012</link> <emphasis role="keyword">static</emphasis>&#32;<link linkend="_a17211">hardware_communication::Port8Bit</link>&#32;<link linkend="_a16259_1a0cece8394c6a6dedd523238e9057125f">vgaIndexPort</link>(0x3D4);
<anchor xml:id="_a16259_source_1l00013"/><link linkend="_a16259_1a32de8112c133d2f05cae84bde7d98239">00013</link> <emphasis role="keyword">static</emphasis>&#32;<link linkend="_a17211">hardware_communication::Port8Bit</link>&#32;<link linkend="_a16259_1a32de8112c133d2f05cae84bde7d98239">vgaDataPort</link>(0x3D5);
<anchor xml:id="_a16259_source_1l00014"/>00014 
<anchor xml:id="_a16259_source_1l00015"/>00015 <emphasis role="comment">//&#32;---&#32;VGA&#32;Cursor&#32;Control&#32;---</emphasis>
<anchor xml:id="_a16259_source_1l00016"/>00016 
<anchor xml:id="_a16259_source_1l00017"/><link linkend="_a16284_1a8ca6648639f335b207c748074dcf9f25">00017</link> <emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_a16284_1a8ca6648639f335b207c748074dcf9f25">basic::enable_cursor</link>(uint8_t&#32;cursor_start,&#32;uint8_t&#32;cursor_end)&#32;{
<anchor xml:id="_a16259_source_1l00018"/>00018 &#32;&#32;&#32;&#32;<link linkend="_a16259_1a0cece8394c6a6dedd523238e9057125f">vgaIndexPort</link>.<link linkend="_a17211_1a523b6a757b27418dc015ed13e74bef60">write</link>(0x0A);
<anchor xml:id="_a16259_source_1l00019"/>00019 &#32;&#32;&#32;&#32;<link linkend="_a16259_1a32de8112c133d2f05cae84bde7d98239">vgaDataPort</link>.<link linkend="_a17211_1a523b6a757b27418dc015ed13e74bef60">write</link>((<link linkend="_a16259_1a32de8112c133d2f05cae84bde7d98239">vgaDataPort</link>.<link linkend="_a17211_1ae8688251b574c3fd335b99f7e93fff2d">read</link>()&#32;&amp;&#32;0xC0)&#32;|&#32;cursor_start);
<anchor xml:id="_a16259_source_1l00020"/>00020 &#32;&#32;&#32;&#32;
<anchor xml:id="_a16259_source_1l00021"/>00021 &#32;&#32;&#32;&#32;<link linkend="_a16259_1a0cece8394c6a6dedd523238e9057125f">vgaIndexPort</link>.<link linkend="_a17211_1a523b6a757b27418dc015ed13e74bef60">write</link>(0x0B);
<anchor xml:id="_a16259_source_1l00022"/>00022 &#32;&#32;&#32;&#32;<link linkend="_a16259_1a32de8112c133d2f05cae84bde7d98239">vgaDataPort</link>.<link linkend="_a17211_1a523b6a757b27418dc015ed13e74bef60">write</link>((<link linkend="_a16259_1a32de8112c133d2f05cae84bde7d98239">vgaDataPort</link>.<link linkend="_a17211_1ae8688251b574c3fd335b99f7e93fff2d">read</link>()&#32;&amp;&#32;0xE0)&#32;|&#32;cursor_end);
<anchor xml:id="_a16259_source_1l00023"/>00023 }
<anchor xml:id="_a16259_source_1l00024"/>00024 
<anchor xml:id="_a16259_source_1l00025"/><link linkend="_a16284_1a9d1f0f838e646660db6d9284725c2b4c">00025</link> <emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_a16284_1a9d1f0f838e646660db6d9284725c2b4c">basic::update_cursor</link>(<emphasis role="keywordtype">int</emphasis>&#32;x,&#32;<emphasis role="keywordtype">int</emphasis>&#32;y)&#32;{
<anchor xml:id="_a16259_source_1l00026"/>00026 &#32;&#32;&#32;&#32;<link linkend="_a16259_1a133981c4ba48aed67a5b874f7b213583">cursor_x_</link>=x;
<anchor xml:id="_a16259_source_1l00027"/>00027 &#32;&#32;&#32;&#32;<link linkend="_a16259_1a1bda227f31ddf346294cb531f7554ef3">cursor_y_</link>=y;
<anchor xml:id="_a16259_source_1l00028"/>00028 &#32;&#32;&#32;&#32;uint16_t&#32;pos&#32;=&#32;y&#32;*&#32;80&#32;+&#32;x;
<anchor xml:id="_a16259_source_1l00029"/>00029 &#32;&#32;&#32;&#32;<link linkend="_a16259_1a0cece8394c6a6dedd523238e9057125f">vgaIndexPort</link>.<link linkend="_a17211_1a523b6a757b27418dc015ed13e74bef60">write</link>(0x0F);
<anchor xml:id="_a16259_source_1l00030"/>00030 &#32;&#32;&#32;&#32;<link linkend="_a16259_1a32de8112c133d2f05cae84bde7d98239">vgaDataPort</link>.<link linkend="_a17211_1a523b6a757b27418dc015ed13e74bef60">write</link>((uint8_t)(pos&#32;&amp;&#32;0xFF));
<anchor xml:id="_a16259_source_1l00031"/>00031 &#32;&#32;&#32;&#32;<link linkend="_a16259_1a0cece8394c6a6dedd523238e9057125f">vgaIndexPort</link>.<link linkend="_a17211_1a523b6a757b27418dc015ed13e74bef60">write</link>(0x0E);
<anchor xml:id="_a16259_source_1l00032"/>00032 &#32;&#32;&#32;&#32;<link linkend="_a16259_1a32de8112c133d2f05cae84bde7d98239">vgaDataPort</link>.<link linkend="_a17211_1a523b6a757b27418dc015ed13e74bef60">write</link>((uint8_t)((pos&#32;&gt;&gt;&#32;8)&#32;&amp;&#32;0xFF));
<anchor xml:id="_a16259_source_1l00033"/>00033 }
<anchor xml:id="_a16259_source_1l00034"/>00034 
<anchor xml:id="_a16259_source_1l00035"/><link linkend="_a16284_1a4b31902bf2cff8ff28405aa57d9f4575">00035</link> <emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_a16284_1a4b31902bf2cff8ff28405aa57d9f4575">basic::disable_cursor</link>()&#32;{
<anchor xml:id="_a16259_source_1l00036"/>00036 &#32;&#32;&#32;&#32;<link linkend="_a16259_1a0cece8394c6a6dedd523238e9057125f">vgaIndexPort</link>.<link linkend="_a17211_1a523b6a757b27418dc015ed13e74bef60">write</link>(0x0A);
<anchor xml:id="_a16259_source_1l00037"/>00037 &#32;&#32;&#32;&#32;<link linkend="_a16259_1a32de8112c133d2f05cae84bde7d98239">vgaDataPort</link>.<link linkend="_a17211_1a523b6a757b27418dc015ed13e74bef60">write</link>(0x20);
<anchor xml:id="_a16259_source_1l00038"/>00038 }
<anchor xml:id="_a16259_source_1l00039"/>00039 
<anchor xml:id="_a16259_source_1l00040"/>00040 
<anchor xml:id="_a16259_source_1l00041"/><link linkend="_a16259_1a6bd99ada5f7c46567ee0ceca6c369d47">00041</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_a16259_1a6bd99ada5f7c46567ee0ceca6c369d47">printCharStr</link>(<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">char</emphasis>&#32;*str)
<anchor xml:id="_a16259_source_1l00042"/>00042 {
<anchor xml:id="_a16259_source_1l00043"/>00043 &#32;&#32;&#32;&#32;uint16_t&#32;*video_memory&#32;=&#32;(uint16_t&#32;*)0xb8000;
<anchor xml:id="_a16259_source_1l00044"/>00044 &#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;FOR&#32;TEXT&#32;:&#32;Attribute&#32;for&#32;Gray-White&#32;(0x7)&#32;text&#32;on&#32;a&#32;Black&#32;(0x0)&#32;background&#32;(last&#32;2&#32;bytes&#32;(LSBs)&#32;are&#32;not&#32;used&#32;for&#32;color).</emphasis>
<anchor xml:id="_a16259_source_1l00045"/>00045 &#32;&#32;&#32;&#32;<emphasis role="keyword">const</emphasis>&#32;uint16_t&#32;color_attribute&#32;=&#32;0x0700;
<anchor xml:id="_a16259_source_1l00046"/>00046 
<anchor xml:id="_a16259_source_1l00047"/>00047 &#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;---&#32;MOUSE-SAFE&#32;PRINTING:&#32;remove&#32;mouse&#32;---</emphasis>
<anchor xml:id="_a16259_source_1l00048"/>00048 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;mouse_offset&#32;=&#32;<link linkend="_a17179_1aa02009b37420687ef18db8a05ff9181f">driver::MouseDriver::__mouse_y_</link>&#32;*&#32;<link linkend="_a16259_1a5be9493285a1f50a67d98b887537217d">MAGIC_WIDTH</link>&#32;+&#32;<link linkend="_a17179_1ac2077f6309c79d5f585fb966b57fe065">driver::MouseDriver::__mouse_x_</link>;
<anchor xml:id="_a16259_source_1l00049"/>00049 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>(mouse_offset&gt;=0)&#32;video_memory[mouse_offset]&#32;=&#32;<link linkend="_a17179_1a4a671e7e2b235f6bec473cb960401bd6">driver::MouseDriver::old_char_under_mouse_pointer</link>;
<anchor xml:id="_a16259_source_1l00050"/>00050 
<anchor xml:id="_a16259_source_1l00051"/>00051 
<anchor xml:id="_a16259_source_1l00052"/>00052 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(<emphasis role="keywordtype">int</emphasis>&#32;i&#32;=&#32;0;&#32;str[i]&#32;!=&#32;<emphasis role="charliteral">&apos;\0&apos;</emphasis>;&#32;i++)
<anchor xml:id="_a16259_source_1l00053"/>00053 &#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00054"/>00054 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(str[i]&#32;==&#32;<emphasis role="charliteral">&apos;\n&apos;</emphasis>)
<anchor xml:id="_a16259_source_1l00055"/>00055 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00056"/>00056 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16259_1a1bda227f31ddf346294cb531f7554ef3">cursor_y_</link>++;
<anchor xml:id="_a16259_source_1l00057"/>00057 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16259_1a133981c4ba48aed67a5b874f7b213583">cursor_x_</link>&#32;=&#32;0;
<anchor xml:id="_a16259_source_1l00058"/>00058 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00059"/>00059 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>&#32;<emphasis role="keywordflow">if</emphasis>&#32;(str[i]&#32;==&#32;<emphasis role="charliteral">&apos;\b&apos;</emphasis>)
<anchor xml:id="_a16259_source_1l00060"/>00060 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00061"/>00061 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_a16259_1a133981c4ba48aed67a5b874f7b213583">cursor_x_</link>&#32;&gt;&#32;0)
<anchor xml:id="_a16259_source_1l00062"/>00062 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00063"/>00063 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16259_1a133981c4ba48aed67a5b874f7b213583">cursor_x_</link>--;
<anchor xml:id="_a16259_source_1l00064"/>00064 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;offset&#32;=&#32;<link linkend="_a16259_1a1bda227f31ddf346294cb531f7554ef3">cursor_y_</link>&#32;*&#32;<link linkend="_a16259_1a5be9493285a1f50a67d98b887537217d">MAGIC_WIDTH</link>&#32;+&#32;<link linkend="_a16259_1a133981c4ba48aed67a5b874f7b213583">cursor_x_</link>;
<anchor xml:id="_a16259_source_1l00065"/>00065 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;video_memory[offset]&#32;=&#32;color_attribute&#32;|&#32;<emphasis role="charliteral">&apos;&#32;&apos;</emphasis>;
<anchor xml:id="_a16259_source_1l00066"/>00066 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00067"/>00067 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00068"/>00068 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>&#32;<emphasis role="keywordflow">if</emphasis>&#32;(str[i]&#32;==&#32;<emphasis role="charliteral">&apos;\r&apos;</emphasis>)
<anchor xml:id="_a16259_source_1l00069"/>00069 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00070"/>00070 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16259_1a133981c4ba48aed67a5b874f7b213583">cursor_x_</link>&#32;=&#32;0;
<anchor xml:id="_a16259_source_1l00071"/>00071 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00072"/>00072 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>&#32;<emphasis role="keywordflow">if</emphasis>&#32;(str[i]&#32;==&#32;<emphasis role="charliteral">&apos;\t&apos;</emphasis>)
<anchor xml:id="_a16259_source_1l00073"/>00073 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00074"/>00074 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16259_1a133981c4ba48aed67a5b874f7b213583">cursor_x_</link>&#32;=&#32;<link linkend="_a16259_1a133981c4ba48aed67a5b874f7b213583">cursor_x_</link>&#32;+&#32;(<link linkend="_a16259_1a49426d7a9b562958ad2ab7fbf134f368">TAB_WIDTH</link>&#32;-&#32;(<link linkend="_a16259_1a133981c4ba48aed67a5b874f7b213583">cursor_x_</link>&#32;%&#32;<link linkend="_a16259_1a49426d7a9b562958ad2ab7fbf134f368">TAB_WIDTH</link>));
<anchor xml:id="_a16259_source_1l00075"/>00075 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00076"/>00076 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>
<anchor xml:id="_a16259_source_1l00077"/>00077 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00078"/>00078 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;offset&#32;=&#32;<link linkend="_a16259_1a1bda227f31ddf346294cb531f7554ef3">cursor_y_</link>&#32;*&#32;<link linkend="_a16259_1a5be9493285a1f50a67d98b887537217d">MAGIC_WIDTH</link>&#32;+&#32;<link linkend="_a16259_1a133981c4ba48aed67a5b874f7b213583">cursor_x_</link>;
<anchor xml:id="_a16259_source_1l00079"/>00079 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;video_memory[offset]&#32;=&#32;color_attribute&#32;|&#32;str[i];
<anchor xml:id="_a16259_source_1l00080"/>00080 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16259_1a133981c4ba48aed67a5b874f7b213583">cursor_x_</link>++;
<anchor xml:id="_a16259_source_1l00081"/>00081 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00082"/>00082 
<anchor xml:id="_a16259_source_1l00083"/>00083 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_a16259_1a133981c4ba48aed67a5b874f7b213583">cursor_x_</link>&#32;&gt;=&#32;<link linkend="_a16259_1a5be9493285a1f50a67d98b887537217d">MAGIC_WIDTH</link>)
<anchor xml:id="_a16259_source_1l00084"/>00084 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00085"/>00085 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16259_1a1bda227f31ddf346294cb531f7554ef3">cursor_y_</link>++;
<anchor xml:id="_a16259_source_1l00086"/>00086 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16259_1a133981c4ba48aed67a5b874f7b213583">cursor_x_</link>&#32;=&#32;0;
<anchor xml:id="_a16259_source_1l00087"/>00087 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00088"/>00088 
<anchor xml:id="_a16259_source_1l00089"/>00089 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_a16259_1a1bda227f31ddf346294cb531f7554ef3">cursor_y_</link>&#32;&gt;=&#32;<link linkend="_a16259_1a887422301cbe9a94f8b96263415640cf">MAGIC_HEIGHT</link>)
<anchor xml:id="_a16259_source_1l00090"/>00090 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00091"/>00091 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(<emphasis role="keywordtype">int</emphasis>&#32;y&#32;=&#32;0;&#32;y&#32;&lt;&#32;(<link linkend="_a16259_1a887422301cbe9a94f8b96263415640cf">MAGIC_HEIGHT</link>&#32;-&#32;1);&#32;y++)
<anchor xml:id="_a16259_source_1l00092"/>00092 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00093"/>00093 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(<emphasis role="keywordtype">int</emphasis>&#32;x&#32;=&#32;0;&#32;x&#32;&lt;&#32;<link linkend="_a16259_1a5be9493285a1f50a67d98b887537217d">MAGIC_WIDTH</link>;&#32;x++)
<anchor xml:id="_a16259_source_1l00094"/>00094 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00095"/>00095 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;current_offset&#32;=&#32;y&#32;*&#32;<link linkend="_a16259_1a5be9493285a1f50a67d98b887537217d">MAGIC_WIDTH</link>&#32;+&#32;x;
<anchor xml:id="_a16259_source_1l00096"/>00096 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;next_line_offset&#32;=&#32;(y&#32;+&#32;1)&#32;*&#32;<link linkend="_a16259_1a5be9493285a1f50a67d98b887537217d">MAGIC_WIDTH</link>&#32;+&#32;x;
<anchor xml:id="_a16259_source_1l00097"/>00097 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;video_memory[current_offset]&#32;=&#32;video_memory[next_line_offset];
<anchor xml:id="_a16259_source_1l00098"/>00098 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00099"/>00099 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00100"/>00100 
<anchor xml:id="_a16259_source_1l00101"/>00101 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;last_line_offset_start&#32;=&#32;(<link linkend="_a16259_1a887422301cbe9a94f8b96263415640cf">MAGIC_HEIGHT</link>&#32;-&#32;1)&#32;*&#32;<link linkend="_a16259_1a5be9493285a1f50a67d98b887537217d">MAGIC_WIDTH</link>;
<anchor xml:id="_a16259_source_1l00102"/>00102 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(<emphasis role="keywordtype">int</emphasis>&#32;x&#32;=&#32;0;&#32;x&#32;&lt;&#32;<link linkend="_a16259_1a5be9493285a1f50a67d98b887537217d">MAGIC_WIDTH</link>;&#32;x++)
<anchor xml:id="_a16259_source_1l00103"/>00103 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00104"/>00104 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;video_memory[last_line_offset_start&#32;+&#32;x]&#32;=&#32;color_attribute&#32;|&#32;<emphasis role="charliteral">&apos;&#32;&apos;</emphasis>;
<anchor xml:id="_a16259_source_1l00105"/>00105 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00106"/>00106 
<anchor xml:id="_a16259_source_1l00107"/>00107 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16259_1a1bda227f31ddf346294cb531f7554ef3">cursor_y_</link>&#32;=&#32;<link linkend="_a16259_1a887422301cbe9a94f8b96263415640cf">MAGIC_HEIGHT</link>&#32;-&#32;1;
<anchor xml:id="_a16259_source_1l00108"/>00108 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16259_1a133981c4ba48aed67a5b874f7b213583">cursor_x_</link>&#32;=&#32;0;
<anchor xml:id="_a16259_source_1l00109"/>00109 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00110"/>00110 &#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00111"/>00111 
<anchor xml:id="_a16259_source_1l00112"/>00112 &#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;---&#32;MOUSE-SAFE&#32;PRINTING:&#32;add&#32;mouse&#32;again---</emphasis>
<anchor xml:id="_a16259_source_1l00113"/>00113 &#32;&#32;&#32;&#32;<link linkend="_a17179_1a4a671e7e2b235f6bec473cb960401bd6">driver::MouseDriver::old_char_under_mouse_pointer</link>&#32;=&#32;video_memory[mouse_offset];
<anchor xml:id="_a16259_source_1l00114"/>00114 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>(mouse_offset&gt;=0)&#32;video_memory[mouse_offset]&#32;=&#32;<link linkend="_a17179_1a1a2a455ca7146dea3148afa8cb6c9ed5">driver::MouseDriver::mouse_block_video_mem_value</link>(<link linkend="_a17179_1a4a671e7e2b235f6bec473cb960401bd6">driver::MouseDriver::old_char_under_mouse_pointer</link>,&#32;<link linkend="_a16244_1a637dd833f5f7af42afa1f42349a4d89e">MOUSE_POINTER_COLOR</link>);
<anchor xml:id="_a16259_source_1l00115"/>00115 
<anchor xml:id="_a16259_source_1l00116"/>00116 }
<anchor xml:id="_a16259_source_1l00117"/>00117 
<anchor xml:id="_a16259_source_1l00118"/><link linkend="_a16284_1a02923caa95013ec5d9333c25d9cca1d6">00118</link> <emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_a16284_1a02923caa95013ec5d9333c25d9cca1d6">basic::__clearScreen</link>()
<anchor xml:id="_a16259_source_1l00119"/>00119 {
<anchor xml:id="_a16259_source_1l00120"/>00120 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">unsigned</emphasis>&#32;<emphasis role="keywordtype">short</emphasis>&#32;*video_memory&#32;=&#32;(<emphasis role="keywordtype">unsigned</emphasis>&#32;<emphasis role="keywordtype">short</emphasis>&#32;*)0xb8000;
<anchor xml:id="_a16259_source_1l00121"/>00121 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">unsigned</emphasis>&#32;<emphasis role="keywordtype">short</emphasis>&#32;blank&#32;=&#32;(0x07&#32;&lt;&lt;&#32;8)&#32;|&#32;<emphasis role="charliteral">&apos;&#32;&apos;</emphasis>;
<anchor xml:id="_a16259_source_1l00122"/>00122 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;screenSize&#32;=&#32;<link linkend="_a16259_1a5be9493285a1f50a67d98b887537217d">MAGIC_WIDTH</link>&#32;*&#32;<link linkend="_a16259_1a887422301cbe9a94f8b96263415640cf">MAGIC_HEIGHT</link>;
<anchor xml:id="_a16259_source_1l00123"/>00123 
<anchor xml:id="_a16259_source_1l00124"/>00124 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(<emphasis role="keywordtype">int</emphasis>&#32;i&#32;=&#32;0;&#32;i&#32;&lt;&#32;screenSize;&#32;i++)
<anchor xml:id="_a16259_source_1l00125"/>00125 &#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00126"/>00126 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;video_memory[i]&#32;=&#32;blank;
<anchor xml:id="_a16259_source_1l00127"/>00127 &#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00128"/>00128 
<anchor xml:id="_a16259_source_1l00129"/>00129 &#32;&#32;&#32;&#32;<link linkend="_a16259_1a133981c4ba48aed67a5b874f7b213583">cursor_x_</link>&#32;=&#32;0;
<anchor xml:id="_a16259_source_1l00130"/>00130 &#32;&#32;&#32;&#32;<link linkend="_a16259_1a1bda227f31ddf346294cb531f7554ef3">cursor_y_</link>&#32;=&#32;0;
<anchor xml:id="_a16259_source_1l00131"/>00131 }
<anchor xml:id="_a16259_source_1l00132"/>00132 
<anchor xml:id="_a16259_source_1l00133"/><link linkend="_a16259_1a913f40d6652965fdd1e34a04ab7dba2d">00133</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_a16259_1a913f40d6652965fdd1e34a04ab7dba2d">reverse</link>(<emphasis role="keywordtype">char</emphasis>&#32;*str,&#32;<emphasis role="keywordtype">int</emphasis>&#32;length)
<anchor xml:id="_a16259_source_1l00134"/>00134 {
<anchor xml:id="_a16259_source_1l00135"/>00135 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;start&#32;=&#32;0;
<anchor xml:id="_a16259_source_1l00136"/>00136 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;end&#32;=&#32;length&#32;-&#32;1;
<anchor xml:id="_a16259_source_1l00137"/>00137 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">while</emphasis>&#32;(start&#32;&lt;&#32;end)
<anchor xml:id="_a16259_source_1l00138"/>00138 &#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00139"/>00139 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">char</emphasis>&#32;temp&#32;=&#32;str[start];
<anchor xml:id="_a16259_source_1l00140"/>00140 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;str[start]&#32;=&#32;str[end];
<anchor xml:id="_a16259_source_1l00141"/>00141 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;str[end]&#32;=&#32;temp;
<anchor xml:id="_a16259_source_1l00142"/>00142 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;start++;
<anchor xml:id="_a16259_source_1l00143"/>00143 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;end--;
<anchor xml:id="_a16259_source_1l00144"/>00144 &#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00145"/>00145 }
<anchor xml:id="_a16259_source_1l00146"/>00146 
<anchor xml:id="_a16259_source_1l00147"/><link linkend="_a16259_1a14bf754296559bf0266e127e677e8107">00147</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_a16259_1a14bf754296559bf0266e127e677e8107">ullToString</link>(<emphasis role="keywordtype">unsigned</emphasis>&#32;<emphasis role="keywordtype">long</emphasis>&#32;<emphasis role="keywordtype">long</emphasis>&#32;n,&#32;<emphasis role="keywordtype">char</emphasis>&#32;*buffer,&#32;<emphasis role="keywordtype">int</emphasis>&#32;<link linkend="_a16253_1ad516e6ff5b7dd7f6ce2946c527ddb8b9">base</link>,&#32;<emphasis role="keywordtype">int</emphasis>&#32;is_signed,&#32;<emphasis role="keywordtype">int</emphasis>&#32;uppercase)
<anchor xml:id="_a16259_source_1l00148"/>00148 {
<anchor xml:id="_a16259_source_1l00149"/>00149 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;i&#32;=&#32;0;
<anchor xml:id="_a16259_source_1l00150"/>00150 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;isNegative&#32;=&#32;0;
<anchor xml:id="_a16259_source_1l00151"/>00151 
<anchor xml:id="_a16259_source_1l00152"/>00152 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(n&#32;==&#32;0)
<anchor xml:id="_a16259_source_1l00153"/>00153 &#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00154"/>00154 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;buffer[i++]&#32;=&#32;<emphasis role="charliteral">&apos;0&apos;</emphasis>;
<anchor xml:id="_a16259_source_1l00155"/>00155 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;buffer[i]&#32;=&#32;<emphasis role="charliteral">&apos;\0&apos;</emphasis>;
<anchor xml:id="_a16259_source_1l00156"/>00156 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>;
<anchor xml:id="_a16259_source_1l00157"/>00157 &#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00158"/>00158 
<anchor xml:id="_a16259_source_1l00159"/>00159 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(is_signed&#32;&amp;&amp;&#32;(<emphasis role="keywordtype">long</emphasis>&#32;<emphasis role="keywordtype">long</emphasis>)n&#32;&lt;&#32;0)
<anchor xml:id="_a16259_source_1l00160"/>00160 &#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00161"/>00161 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;isNegative&#32;=&#32;1;
<anchor xml:id="_a16259_source_1l00162"/>00162 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;n&#32;=&#32;-(<emphasis role="keywordtype">long</emphasis>&#32;long)n;
<anchor xml:id="_a16259_source_1l00163"/>00163 &#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00164"/>00164 
<anchor xml:id="_a16259_source_1l00165"/>00165 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">while</emphasis>&#32;(n&#32;!=&#32;0)
<anchor xml:id="_a16259_source_1l00166"/>00166 &#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00167"/>00167 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;rem&#32;=&#32;n&#32;%&#32;<link linkend="_a16253_1ad516e6ff5b7dd7f6ce2946c527ddb8b9">base</link>;
<anchor xml:id="_a16259_source_1l00168"/>00168 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;buffer[i++]&#32;=&#32;(rem&#32;&gt;&#32;9)&#32;?&#32;((rem&#32;-&#32;10)&#32;+&#32;(uppercase&#32;?&#32;<emphasis role="charliteral">&apos;A&apos;</emphasis>&#32;:&#32;<emphasis role="charliteral">&apos;a&apos;</emphasis>))&#32;:&#32;(rem&#32;+&#32;<emphasis role="charliteral">&apos;0&apos;</emphasis>);
<anchor xml:id="_a16259_source_1l00169"/>00169 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;n&#32;=&#32;n&#32;/&#32;<link linkend="_a16253_1ad516e6ff5b7dd7f6ce2946c527ddb8b9">base</link>;
<anchor xml:id="_a16259_source_1l00170"/>00170 &#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00171"/>00171 
<anchor xml:id="_a16259_source_1l00172"/>00172 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(isNegative)
<anchor xml:id="_a16259_source_1l00173"/>00173 &#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00174"/>00174 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;buffer[i++]&#32;=&#32;<emphasis role="charliteral">&apos;-&apos;</emphasis>;
<anchor xml:id="_a16259_source_1l00175"/>00175 &#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00176"/>00176 
<anchor xml:id="_a16259_source_1l00177"/>00177 &#32;&#32;&#32;&#32;buffer[i]&#32;=&#32;<emphasis role="charliteral">&apos;\0&apos;</emphasis>;
<anchor xml:id="_a16259_source_1l00178"/>00178 &#32;&#32;&#32;&#32;<link linkend="_a16259_1a913f40d6652965fdd1e34a04ab7dba2d">reverse</link>(buffer,&#32;i);
<anchor xml:id="_a16259_source_1l00179"/>00179 }
<anchor xml:id="_a16259_source_1l00180"/>00180 
<anchor xml:id="_a16259_source_1l00181"/><link linkend="_a16259_1a91bacd34c601c4cfe39f1ffa6c2a1385">00181</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keywordtype">double</emphasis>&#32;<link linkend="_a16259_1a91bacd34c601c4cfe39f1ffa6c2a1385">power</link>(<emphasis role="keywordtype">double</emphasis>&#32;<link linkend="_a16253_1ad516e6ff5b7dd7f6ce2946c527ddb8b9">base</link>,&#32;<emphasis role="keywordtype">int</emphasis>&#32;exp)
<anchor xml:id="_a16259_source_1l00182"/>00182 {
<anchor xml:id="_a16259_source_1l00183"/>00183 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">double</emphasis>&#32;res&#32;=&#32;1.0;
<anchor xml:id="_a16259_source_1l00184"/>00184 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(<emphasis role="keywordtype">int</emphasis>&#32;i&#32;=&#32;0;&#32;i&#32;&lt;&#32;exp;&#32;++i)
<anchor xml:id="_a16259_source_1l00185"/>00185 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;res&#32;*=&#32;<link linkend="_a16253_1ad516e6ff5b7dd7f6ce2946c527ddb8b9">base</link>;
<anchor xml:id="_a16259_source_1l00186"/>00186 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;res;
<anchor xml:id="_a16259_source_1l00187"/>00187 }
<anchor xml:id="_a16259_source_1l00188"/>00188 
<anchor xml:id="_a16259_source_1l00189"/><link linkend="_a16259_1af382674e4c9fb57a14b178d4ee12273a">00189</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_a16259_1af382674e4c9fb57a14b178d4ee12273a">doubleToString</link>(<emphasis role="keywordtype">double</emphasis>&#32;d,&#32;<emphasis role="keywordtype">char</emphasis>&#32;*buffer,&#32;<emphasis role="keywordtype">int</emphasis>&#32;precision)
<anchor xml:id="_a16259_source_1l00190"/>00190 {
<anchor xml:id="_a16259_source_1l00191"/>00191 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(precision&#32;&lt;&#32;0)
<anchor xml:id="_a16259_source_1l00192"/>00192 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;precision&#32;=&#32;6;
<anchor xml:id="_a16259_source_1l00193"/>00193 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">char</emphasis>&#32;*ptr&#32;=&#32;buffer;
<anchor xml:id="_a16259_source_1l00194"/>00194 
<anchor xml:id="_a16259_source_1l00195"/>00195 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(d&#32;&lt;&#32;0)
<anchor xml:id="_a16259_source_1l00196"/>00196 &#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00197"/>00197 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;*ptr++&#32;=&#32;<emphasis role="charliteral">&apos;-&apos;</emphasis>;
<anchor xml:id="_a16259_source_1l00198"/>00198 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;d&#32;=&#32;-d;
<anchor xml:id="_a16259_source_1l00199"/>00199 &#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00200"/>00200 &#32;&#32;&#32;&#32;
<anchor xml:id="_a16259_source_1l00201"/>00201 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">unsigned</emphasis>&#32;<emphasis role="keywordtype">long</emphasis>&#32;<emphasis role="keywordtype">long</emphasis>&#32;int_part&#32;=&#32;(<emphasis role="keywordtype">unsigned</emphasis>&#32;<emphasis role="keywordtype">long</emphasis>&#32;long)d;
<anchor xml:id="_a16259_source_1l00202"/>00202 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">double</emphasis>&#32;frac_part&#32;=&#32;d&#32;-&#32;(double)int_part;
<anchor xml:id="_a16259_source_1l00203"/>00203 
<anchor xml:id="_a16259_source_1l00204"/>00204 &#32;&#32;&#32;&#32;<link linkend="_a16259_1a14bf754296559bf0266e127e677e8107">ullToString</link>(int_part,&#32;ptr,&#32;10,&#32;0,&#32;0);
<anchor xml:id="_a16259_source_1l00205"/>00205 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">while</emphasis>&#32;(*ptr)&#32;ptr++;
<anchor xml:id="_a16259_source_1l00206"/>00206 
<anchor xml:id="_a16259_source_1l00207"/>00207 &#32;&#32;&#32;&#32;*ptr++&#32;=&#32;<emphasis role="charliteral">&apos;.&apos;</emphasis>;
<anchor xml:id="_a16259_source_1l00208"/>00208 &#32;&#32;&#32;&#32;
<anchor xml:id="_a16259_source_1l00209"/>00209 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">unsigned</emphasis>&#32;<emphasis role="keywordtype">long</emphasis>&#32;<emphasis role="keywordtype">long</emphasis>&#32;frac_as_ull&#32;=&#32;(<emphasis role="keywordtype">unsigned</emphasis>&#32;<emphasis role="keywordtype">long</emphasis>&#32;long)(frac_part&#32;*&#32;<link linkend="_a16259_1a91bacd34c601c4cfe39f1ffa6c2a1385">power</link>(10,&#32;precision)&#32;+&#32;0.5);
<anchor xml:id="_a16259_source_1l00210"/>00210 &#32;&#32;&#32;&#32;
<anchor xml:id="_a16259_source_1l00211"/>00211 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">char</emphasis>&#32;frac_buffer[32];
<anchor xml:id="_a16259_source_1l00212"/>00212 &#32;&#32;&#32;&#32;<link linkend="_a16259_1a14bf754296559bf0266e127e677e8107">ullToString</link>(frac_as_ull,&#32;frac_buffer,&#32;10,&#32;0,&#32;0);
<anchor xml:id="_a16259_source_1l00213"/>00213 
<anchor xml:id="_a16259_source_1l00214"/>00214 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;frac_len&#32;=&#32;0;
<anchor xml:id="_a16259_source_1l00215"/>00215 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">while</emphasis>(frac_buffer[frac_len]&#32;!=&#32;<emphasis role="charliteral">&apos;\0&apos;</emphasis>)&#32;frac_len++;
<anchor xml:id="_a16259_source_1l00216"/>00216 &#32;&#32;&#32;&#32;
<anchor xml:id="_a16259_source_1l00217"/>00217 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;padding&#32;=&#32;precision&#32;-&#32;frac_len;
<anchor xml:id="_a16259_source_1l00218"/>00218 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(<emphasis role="keywordtype">int</emphasis>&#32;i&#32;=&#32;0;&#32;i&#32;&lt;&#32;padding;&#32;i++)
<anchor xml:id="_a16259_source_1l00219"/>00219 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;*ptr++&#32;=&#32;<emphasis role="charliteral">&apos;0&apos;</emphasis>;
<anchor xml:id="_a16259_source_1l00220"/>00220 &#32;&#32;&#32;&#32;
<anchor xml:id="_a16259_source_1l00221"/>00221 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">char</emphasis>*&#32;frac_ptr&#32;=&#32;frac_buffer;
<anchor xml:id="_a16259_source_1l00222"/>00222 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">while</emphasis>(*frac_ptr)&#32;*ptr++&#32;=&#32;*frac_ptr++;
<anchor xml:id="_a16259_source_1l00223"/>00223 
<anchor xml:id="_a16259_source_1l00224"/>00224 &#32;&#32;&#32;&#32;*ptr&#32;=&#32;<emphasis role="charliteral">&apos;\0&apos;</emphasis>;
<anchor xml:id="_a16259_source_1l00225"/>00225 }
<anchor xml:id="_a16259_source_1l00226"/>00226 
<anchor xml:id="_a16259_source_1l00227"/><link linkend="_a16259_1aab6eb585b409591414f84a1e3f606345">00227</link> <emphasis role="keyword">static</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_a16259_1aab6eb585b409591414f84a1e3f606345">printHex</link>(uintptr_t&#32;n,&#32;<emphasis role="keywordtype">int</emphasis>&#32;digits)&#32;{
<anchor xml:id="_a16259_source_1l00228"/>00228 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">char</emphasis>&#32;buffer[32];
<anchor xml:id="_a16259_source_1l00229"/>00229 &#32;&#32;&#32;&#32;<link linkend="_a16259_1a14bf754296559bf0266e127e677e8107">ullToString</link>(n,&#32;buffer,&#32;16,&#32;0,&#32;1);&#32;<emphasis role="comment">//&#32;Use&#32;uppercase&#32;for&#32;pointers&#32;typically</emphasis>
<anchor xml:id="_a16259_source_1l00230"/>00230 
<anchor xml:id="_a16259_source_1l00231"/>00231 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;<link linkend="_a16226_1a6de3a6d27a7e07942958b912d39792e6">len</link>&#32;=&#32;0;
<anchor xml:id="_a16259_source_1l00232"/>00232 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">while</emphasis>&#32;(buffer[<link linkend="_a16226_1a6de3a6d27a7e07942958b912d39792e6">len</link>]&#32;!=&#32;<emphasis role="charliteral">&apos;\0&apos;</emphasis>)&#32;{
<anchor xml:id="_a16259_source_1l00233"/>00233 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16226_1a6de3a6d27a7e07942958b912d39792e6">len</link>++;
<anchor xml:id="_a16259_source_1l00234"/>00234 &#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00235"/>00235 
<anchor xml:id="_a16259_source_1l00236"/>00236 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(<emphasis role="keywordtype">int</emphasis>&#32;i&#32;=&#32;0;&#32;i&#32;&lt;&#32;digits&#32;-&#32;<link linkend="_a16226_1a6de3a6d27a7e07942958b912d39792e6">len</link>;&#32;i++)&#32;{
<anchor xml:id="_a16259_source_1l00237"/>00237 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16259_1a6bd99ada5f7c46567ee0ceca6c369d47">printCharStr</link>(<emphasis role="stringliteral">&quot;0&quot;</emphasis>);
<anchor xml:id="_a16259_source_1l00238"/>00238 &#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00239"/>00239 &#32;&#32;&#32;&#32;<link linkend="_a16259_1a6bd99ada5f7c46567ee0ceca6c369d47">printCharStr</link>(buffer);
<anchor xml:id="_a16259_source_1l00240"/>00240 }
<anchor xml:id="_a16259_source_1l00241"/>00241 
<anchor xml:id="_a16259_source_1l00276"/><link linkend="_a16284_1a45ee52b918a784ff0e96e7c8917a91d9">00276</link> <emphasis role="keywordtype">int</emphasis>&#32;<link linkend="_a16284_1a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</link>(<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">char</emphasis>&#32;*format,&#32;...)
<anchor xml:id="_a16259_source_1l00277"/>00277 {
<anchor xml:id="_a16259_source_1l00278"/>00278 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;chars_written&#32;=&#32;0;
<anchor xml:id="_a16259_source_1l00279"/>00279 
<anchor xml:id="_a16259_source_1l00280"/>00280 &#32;&#32;&#32;&#32;va_list&#32;args;
<anchor xml:id="_a16259_source_1l00281"/>00281 &#32;&#32;&#32;&#32;va_start(args,&#32;format);
<anchor xml:id="_a16259_source_1l00282"/>00282 
<anchor xml:id="_a16259_source_1l00283"/>00283 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">char</emphasis>&#32;buffer[128];
<anchor xml:id="_a16259_source_1l00284"/>00284 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">char</emphasis>&#32;char_str[2]&#32;=&#32;{0,&#32;0};
<anchor xml:id="_a16259_source_1l00285"/>00285 
<anchor xml:id="_a16259_source_1l00286"/>00286 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(<emphasis role="keywordtype">int</emphasis>&#32;i&#32;=&#32;0;&#32;format[i]&#32;!=&#32;<emphasis role="charliteral">&apos;\0&apos;</emphasis>;&#32;i++)
<anchor xml:id="_a16259_source_1l00287"/>00287 &#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00288"/>00288 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(format[i]&#32;==&#32;<emphasis role="charliteral">&apos;%&apos;</emphasis>)
<anchor xml:id="_a16259_source_1l00289"/>00289 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00290"/>00290 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;i++;
<anchor xml:id="_a16259_source_1l00291"/>00291 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_a16259_source_1l00292"/>00292 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;use_alternative_form&#32;=&#32;0;
<anchor xml:id="_a16259_source_1l00293"/>00293 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;zero_pad&#32;=&#32;0;
<anchor xml:id="_a16259_source_1l00294"/>00294 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;width&#32;=&#32;0;
<anchor xml:id="_a16259_source_1l00295"/>00295 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;precision&#32;=&#32;-1;
<anchor xml:id="_a16259_source_1l00296"/>00296 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_a16259_source_1l00297"/>00297 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;1.&#32;Flags</emphasis>
<anchor xml:id="_a16259_source_1l00298"/>00298 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;A&#32;boolean&#32;is&#32;clearer&#32;than&#32;using&#32;a&#32;while&#32;loop&#32;here</emphasis>
<anchor xml:id="_a16259_source_1l00299"/>00299 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(format[i]&#32;==&#32;<emphasis role="charliteral">&apos;#&apos;</emphasis>)&#32;{
<anchor xml:id="_a16259_source_1l00300"/>00300 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;use_alternative_form&#32;=&#32;1;
<anchor xml:id="_a16259_source_1l00301"/>00301 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;i++;
<anchor xml:id="_a16259_source_1l00302"/>00302 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00303"/>00303 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(format[i]&#32;==&#32;<emphasis role="charliteral">&apos;0&apos;</emphasis>)&#32;{
<anchor xml:id="_a16259_source_1l00304"/>00304 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;zero_pad&#32;=&#32;1;
<anchor xml:id="_a16259_source_1l00305"/>00305 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;i++;
<anchor xml:id="_a16259_source_1l00306"/>00306 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00307"/>00307 
<anchor xml:id="_a16259_source_1l00308"/>00308 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;2.&#32;Width</emphasis>
<anchor xml:id="_a16259_source_1l00309"/>00309 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">while</emphasis>&#32;(format[i]&#32;&gt;=&#32;<emphasis role="charliteral">&apos;0&apos;</emphasis>&#32;&amp;&amp;&#32;format[i]&#32;&lt;=&#32;<emphasis role="charliteral">&apos;9&apos;</emphasis>)&#32;{
<anchor xml:id="_a16259_source_1l00310"/>00310 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;width&#32;=&#32;width&#32;*&#32;10&#32;+&#32;(format[i]&#32;-&#32;<emphasis role="charliteral">&apos;0&apos;</emphasis>);
<anchor xml:id="_a16259_source_1l00311"/>00311 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;i++;
<anchor xml:id="_a16259_source_1l00312"/>00312 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00313"/>00313 
<anchor xml:id="_a16259_source_1l00314"/>00314 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;3.&#32;Precision</emphasis>
<anchor xml:id="_a16259_source_1l00315"/>00315 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(format[i]&#32;==&#32;<emphasis role="charliteral">&apos;.&apos;</emphasis>)&#32;{
<anchor xml:id="_a16259_source_1l00316"/>00316 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;i++;
<anchor xml:id="_a16259_source_1l00317"/>00317 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;precision&#32;=&#32;0;
<anchor xml:id="_a16259_source_1l00318"/>00318 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">while</emphasis>&#32;(format[i]&#32;&gt;=&#32;<emphasis role="charliteral">&apos;0&apos;</emphasis>&#32;&amp;&amp;&#32;format[i]&#32;&lt;=&#32;<emphasis role="charliteral">&apos;9&apos;</emphasis>)&#32;{
<anchor xml:id="_a16259_source_1l00319"/>00319 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;precision&#32;=&#32;precision&#32;*&#32;10&#32;+&#32;(format[i]&#32;-&#32;<emphasis role="charliteral">&apos;0&apos;</emphasis>);
<anchor xml:id="_a16259_source_1l00320"/>00320 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;i++;
<anchor xml:id="_a16259_source_1l00321"/>00321 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00322"/>00322 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;zero_pad&#32;=&#32;0;
<anchor xml:id="_a16259_source_1l00323"/>00323 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00324"/>00324 
<anchor xml:id="_a16259_source_1l00325"/>00325 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;4.&#32;Length&#32;Modifiers</emphasis>
<anchor xml:id="_a16259_source_1l00326"/>00326 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;is_long&#32;=&#32;0,&#32;is_long_long&#32;=&#32;0,&#32;is_short&#32;=&#32;0,&#32;is_char&#32;=&#32;0;
<anchor xml:id="_a16259_source_1l00327"/>00327 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(format[i]&#32;==&#32;<emphasis role="charliteral">&apos;l&apos;</emphasis>)&#32;{
<anchor xml:id="_a16259_source_1l00328"/>00328 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;is_long&#32;=&#32;1;&#32;i++;
<anchor xml:id="_a16259_source_1l00329"/>00329 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(format[i]&#32;==&#32;<emphasis role="charliteral">&apos;l&apos;</emphasis>)&#32;{&#32;is_long_long&#32;=&#32;1;&#32;is_long&#32;=&#32;0;&#32;i++;&#32;}
<anchor xml:id="_a16259_source_1l00330"/>00330 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}&#32;<emphasis role="keywordflow">else</emphasis>&#32;<emphasis role="keywordflow">if</emphasis>&#32;(format[i]&#32;==&#32;<emphasis role="charliteral">&apos;h&apos;</emphasis>)&#32;{
<anchor xml:id="_a16259_source_1l00331"/>00331 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;is_short&#32;=&#32;1;&#32;i++;
<anchor xml:id="_a16259_source_1l00332"/>00332 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(format[i]&#32;==&#32;<emphasis role="charliteral">&apos;h&apos;</emphasis>)&#32;{&#32;is_char&#32;=&#32;1;&#32;is_short&#32;=&#32;0;&#32;i++;&#32;}
<anchor xml:id="_a16259_source_1l00333"/>00333 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00334"/>00334 
<anchor xml:id="_a16259_source_1l00335"/>00335 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;---&#32;Handle&#32;Specifiers&#32;---</emphasis>
<anchor xml:id="_a16259_source_1l00336"/>00336 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">switch</emphasis>&#32;(format[i])
<anchor xml:id="_a16259_source_1l00337"/>00337 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00338"/>00338 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<emphasis role="charliteral">&apos;c&apos;</emphasis>:
<anchor xml:id="_a16259_source_1l00339"/>00339 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;char_str[0]&#32;=&#32;(char)va_arg(args,&#32;<emphasis role="keywordtype">int</emphasis>);
<anchor xml:id="_a16259_source_1l00340"/>00340 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16259_1a6bd99ada5f7c46567ee0ceca6c369d47">printCharStr</link>(char_str);
<anchor xml:id="_a16259_source_1l00341"/>00341 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;chars_written++;
<anchor xml:id="_a16259_source_1l00342"/>00342 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="_a16259_source_1l00343"/>00343 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<emphasis role="charliteral">&apos;s&apos;</emphasis>:
<anchor xml:id="_a16259_source_1l00344"/>00344 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00345"/>00345 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">char</emphasis>&#32;*str&#32;=&#32;va_arg(args,&#32;<emphasis role="keywordtype">char</emphasis>&#32;*);
<anchor xml:id="_a16259_source_1l00346"/>00346 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(!str)&#32;{
<anchor xml:id="_a16259_source_1l00347"/>00347 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;str&#32;=&#32;<emphasis role="stringliteral">&quot;(null)&quot;</emphasis>;
<anchor xml:id="_a16259_source_1l00348"/>00348 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00349"/>00349 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;<link linkend="_a16226_1a6de3a6d27a7e07942958b912d39792e6">len</link>&#32;=&#32;0;
<anchor xml:id="_a16259_source_1l00350"/>00350 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">while</emphasis>&#32;(str[<link linkend="_a16226_1a6de3a6d27a7e07942958b912d39792e6">len</link>])&#32;{
<anchor xml:id="_a16259_source_1l00351"/>00351 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16226_1a6de3a6d27a7e07942958b912d39792e6">len</link>++;
<anchor xml:id="_a16259_source_1l00352"/>00352 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00353"/>00353 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16259_1a6bd99ada5f7c46567ee0ceca6c369d47">printCharStr</link>(str);
<anchor xml:id="_a16259_source_1l00354"/>00354 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;chars_written&#32;+=&#32;<link linkend="_a16226_1a6de3a6d27a7e07942958b912d39792e6">len</link>;
<anchor xml:id="_a16259_source_1l00355"/>00355 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="_a16259_source_1l00356"/>00356 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00357"/>00357 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<emphasis role="charliteral">&apos;f&apos;</emphasis>:
<anchor xml:id="_a16259_source_1l00358"/>00358 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00359"/>00359 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16259_1af382674e4c9fb57a14b178d4ee12273a">doubleToString</link>(va_arg(args,&#32;<emphasis role="keywordtype">double</emphasis>),&#32;buffer,&#32;precision);
<anchor xml:id="_a16259_source_1l00360"/>00360 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;<link linkend="_a16226_1a6de3a6d27a7e07942958b912d39792e6">len</link>&#32;=&#32;0;
<anchor xml:id="_a16259_source_1l00361"/>00361 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">while</emphasis>(buffer[<link linkend="_a16226_1a6de3a6d27a7e07942958b912d39792e6">len</link>])&#32;{
<anchor xml:id="_a16259_source_1l00362"/>00362 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16226_1a6de3a6d27a7e07942958b912d39792e6">len</link>++;
<anchor xml:id="_a16259_source_1l00363"/>00363 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00364"/>00364 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16259_1a6bd99ada5f7c46567ee0ceca6c369d47">printCharStr</link>(buffer);
<anchor xml:id="_a16259_source_1l00365"/>00365 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;chars_written&#32;+=&#32;<link linkend="_a16226_1a6de3a6d27a7e07942958b912d39792e6">len</link>;
<anchor xml:id="_a16259_source_1l00366"/>00366 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="_a16259_source_1l00367"/>00367 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00368"/>00368 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<emphasis role="charliteral">&apos;d&apos;</emphasis>:&#32;<emphasis role="keywordflow">case</emphasis>&#32;<emphasis role="charliteral">&apos;i&apos;</emphasis>:&#32;<emphasis role="keywordflow">case</emphasis>&#32;<emphasis role="charliteral">&apos;u&apos;</emphasis>:&#32;<emphasis role="keywordflow">case</emphasis>&#32;<emphasis role="charliteral">&apos;x&apos;</emphasis>:&#32;<emphasis role="keywordflow">case</emphasis>&#32;<emphasis role="charliteral">&apos;X&apos;</emphasis>:&#32;<emphasis role="keywordflow">case</emphasis>&#32;<emphasis role="charliteral">&apos;b&apos;</emphasis>:&#32;<emphasis role="keywordflow">case</emphasis>&#32;<emphasis role="charliteral">&apos;o&apos;</emphasis>:
<anchor xml:id="_a16259_source_1l00369"/>00369 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00370"/>00370 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">unsigned</emphasis>&#32;<emphasis role="keywordtype">long</emphasis>&#32;<emphasis role="keywordtype">long</emphasis>&#32;val;
<anchor xml:id="_a16259_source_1l00371"/>00371 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;<link linkend="_a16253_1ad516e6ff5b7dd7f6ce2946c527ddb8b9">base</link>&#32;=&#32;10;
<anchor xml:id="_a16259_source_1l00372"/>00372 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;uppercase&#32;=&#32;0;
<anchor xml:id="_a16259_source_1l00373"/>00373 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">char</emphasis>&#32;sign_char&#32;=&#32;0;
<anchor xml:id="_a16259_source_1l00374"/>00374 
<anchor xml:id="_a16259_source_1l00375"/>00375 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(format[i]&#32;==&#32;<emphasis role="charliteral">&apos;d&apos;</emphasis>&#32;||&#32;format[i]&#32;==&#32;<emphasis role="charliteral">&apos;i&apos;</emphasis>)&#32;{
<anchor xml:id="_a16259_source_1l00376"/>00376 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">long</emphasis>&#32;<emphasis role="keywordtype">long</emphasis>&#32;signed_val;
<anchor xml:id="_a16259_source_1l00377"/>00377 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(is_long_long)&#32;signed_val&#32;=&#32;va_arg(args,&#32;<emphasis role="keywordtype">long</emphasis>&#32;<emphasis role="keywordtype">long</emphasis>);
<anchor xml:id="_a16259_source_1l00378"/>00378 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>&#32;<emphasis role="keywordflow">if</emphasis>&#32;(is_long)&#32;signed_val&#32;=&#32;va_arg(args,&#32;<emphasis role="keywordtype">long</emphasis>);
<anchor xml:id="_a16259_source_1l00379"/>00379 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>&#32;<emphasis role="keywordflow">if</emphasis>&#32;(is_char)&#32;signed_val&#32;=&#32;(<emphasis role="keywordtype">signed</emphasis>&#32;char)va_arg(args,&#32;<emphasis role="keywordtype">int</emphasis>);
<anchor xml:id="_a16259_source_1l00380"/>00380 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>&#32;<emphasis role="keywordflow">if</emphasis>&#32;(is_short)&#32;signed_val&#32;=&#32;(short)va_arg(args,&#32;<emphasis role="keywordtype">int</emphasis>);
<anchor xml:id="_a16259_source_1l00381"/>00381 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>&#32;signed_val&#32;=&#32;va_arg(args,&#32;<emphasis role="keywordtype">int</emphasis>);
<anchor xml:id="_a16259_source_1l00382"/>00382 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_a16259_source_1l00383"/>00383 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(signed_val&#32;&lt;&#32;0)&#32;{
<anchor xml:id="_a16259_source_1l00384"/>00384 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;sign_char&#32;=&#32;<emphasis role="charliteral">&apos;-&apos;</emphasis>;
<anchor xml:id="_a16259_source_1l00385"/>00385 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;val&#32;=&#32;-signed_val;
<anchor xml:id="_a16259_source_1l00386"/>00386 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}&#32;<emphasis role="keywordflow">else</emphasis>&#32;{
<anchor xml:id="_a16259_source_1l00387"/>00387 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;val&#32;=&#32;signed_val;
<anchor xml:id="_a16259_source_1l00388"/>00388 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00389"/>00389 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}&#32;<emphasis role="keywordflow">else</emphasis>&#32;{
<anchor xml:id="_a16259_source_1l00390"/>00390 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(is_long_long)&#32;val&#32;=&#32;va_arg(args,&#32;<emphasis role="keywordtype">unsigned</emphasis>&#32;<emphasis role="keywordtype">long</emphasis>&#32;<emphasis role="keywordtype">long</emphasis>);
<anchor xml:id="_a16259_source_1l00391"/>00391 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>&#32;<emphasis role="keywordflow">if</emphasis>&#32;(is_long)&#32;val&#32;=&#32;va_arg(args,&#32;<emphasis role="keywordtype">unsigned</emphasis>&#32;<emphasis role="keywordtype">long</emphasis>);
<anchor xml:id="_a16259_source_1l00392"/>00392 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>&#32;<emphasis role="keywordflow">if</emphasis>&#32;(is_char)&#32;val&#32;=&#32;(<emphasis role="keywordtype">unsigned</emphasis>&#32;char)va_arg(args,&#32;<emphasis role="keywordtype">unsigned</emphasis>&#32;<emphasis role="keywordtype">int</emphasis>);
<anchor xml:id="_a16259_source_1l00393"/>00393 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>&#32;<emphasis role="keywordflow">if</emphasis>&#32;(is_short)&#32;val&#32;=&#32;(<emphasis role="keywordtype">unsigned</emphasis>&#32;short)va_arg(args,&#32;<emphasis role="keywordtype">unsigned</emphasis>&#32;<emphasis role="keywordtype">int</emphasis>);
<anchor xml:id="_a16259_source_1l00394"/>00394 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>&#32;val&#32;=&#32;va_arg(args,&#32;<emphasis role="keywordtype">unsigned</emphasis>&#32;<emphasis role="keywordtype">int</emphasis>);
<anchor xml:id="_a16259_source_1l00395"/>00395 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00396"/>00396 
<anchor xml:id="_a16259_source_1l00397"/>00397 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">switch</emphasis>(format[i])&#32;{
<anchor xml:id="_a16259_source_1l00398"/>00398 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<emphasis role="charliteral">&apos;x&apos;</emphasis>:&#32;<link linkend="_a16253_1ad516e6ff5b7dd7f6ce2946c527ddb8b9">base</link>&#32;=&#32;16;&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="_a16259_source_1l00399"/>00399 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<emphasis role="charliteral">&apos;X&apos;</emphasis>:&#32;<link linkend="_a16253_1ad516e6ff5b7dd7f6ce2946c527ddb8b9">base</link>&#32;=&#32;16;&#32;uppercase&#32;=&#32;1;&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="_a16259_source_1l00400"/>00400 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<emphasis role="charliteral">&apos;b&apos;</emphasis>:&#32;<link linkend="_a16253_1ad516e6ff5b7dd7f6ce2946c527ddb8b9">base</link>&#32;=&#32;2;&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="_a16259_source_1l00401"/>00401 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<emphasis role="charliteral">&apos;o&apos;</emphasis>:&#32;<link linkend="_a16253_1ad516e6ff5b7dd7f6ce2946c527ddb8b9">base</link>&#32;=&#32;8;&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="_a16259_source_1l00402"/>00402 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00403"/>00403 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_a16259_source_1l00404"/>00404 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16259_1a14bf754296559bf0266e127e677e8107">ullToString</link>(val,&#32;buffer,&#32;<link linkend="_a16253_1ad516e6ff5b7dd7f6ce2946c527ddb8b9">base</link>,&#32;0,&#32;uppercase);
<anchor xml:id="_a16259_source_1l00405"/>00405 
<anchor xml:id="_a16259_source_1l00406"/>00406 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">char</emphasis>*&#32;prefix&#32;=&#32;<emphasis role="stringliteral">&quot;&quot;</emphasis>;
<anchor xml:id="_a16259_source_1l00407"/>00407 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(use_alternative_form&#32;&amp;&amp;&#32;val&#32;!=&#32;0)&#32;{
<anchor xml:id="_a16259_source_1l00408"/>00408 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">switch</emphasis>(format[i])&#32;{
<anchor xml:id="_a16259_source_1l00409"/>00409 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<emphasis role="charliteral">&apos;x&apos;</emphasis>:&#32;prefix&#32;=&#32;<emphasis role="stringliteral">&quot;0x&quot;</emphasis>;&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="_a16259_source_1l00410"/>00410 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<emphasis role="charliteral">&apos;X&apos;</emphasis>:&#32;prefix&#32;=&#32;<emphasis role="stringliteral">&quot;0X&quot;</emphasis>;&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="_a16259_source_1l00411"/>00411 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<emphasis role="charliteral">&apos;b&apos;</emphasis>:&#32;prefix&#32;=&#32;<emphasis role="stringliteral">&quot;0b&quot;</emphasis>;&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="_a16259_source_1l00412"/>00412 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<emphasis role="charliteral">&apos;o&apos;</emphasis>:&#32;prefix&#32;=&#32;<emphasis role="stringliteral">&quot;0&quot;</emphasis>;&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="_a16259_source_1l00413"/>00413 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00414"/>00414 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00415"/>00415 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_a16259_source_1l00416"/>00416 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;num_len&#32;=&#32;0;&#32;<emphasis role="keywordflow">while</emphasis>(buffer[num_len])&#32;num_len++;
<anchor xml:id="_a16259_source_1l00417"/>00417 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;prefix_len&#32;=&#32;0;&#32;<emphasis role="keywordflow">while</emphasis>(prefix[prefix_len])&#32;prefix_len++;
<anchor xml:id="_a16259_source_1l00418"/>00418 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_a16259_source_1l00419"/>00419 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;precision_pads&#32;=&#32;(precision&#32;&gt;&#32;num_len)&#32;?&#32;(precision&#32;-&#32;num_len)&#32;:&#32;0;
<anchor xml:id="_a16259_source_1l00420"/>00420 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;total_len&#32;=&#32;num_len&#32;+&#32;(sign_char&#32;?&#32;1&#32;:&#32;0)&#32;+&#32;prefix_len&#32;+&#32;precision_pads;
<anchor xml:id="_a16259_source_1l00421"/>00421 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;width_pads&#32;=&#32;(width&#32;&gt;&#32;total_len)&#32;?&#32;(width&#32;-&#32;total_len)&#32;:&#32;0;
<anchor xml:id="_a16259_source_1l00422"/>00422 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_a16259_source_1l00423"/>00423 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;chars_written&#32;+=&#32;width_pads&#32;+&#32;total_len;
<anchor xml:id="_a16259_source_1l00424"/>00424 
<anchor xml:id="_a16259_source_1l00425"/>00425 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(!zero_pad&#32;&amp;&amp;&#32;width_pads&#32;&gt;&#32;0)&#32;{
<anchor xml:id="_a16259_source_1l00426"/>00426 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(<emphasis role="keywordtype">int</emphasis>&#32;j&#32;=&#32;0;&#32;j&#32;&lt;&#32;width_pads;&#32;j++)&#32;<link linkend="_a16259_1a6bd99ada5f7c46567ee0ceca6c369d47">printCharStr</link>(<emphasis role="stringliteral">&quot;&#32;&quot;</emphasis>);
<anchor xml:id="_a16259_source_1l00427"/>00427 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00428"/>00428 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(sign_char)&#32;{
<anchor xml:id="_a16259_source_1l00429"/>00429 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;char_str[0]&#32;=&#32;sign_char;&#32;<link linkend="_a16259_1a6bd99ada5f7c46567ee0ceca6c369d47">printCharStr</link>(char_str);
<anchor xml:id="_a16259_source_1l00430"/>00430 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00431"/>00431 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(prefix_len&#32;&gt;&#32;0)&#32;<link linkend="_a16259_1a6bd99ada5f7c46567ee0ceca6c369d47">printCharStr</link>(prefix);
<anchor xml:id="_a16259_source_1l00432"/>00432 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(zero_pad&#32;&amp;&amp;&#32;width_pads&#32;&gt;&#32;0)&#32;{
<anchor xml:id="_a16259_source_1l00433"/>00433 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(<emphasis role="keywordtype">int</emphasis>&#32;j&#32;=&#32;0;&#32;j&#32;&lt;&#32;width_pads;&#32;j++)&#32;<link linkend="_a16259_1a6bd99ada5f7c46567ee0ceca6c369d47">printCharStr</link>(<emphasis role="stringliteral">&quot;0&quot;</emphasis>);
<anchor xml:id="_a16259_source_1l00434"/>00434 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00435"/>00435 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(precision_pads&#32;&gt;&#32;0)&#32;{
<anchor xml:id="_a16259_source_1l00436"/>00436 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(<emphasis role="keywordtype">int</emphasis>&#32;j&#32;=&#32;0;&#32;j&#32;&lt;&#32;precision_pads;&#32;j++)&#32;<link linkend="_a16259_1a6bd99ada5f7c46567ee0ceca6c369d47">printCharStr</link>(<emphasis role="stringliteral">&quot;0&quot;</emphasis>);
<anchor xml:id="_a16259_source_1l00437"/>00437 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00438"/>00438 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16259_1a6bd99ada5f7c46567ee0ceca6c369d47">printCharStr</link>(buffer);
<anchor xml:id="_a16259_source_1l00439"/>00439 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="_a16259_source_1l00440"/>00440 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00441"/>00441 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_a16259_source_1l00442"/>00442 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<emphasis role="charliteral">&apos;p&apos;</emphasis>:
<anchor xml:id="_a16259_source_1l00443"/>00443 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00444"/>00444 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16259_1a6bd99ada5f7c46567ee0ceca6c369d47">printCharStr</link>(<emphasis role="stringliteral">&quot;0x&quot;</emphasis>);
<anchor xml:id="_a16259_source_1l00445"/>00445 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;hex_digits&#32;=&#32;<emphasis role="keyword">sizeof</emphasis>(uintptr_t)&#32;*&#32;2;
<anchor xml:id="_a16259_source_1l00446"/>00446 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16259_1aab6eb585b409591414f84a1e3f606345">printHex</link>((uintptr_t)va_arg(args,&#32;<emphasis role="keywordtype">void</emphasis>&#32;*),&#32;hex_digits);
<anchor xml:id="_a16259_source_1l00447"/>00447 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;chars_written&#32;+=&#32;2&#32;+&#32;hex_digits;
<anchor xml:id="_a16259_source_1l00448"/>00448 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="_a16259_source_1l00449"/>00449 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00450"/>00450 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;<emphasis role="charliteral">&apos;%&apos;</emphasis>:
<anchor xml:id="_a16259_source_1l00451"/>00451 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16259_1a6bd99ada5f7c46567ee0ceca6c369d47">printCharStr</link>(<emphasis role="stringliteral">&quot;%&quot;</emphasis>);
<anchor xml:id="_a16259_source_1l00452"/>00452 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;chars_written++;
<anchor xml:id="_a16259_source_1l00453"/>00453 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="_a16259_source_1l00454"/>00454 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">default</emphasis>:
<anchor xml:id="_a16259_source_1l00455"/>00455 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16259_1a6bd99ada5f7c46567ee0ceca6c369d47">printCharStr</link>(<emphasis role="stringliteral">&quot;%&quot;</emphasis>);
<anchor xml:id="_a16259_source_1l00456"/>00456 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;char_str[0]&#32;=&#32;format[i];
<anchor xml:id="_a16259_source_1l00457"/>00457 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16259_1a6bd99ada5f7c46567ee0ceca6c369d47">printCharStr</link>(char_str);
<anchor xml:id="_a16259_source_1l00458"/>00458 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;chars_written&#32;+=&#32;2;
<anchor xml:id="_a16259_source_1l00459"/>00459 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>;
<anchor xml:id="_a16259_source_1l00460"/>00460 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00461"/>00461 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00462"/>00462 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>
<anchor xml:id="_a16259_source_1l00463"/>00463 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="_a16259_source_1l00464"/>00464 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;char_str[0]&#32;=&#32;format[i];
<anchor xml:id="_a16259_source_1l00465"/>00465 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a16259_1a6bd99ada5f7c46567ee0ceca6c369d47">printCharStr</link>(char_str);
<anchor xml:id="_a16259_source_1l00466"/>00466 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;chars_written++;
<anchor xml:id="_a16259_source_1l00467"/>00467 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00468"/>00468 &#32;&#32;&#32;&#32;}
<anchor xml:id="_a16259_source_1l00469"/>00469 &#32;&#32;&#32;&#32;va_end(args);
<anchor xml:id="_a16259_source_1l00470"/>00470 &#32;&#32;&#32;&#32;<link linkend="_a16284_1a9d1f0f838e646660db6d9284725c2b4c">update_cursor</link>(<link linkend="_a16259_1a133981c4ba48aed67a5b874f7b213583">cursor_x_</link>,&#32;<link linkend="_a16259_1a1bda227f31ddf346294cb531f7554ef3">cursor_y_</link>);
<anchor xml:id="_a16259_source_1l00471"/>00471 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;chars_written;
<anchor xml:id="_a16259_source_1l00472"/>00472 }
</programlisting></section>
