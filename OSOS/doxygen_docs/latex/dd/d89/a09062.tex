\doxysubsection{essential Namespace Reference}
\hypertarget{a09062}{}\label{a09062}\index{essential@{essential}}
\doxysubsubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{a09967}{atexit\+\_\+func\+\_\+entry\+\_\+t}}
\item 
class \mbox{\hyperlink{a09963}{GDT}}
\item 
class \mbox{\hyperlink{a09959}{GDT\+\_\+row}}
\end{DoxyCompactItemize}
\doxysubsubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{a09959}{essential\+::\+GDT\+\_\+row}} \mbox{\hyperlink{a09062_a52e3ec8c29cc4bb68f65445749f0bfdb}{\+\_\+\+\_\+attribute\+\_\+\+\_\+}} ((packed))
\item 
void \mbox{\hyperlink{a09062_a433c3d2d19d89890b522ac26b05fa7aa}{\+\_\+\+\_\+call\+Constructors}} ()
\item 
void \mbox{\hyperlink{a09062_a098e7240e26e869c035075be004b4ee9}{\+\_\+\+\_\+cxa\+\_\+finalize}} (void \texorpdfstring{$\ast$}{*}f)
\end{DoxyCompactItemize}


\doxysubsubsection{Function Documentation}
\Hypertarget{a09062_a52e3ec8c29cc4bb68f65445749f0bfdb}\label{a09062_a52e3ec8c29cc4bb68f65445749f0bfdb} 
\index{essential@{essential}!\_\_attribute\_\_@{\_\_attribute\_\_}}
\index{\_\_attribute\_\_@{\_\_attribute\_\_}!essential@{essential}}
\doxyparagraph{\texorpdfstring{\_\_attribute\_\_()}{\_\_attribute\_\_()}}
{\footnotesize\ttfamily class \mbox{\hyperlink{a09963}{essential\+::\+GDT}} essential\+::\+\_\+\+\_\+attribute\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{(packed)}]{ }\end{DoxyParamCaption})}

\Hypertarget{a09062_a433c3d2d19d89890b522ac26b05fa7aa}\label{a09062_a433c3d2d19d89890b522ac26b05fa7aa} 
\index{essential@{essential}!\_\_callConstructors@{\_\_callConstructors}}
\index{\_\_callConstructors@{\_\_callConstructors}!essential@{essential}}
\doxyparagraph{\texorpdfstring{\_\_callConstructors()}{\_\_callConstructors()}}
{\footnotesize\ttfamily void essential\+::\+\_\+\+\_\+call\+Constructors (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{a08978_source_l00006}{6}} of file \mbox{\hyperlink{a08978_source}{kicxxabi.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00006\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00007\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{void}\ (**p)()\ =\ \&\mbox{\hyperlink{a08978_a201d805094c80d48f8ee4e49ee85fb74}{ctors\_start}};\ p\ <\ \&\mbox{\hyperlink{a08978_a9a50b36f9886cd6bdbe05a5a6639cd95}{ctors\_end}};\ ++p)}
\DoxyCodeLine{00008\ \ \ \ \ \{}
\DoxyCodeLine{00009\ \ \ \ \ \ \ \ \ (*p)();\ \textcolor{comment}{//\ Call\ the\ constructor}}
\DoxyCodeLine{00010\ \ \ \ \ \}}
\DoxyCodeLine{00011\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{a08978_source_l00005}{ctors\+\_\+end}}, and \mbox{\hyperlink{a08978_source_l00004}{ctors\+\_\+start}}.



Referenced by \mbox{\hyperlink{a08990_source_l00085}{kernel\+Main()}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=343pt]{dd/d89/a09062_a433c3d2d19d89890b522ac26b05fa7aa_icgraph}
\end{center}
\end{figure}
\Hypertarget{a09062_a098e7240e26e869c035075be004b4ee9}\label{a09062_a098e7240e26e869c035075be004b4ee9} 
\index{essential@{essential}!\_\_cxa\_finalize@{\_\_cxa\_finalize}}
\index{\_\_cxa\_finalize@{\_\_cxa\_finalize}!essential@{essential}}
\doxyparagraph{\texorpdfstring{\_\_cxa\_finalize()}{\_\_cxa\_finalize()}}
{\footnotesize\ttfamily void essential\+::\+\_\+\+\_\+cxa\+\_\+finalize (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}}]{f }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{a08978_source_l00040}{40}} of file \mbox{\hyperlink{a08978_source}{kicxxabi.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00041\ \{}
\DoxyCodeLine{00042\ \ \ \ \ \mbox{\hyperlink{a09050_a35fc01d4eba01f3f2ec636bd6b5ff34f}{uarch\_t}}\ i\ =\ \mbox{\hyperlink{a08978_a0f75f529cf75cf0a9cd266f8d67675dc}{\_\_atexit\_func\_count}};}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keywordflow}{if}\ (!f)}
\DoxyCodeLine{00044\ \ \ \ \ \{}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00046\ \textcolor{comment}{\ \ \ \ \ \ \ \ *\ According\ to\ the\ Itanium\ C++\ ABI,\ if\ essential::\_\_cxa\_finalize\ is\ called\ without\ a}}
\DoxyCodeLine{00047\ \textcolor{comment}{\ \ \ \ \ \ \ \ *\ function\ ptr,\ then\ it\ means\ that\ we\ should\ destroy\ EVERYTHING\ MUAHAHAHA!!}}
\DoxyCodeLine{00048\ \textcolor{comment}{\ \ \ \ \ \ \ \ *}}
\DoxyCodeLine{00049\ \textcolor{comment}{\ \ \ \ \ \ \ \ *\ TODO:}}
\DoxyCodeLine{00050\ \textcolor{comment}{\ \ \ \ \ \ \ \ *\ Note\ well,\ however,\ that\ deleting\ a\ function\ from\ here\ that\ contains\ a\ \_\_dso\_handle}}
\DoxyCodeLine{00051\ \textcolor{comment}{\ \ \ \ \ \ \ \ *\ means\ that\ one\ link\ to\ a\ shared\ object\ file\ has\ been\ terminated.\ In\ other\ words,}}
\DoxyCodeLine{00052\ \textcolor{comment}{\ \ \ \ \ \ \ \ *\ We\ should\ monitor\ this\ list\ (optional,\ of\ course),\ since\ it\ tells\ us\ how\ many\ links\ to\ }}
\DoxyCodeLine{00053\ \textcolor{comment}{\ \ \ \ \ \ \ \ *\ an\ object\ file\ exist\ at\ runtime\ in\ a\ particular\ application.\ This\ can\ be\ used\ to\ tell\ }}
\DoxyCodeLine{00054\ \textcolor{comment}{\ \ \ \ \ \ \ \ *\ when\ a\ shared\ object\ is\ no\ longer\ in\ use.\ It\ is\ one\ of\ many\ methods,\ however.}}
\DoxyCodeLine{00055\ \textcolor{comment}{\ \ \ \ \ \ \ \ **/}}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \textcolor{comment}{//You\ may\ insert\ a\ prinf()\ here\ to\ tell\ you\ whether\ or\ not\ the\ function\ gets\ called.\ Testing}}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \textcolor{comment}{//is\ CRITICAL!}}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (i-\/-\/)}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{a08978_a05a64060e9039acf0ba3c311b2d981b7}{\_\_atexit\_funcs}}[i].destructor\_func)}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ \string^\string^\string^\ That\ if\ statement\ is\ a\ safeguard...}}
\DoxyCodeLine{00063\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ To\ make\ sure\ we\ don't\ call\ any\ entries\ that\ have\ already\ been\ called\ and\ unset\ at\ runtime.}}
\DoxyCodeLine{00064\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ Those\ will\ contain\ a\ value\ of\ 0,\ and\ calling\ a\ function\ with\ value\ 0}}
\DoxyCodeLine{00065\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ will\ cause\ undefined\ behaviour.\ Remember\ that\ linear\ address\ 0,\ }}
\DoxyCodeLine{00066\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ in\ a\ non-\/virtual\ address\ space\ (physical)\ contains\ the\ IVT\ and\ BDA.}}
\DoxyCodeLine{00067\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *}}
\DoxyCodeLine{00068\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ In\ a\ virtual\ environment,\ the\ kernel\ will\ receive\ a\ page\ fault,\ and\ then\ probably}}
\DoxyCodeLine{00069\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ map\ in\ some\ trash,\ or\ a\ blank\ page,\ or\ something\ stupid\ like\ that.}}
\DoxyCodeLine{00070\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ This\ will\ result\ in\ the\ processor\ executing\ trash,\ and...we\ don't\ want\ that.}}
\DoxyCodeLine{00071\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ **/}}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (*\mbox{\hyperlink{a08978_a05a64060e9039acf0ba3c311b2d981b7}{\_\_atexit\_funcs}}[i].\mbox{\hyperlink{a09967_a665175c477008154e9b40ef96a8d81c2}{destructor\_func}})(\mbox{\hyperlink{a08978_a05a64060e9039acf0ba3c311b2d981b7}{\_\_atexit\_funcs}}[i].obj\_ptr);}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00076\ \ \ \ \ \};}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordflow}{while}\ (i-\/-\/)}
\DoxyCodeLine{00079\ \ \ \ \ \{}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00081\ \textcolor{comment}{\ \ \ \ \ \ \ \ *\ The\ ABI\ states\ that\ multiple\ calls\ to\ the\ \_\_cxa\_finalize(destructor\_func\_ptr)\ function}}
\DoxyCodeLine{00082\ \textcolor{comment}{\ \ \ \ \ \ \ \ *\ should\ not\ destroy\ objects\ multiple\ times.\ Only\ one\ call\ is\ needed\ to\ eliminate\ multiple}}
\DoxyCodeLine{00083\ \textcolor{comment}{\ \ \ \ \ \ \ \ *\ entries\ with\ the\ same\ address.}}
\DoxyCodeLine{00084\ \textcolor{comment}{\ \ \ \ \ \ \ \ *}}
\DoxyCodeLine{00085\ \textcolor{comment}{\ \ \ \ \ \ \ \ *\ FIXME:}}
\DoxyCodeLine{00086\ \textcolor{comment}{\ \ \ \ \ \ \ \ *\ This\ presents\ the\ obvious\ problem:\ all\ destructors\ must\ be\ stored\ in\ the\ order\ they}}
\DoxyCodeLine{00087\ \textcolor{comment}{\ \ \ \ \ \ \ \ *\ were\ placed\ in\ the\ list.\ I.e:\ the\ last\ initialized\ object's\ destructor\ must\ be\ first}}
\DoxyCodeLine{00088\ \textcolor{comment}{\ \ \ \ \ \ \ \ *\ in\ the\ list\ of\ destructors\ to\ be\ called.\ But\ removing\ a\ destructor\ from\ the\ list\ at\ runtime}}
\DoxyCodeLine{00089\ \textcolor{comment}{\ \ \ \ \ \ \ \ *\ creates\ holes\ in\ the\ table\ with\ unfilled\ entries.}}
\DoxyCodeLine{00090\ \textcolor{comment}{\ \ \ \ \ \ \ \ *\ Remember\ that\ the\ insertion\ algorithm\ in\ \_\_cxa\_atexit\ simply\ inserts\ the\ next\ destructor}}
\DoxyCodeLine{00091\ \textcolor{comment}{\ \ \ \ \ \ \ \ *\ at\ the\ end\ of\ the\ table.\ So,\ we\ have\ holes\ with\ our\ current\ algorithm}}
\DoxyCodeLine{00092\ \textcolor{comment}{\ \ \ \ \ \ \ \ *\ This\ function\ should\ be\ modified\ to\ move\ all\ the\ destructors\ above\ the\ one\ currently}}
\DoxyCodeLine{00093\ \textcolor{comment}{\ \ \ \ \ \ \ \ *\ being\ called\ and\ removed\ one\ place\ down\ in\ the\ list,\ so\ as\ to\ cover\ up\ the\ hole.}}
\DoxyCodeLine{00094\ \textcolor{comment}{\ \ \ \ \ \ \ \ *\ Otherwise,\ whenever\ a\ destructor\ is\ called\ and\ removed,\ an\ entire\ space\ in\ the\ table\ is\ wasted.}}
\DoxyCodeLine{00095\ \textcolor{comment}{\ \ \ \ \ \ \ \ **/}}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{a08978_a05a64060e9039acf0ba3c311b2d981b7}{\_\_atexit\_funcs}}[i].destructor\_func\ ==\ f)}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ }}
\DoxyCodeLine{00099\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ *\ Note\ that\ in\ the\ next\ line,\ not\ every\ destructor\ function\ is\ a\ class\ destructor.}}
\DoxyCodeLine{00100\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ *\ It\ is\ perfectly\ legal\ to\ register\ a\ non\ class\ destructor\ function\ as\ a\ simple\ cleanup}}
\DoxyCodeLine{00101\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ *\ function\ to\ be\ called\ on\ program\ termination,\ in\ which\ case,\ it\ would\ not\ NEED\ an}}
\DoxyCodeLine{00102\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ *\ object\ This\ pointer.\ A\ smart\ programmer\ may\ even\ take\ advantage\ of\ this\ and\ register}}
\DoxyCodeLine{00103\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ *\ a\ C\ function\ in\ the\ table\ with\ the\ address\ of\ some\ structure\ containing\ data\ about}}
\DoxyCodeLine{00104\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ *\ what\ to\ clean\ up\ on\ exit.}}
\DoxyCodeLine{00105\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ *\ In\ the\ case\ of\ a\ function\ that\ takes\ no\ arguments,\ it\ will\ simply\ be\ ignore\ within\ the}}
\DoxyCodeLine{00106\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ *\ function\ itself.\ No\ worries.}}
\DoxyCodeLine{00107\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ **/}}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ (*\mbox{\hyperlink{a08978_a05a64060e9039acf0ba3c311b2d981b7}{\_\_atexit\_funcs}}[i].\mbox{\hyperlink{a09967_a665175c477008154e9b40ef96a8d81c2}{destructor\_func}})(\mbox{\hyperlink{a08978_a05a64060e9039acf0ba3c311b2d981b7}{\_\_atexit\_funcs}}[i].obj\_ptr);}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{a08978_a05a64060e9039acf0ba3c311b2d981b7}{\_\_atexit\_funcs}}[i].\mbox{\hyperlink{a09967_a665175c477008154e9b40ef96a8d81c2}{destructor\_func}}\ =\ 0;}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00112\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ *\ Notice\ that\ we\ didn't\ decrement\ \_\_atexit\_func\_count:\ this\ is\ because\ this\ algorithm}}
\DoxyCodeLine{00113\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ *\ requires\ patching\ to\ deal\ with\ the\ FIXME\ outlined\ above.}}
\DoxyCodeLine{00114\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ **/}}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00116\ \ \ \ \ \};}
\DoxyCodeLine{00117\ \};}

\end{DoxyCode}


References \mbox{\hyperlink{a08978_source_l00025}{\+\_\+\+\_\+atexit\+\_\+func\+\_\+count}}, \mbox{\hyperlink{a08978_source_l00024}{\+\_\+\+\_\+atexit\+\_\+funcs}}, and \mbox{\hyperlink{a09050_source_l00014}{essential\+::atexit\+\_\+func\+\_\+entry\+\_\+t\+::destructor\+\_\+func}}.



Referenced by \mbox{\hyperlink{a08990_source_l00085}{kernel\+Main()}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=322pt]{dd/d89/a09062_a098e7240e26e869c035075be004b4ee9_icgraph}
\end{center}
\end{figure}
