<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_a14594" xml:lang="en-US">
<title>driver::KeyboardDriver</title>
<indexterm><primary>driver::KeyboardDriver</primary></indexterm>
<para>
<computeroutput>#include &quot;kkeyboard.hpp&quot;</computeroutput>
</para>
Inheritance diagram for driver::KeyboardDriver:<para>
    <informalfigure>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="0" fileref="../../d9/dac/a14593.png"></imagedata>
            </imageobject>
        </mediaobject>
    </informalfigure>
</para>
Collaboration diagram for driver::KeyboardDriver:<para>
    <informalfigure>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="0" fileref="../../d6/d0f/a14592.png"></imagedata>
            </imageobject>
        </mediaobject>
    </informalfigure>
</para>
<simplesect>
    <title>Public Member Functions    </title>
        <itemizedlist>
            <listitem><para><link linkend="_a14594_1a63898e993f02352193db996d00179347">KeyboardDriver</link> (<link linkend="_a14626">hardware_communication::InterruptManager</link> *<link linkend="_a14618_1ae86f4eae0ce9272b2027d44bdfd71e33">interrupt_manager</link>, <link linkend="_a14590">KeyboardEventHandler</link> *<link linkend="_a14594_1a11ec84b7abf113ec270f124564776e1f">keyboardEventHandler</link>)</para>
</listitem>
            <listitem><para><link linkend="_a14594_1a77da196f3c04c549e1085ce5566e5df3">~KeyboardDriver</link> ()</para>
</listitem>
            <listitem><para>void <link linkend="_a14594_1a58553d39d7dcfe6b55e8ddb1e7b1d187">activate</link> () override</para>
</listitem>
            <listitem><para>void <link linkend="_a14594_1aaa7e99b6214dc8439230a95dd57e617e">deactivate</link> () override</para>
</listitem>
            <listitem><para>uint32_t <link linkend="_a14594_1a248fa0da9acac54a3a8880c7b66b3f2b">handleInterrupt</link> (uint32_t esp) override</para>
</listitem>
            <listitem><para>virtual uintptr_t <link linkend="_a14618_1aa89d41d69840cb4f1c8692fa6ded28f4">handleInterrupt</link> (uintptr_t esp)=0</para>
</listitem>
            <listitem><para>int <link linkend="_a14594_1a22b7b080ab1c8b0f2ed4beba75b34691">reset</link> () override</para>
</listitem>
        </itemizedlist>
</simplesect>
<simplesect>
    <title>Protected Attributes    </title>
        <itemizedlist>
            <listitem><para><link linkend="_a13682_1a6c5563315b1a2f5c67ae8b78d06e3c7f">InterruptManager</link> * <link linkend="_a14618_1ae86f4eae0ce9272b2027d44bdfd71e33">interrupt_manager</link></para>
</listitem>
            <listitem><para>uint8_t <link linkend="_a14618_1afeede822d3e98957e76e627a54ec2f7a">interruptNumber</link></para>
</listitem>
        </itemizedlist>
</simplesect>
<simplesect>
    <title>Private Attributes    </title>
        <itemizedlist>
            <listitem><para>bool <link linkend="_a14594_1a8a63dbc25a08a75f62ae0674df1deb30">caps_on</link></para>
</listitem>
            <listitem><para><link linkend="_a14634">hardware_communication::Port8Bit</link> <link linkend="_a14594_1a58fc9113701ffc04637996780c843ff0">commandPort</link></para>
</listitem>
            <listitem><para><link linkend="_a14634">hardware_communication::Port8Bit</link> <link linkend="_a14594_1afd6cdddb62a2a2d2b31043eb32887b41">dataPort</link></para>
</listitem>
            <listitem><para><link linkend="_a14590">KeyboardEventHandler</link> * <link linkend="_a14594_1a11ec84b7abf113ec270f124564776e1f">keyboardEventHandler</link></para>
</listitem>
            <listitem><para>uint8_t <link linkend="_a14594_1aed7b5d279f6f1dffee10d5fb92ed6b1c">led_byte_to_send</link></para>
</listitem>
            <listitem><para>bool <link linkend="_a14594_1afba07c783deebfb275c1437f7c23601d">shift_pressed</link></para>
</listitem>
            <listitem><para>bool <link linkend="_a14594_1a703464394033a8f4f664d9289ae2e9f8">waiting_for_led_ack</link></para>
</listitem>
        </itemizedlist>
</simplesect>
<section>
<title>Detailed Description</title>
<para>
Definition at line <link linkend="_a13688_source_1l00017">17</link> of file <link linkend="_a13688_source">kkeyboard.hpp</link>.</para>
</section>
<section>
<title>Constructor &amp; Destructor Documentation</title>
<anchor xml:id="_a14594_1a63898e993f02352193db996d00179347"/><section>
    <title>KeyboardDriver()</title>
<indexterm><primary>KeyboardDriver</primary><secondary>driver::KeyboardDriver</secondary></indexterm>
<indexterm><primary>driver::KeyboardDriver</primary><secondary>KeyboardDriver</secondary></indexterm>
<para><computeroutput>driver::KeyboardDriver::KeyboardDriver (<link linkend="_a14626">hardware_communication::InterruptManager</link> * interrupt_manager, <link linkend="_a14590">driver::KeyboardEventHandler</link> * keyboardEventHandler)</computeroutput></para><para>
Definition at line <link linkend="_a13646_source_1l00013">13</link> of file <link linkend="_a13646_source">kkeyboard.cpp</link>.</para>
<programlisting linenumbering="unnumbered">00014 :&#32;<link linkend="_a14618">hardware_communication::InterruptHandler</link>(0x21,&#32;<link linkend="_a14618_1ae86f4eae0ce9272b2027d44bdfd71e33">interrupt_manager</link>),&#32;
00015 &#32;&#32;<link linkend="_a14594_1afd6cdddb62a2a2d2b31043eb32887b41">dataPort</link>(0x60),&#32;
00016 &#32;&#32;<link linkend="_a14594_1a58fc9113701ffc04637996780c843ff0">commandPort</link>(0x64),
00017 &#32;&#32;<link linkend="_a14594_1afba07c783deebfb275c1437f7c23601d">shift_pressed</link>(<emphasis role="keyword">false</emphasis>),
00018 &#32;&#32;<link linkend="_a14594_1a8a63dbc25a08a75f62ae0674df1deb30">caps_on</link>(<emphasis role="keyword">false</emphasis>),
00019 &#32;&#32;<link linkend="_a14594_1a703464394033a8f4f664d9289ae2e9f8">waiting_for_led_ack</link>(<emphasis role="keyword">false</emphasis>){
00020 &#32;&#32;&#32;&#32;this-&gt;keyboardEventHandler=<link linkend="_a14594_1a11ec84b7abf113ec270f124564776e1f">keyboardEventHandler</link>;
00021 &#32;&#32;}
</programlisting><para>
References <link linkend="_a13688_source_1l00027">keyboardEventHandler</link>.</para>
</section>
<anchor xml:id="_a14594_1a77da196f3c04c549e1085ce5566e5df3"/><section>
    <title>~KeyboardDriver()</title>
<indexterm><primary>~KeyboardDriver</primary><secondary>driver::KeyboardDriver</secondary></indexterm>
<indexterm><primary>driver::KeyboardDriver</primary><secondary>~KeyboardDriver</secondary></indexterm>
<para><computeroutput>driver::KeyboardDriver::~KeyboardDriver ( )</computeroutput></para><para>
Definition at line <link linkend="_a13646_source_1l00023">23</link> of file <link linkend="_a13646_source">kkeyboard.cpp</link>.</para>
<programlisting linenumbering="unnumbered">00023 {}
</programlisting></section>
</section>
<section>
<title>Member Function Documentation</title>
<anchor xml:id="_a14594_1a58553d39d7dcfe6b55e8ddb1e7b1d187"/><section>
    <title>activate()</title>
<indexterm><primary>activate</primary><secondary>driver::KeyboardDriver</secondary></indexterm>
<indexterm><primary>driver::KeyboardDriver</primary><secondary>activate</secondary></indexterm>
<para><computeroutput>void driver::KeyboardDriver::activate ( )<computeroutput>[override]</computeroutput>, <computeroutput>[virtual]</computeroutput></computeroutput></para><para>
Implements <link linkend="_a14582_1a8c86c1e52652d8b491d37a3b60b535b0">driver::Driver</link>.</para>
<para>
Definition at line <link linkend="_a13646_source_1l00167">167</link> of file <link linkend="_a13646_source">kkeyboard.cpp</link>.</para>
<programlisting linenumbering="unnumbered">00167 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00168 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">while</emphasis>(<link linkend="_a14594_1a58fc9113701ffc04637996780c843ff0">commandPort</link>.<link linkend="_a14634_1ae8688251b574c3fd335b99f7e93fff2d">read</link>()&#32;&amp;&#32;1)&#32;<link linkend="_a14594_1afd6cdddb62a2a2d2b31043eb32887b41">dataPort</link>.<link linkend="_a14634_1ae8688251b574c3fd335b99f7e93fff2d">read</link>();
00169 &#32;&#32;&#32;&#32;<link linkend="_a14594_1a58fc9113701ffc04637996780c843ff0">commandPort</link>.<link linkend="_a14634_1a523b6a757b27418dc015ed13e74bef60">write</link>(0xAE);&#32;<emphasis role="comment">//&#32;activate&#32;communication&#32;for&#32;keyboard</emphasis>
00170 &#32;&#32;&#32;&#32;<link linkend="_a14594_1a58fc9113701ffc04637996780c843ff0">commandPort</link>.<link linkend="_a14634_1a523b6a757b27418dc015ed13e74bef60">write</link>(0x20);&#32;<emphasis role="comment">//&#32;get&#32;current&#32;state</emphasis>
00171 &#32;&#32;&#32;&#32;uint8_t&#32;status&#32;=&#32;(<link linkend="_a14594_1afd6cdddb62a2a2d2b31043eb32887b41">dataPort</link>.<link linkend="_a14634_1ae8688251b574c3fd335b99f7e93fff2d">read</link>()&#32;|&#32;1)&#32;&amp;&#32;~0x10;&#32;<emphasis role="comment">//&#32;set&#32;LSB&#32;and&#32;clear&#32;5th&#32;bit</emphasis>
00172 &#32;&#32;&#32;&#32;<link linkend="_a14594_1a58fc9113701ffc04637996780c843ff0">commandPort</link>.<link linkend="_a14634_1a523b6a757b27418dc015ed13e74bef60">write</link>(0x60);&#32;<emphasis role="comment">//&#32;set&#32;state</emphasis>
00173 &#32;&#32;&#32;&#32;<link linkend="_a14594_1afd6cdddb62a2a2d2b31043eb32887b41">dataPort</link>.<link linkend="_a14634_1a523b6a757b27418dc015ed13e74bef60">write</link>(status);
00174 &#32;&#32;&#32;&#32;<link linkend="_a14594_1afd6cdddb62a2a2d2b31043eb32887b41">dataPort</link>.<link linkend="_a14634_1a523b6a757b27418dc015ed13e74bef60">write</link>(0xF4);
00175 &#32;&#32;&#32;&#32;<link linkend="_a13707_1a45ee52b918a784ff0e96e7c8917a91d9">basic::printf</link>(<emphasis role="stringliteral">&quot;Keyboard&#32;Driver&#32;activated!\n&quot;</emphasis>);
00176 }
</programlisting><para>
References <link linkend="_a13631_source_1l00276">basic::printf()</link>.</para>
Here is the call graph for this function:<para>
    <informalfigure>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="0" fileref="../../d6/d56/a14594_a58553d39d7dcfe6b55e8ddb1e7b1d187_cgraph.png"></imagedata>
            </imageobject>
        </mediaobject>
    </informalfigure>
</para>
</section>
<anchor xml:id="_a14594_1aaa7e99b6214dc8439230a95dd57e617e"/><section>
    <title>deactivate()</title>
<indexterm><primary>deactivate</primary><secondary>driver::KeyboardDriver</secondary></indexterm>
<indexterm><primary>driver::KeyboardDriver</primary><secondary>deactivate</secondary></indexterm>
<para><computeroutput>void driver::KeyboardDriver::deactivate ( )<computeroutput>[override]</computeroutput>, <computeroutput>[virtual]</computeroutput></computeroutput></para><para>
Implements <link linkend="_a14582_1a4b3b5e5a163c2c0e3cb58ea752ebcef1">driver::Driver</link>.</para>
<para>
Definition at line <link linkend="_a13646_source_1l00179">179</link> of file <link linkend="_a13646_source">kkeyboard.cpp</link>.</para>
<programlisting linenumbering="unnumbered">00179 {}
</programlisting></section>
<anchor xml:id="_a14594_1a248fa0da9acac54a3a8880c7b66b3f2b"/><section>
    <title>handleInterrupt()<computeroutput>[1/2]</computeroutput></title>
<indexterm><primary>handleInterrupt</primary><secondary>driver::KeyboardDriver</secondary></indexterm>
<indexterm><primary>driver::KeyboardDriver</primary><secondary>handleInterrupt</secondary></indexterm>
<para><computeroutput>uint32_t driver::KeyboardDriver::handleInterrupt (uint32_t esp)<computeroutput>[override]</computeroutput></computeroutput></para><para>
Definition at line <link linkend="_a13646_source_1l00025">25</link> of file <link linkend="_a13646_source">kkeyboard.cpp</link>.</para>
<programlisting linenumbering="unnumbered">00025 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00026 &#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Unshifted&#32;keys</emphasis>
00027 &#32;&#32;&#32;&#32;<emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">char</emphasis>&#32;scancode_no_shift[]&#32;=&#32;{
00028 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;0,&#32;&#32;&#32;0,&#32;<emphasis role="charliteral">&apos;1&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;2&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;3&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;4&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;5&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;6&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;7&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;8&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;9&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;0&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;-&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;=&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;\b&apos;</emphasis>,
00029 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="charliteral">&apos;\t&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;q&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;w&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;e&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;r&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;t&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;y&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;u&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;i&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;o&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;p&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;[&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;]&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;\n&apos;</emphasis>,
00030 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;0,&#32;<emphasis role="charliteral">&apos;a&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;s&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;d&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;f&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;g&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;h&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;j&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;k&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;l&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;;&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;\&apos;&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;`&apos;</emphasis>,&#32;0,
00031 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="charliteral">&apos;\\&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;z&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;x&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;c&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;v&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;b&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;n&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;m&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;,&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;.&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;/&apos;</emphasis>,&#32;0,&#32;<emphasis role="charliteral">&apos;*&apos;</emphasis>,&#32;0,
00032 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="charliteral">&apos;&#32;&apos;</emphasis>,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,
00033 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,
00034 &#32;&#32;&#32;&#32;};
00035 
00036 &#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Shifted&#32;keys</emphasis>
00037 &#32;&#32;&#32;&#32;<emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">char</emphasis>&#32;scancode_shifted[]&#32;=&#32;{
00038 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;0,&#32;&#32;&#32;0,&#32;<emphasis role="charliteral">&apos;!&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;@&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;#&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;$&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;%&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;^&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;&amp;&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;*&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;(&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;)&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;_&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;+&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;\b&apos;</emphasis>,
00039 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="charliteral">&apos;\t&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;Q&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;W&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;E&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;R&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;T&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;Y&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;U&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;I&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;O&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;P&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;{&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;}&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;\n&apos;</emphasis>,
00040 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;0,&#32;<emphasis role="charliteral">&apos;A&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;S&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;D&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;F&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;G&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;H&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;J&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;K&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;L&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;:&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;&quot;&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;~&apos;</emphasis>,&#32;0,
00041 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="charliteral">&apos;|&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;Z&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;X&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;C&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;V&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;B&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;N&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;M&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;&lt;&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;&gt;&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;?&apos;</emphasis>,&#32;0,&#32;<emphasis role="charliteral">&apos;*&apos;</emphasis>,&#32;0,
00042 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="charliteral">&apos;&#32;&apos;</emphasis>,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,
00043 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;0,&#32;0,&#32;0,&#32;0,&#32;0,
00044 &#32;&#32;&#32;&#32;};
00045 
00046 &#32;&#32;&#32;&#32;uint8_t&#32;scancode&#32;=&#32;<link linkend="_a14594_1afd6cdddb62a2a2d2b31043eb32887b41">dataPort</link>.<link linkend="_a14634_1ae8688251b574c3fd335b99f7e93fff2d">read</link>();
00047 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>(<link linkend="_a14594_1a11ec84b7abf113ec270f124564776e1f">keyboardEventHandler</link>==0)&#32;<emphasis role="keywordflow">return</emphasis>&#32;esp;&#32;<emphasis role="comment">//if&#32;dont&#32;have&#32;any&#32;handler&#32;just&#32;return</emphasis>
00048 
00049 
00050 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(this-&gt;<link linkend="_a14594_1a703464394033a8f4f664d9289ae2e9f8">waiting_for_led_ack</link>)&#32;{
00051 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(scancode&#32;==&#32;0xFA)&#32;{&#32;<emphasis role="comment">//&#32;Got&#32;ACK</emphasis>
00052 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a14594_1afd6cdddb62a2a2d2b31043eb32887b41">dataPort</link>.<link linkend="_a14634_1a523b6a757b27418dc015ed13e74bef60">write</link>(this-&gt;<link linkend="_a14594_1aed7b5d279f6f1dffee10d5fb92ed6b1c">led_byte_to_send</link>);
00053 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;this-&gt;<link linkend="_a14594_1a703464394033a8f4f664d9289ae2e9f8">waiting_for_led_ack</link>&#32;=&#32;<emphasis role="keyword">false</emphasis>;
00054 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00055 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;If&#32;we&#32;get&#32;something&#32;else,&#32;the&#32;keyboard&#32;is&#32;out&#32;of&#32;sync.</emphasis>
00056 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;We&apos;ll&#32;just&#32;drop&#32;out&#32;of&#32;the&#32;ACK-waiting&#32;state&#32;and&#32;process</emphasis>
00057 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;the&#32;scancode&#32;normally&#32;(by&#32;falling&#32;through).</emphasis>
00058 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>&#32;{
00059 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;this-&gt;<link linkend="_a14594_1a703464394033a8f4f664d9289ae2e9f8">waiting_for_led_ack</link>&#32;=&#32;<emphasis role="keyword">false</emphasis>;
00060 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00061 
00062 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;If&#32;we&#32;got&#32;the&#32;ACK,&#32;we&apos;re&#32;done&#32;for&#32;this&#32;interrupt.</emphasis>
00063 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(scancode&#32;==&#32;0xFA)&#32;{
00064 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;esp;
00065 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00066 &#32;&#32;&#32;&#32;}
00067 
00068 
00069 &#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Check&#32;for&#32;key&#32;release</emphasis>
00070 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(scancode&#32;&amp;&#32;0x80)&#32;{
00071 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;scancode&#32;-=&#32;0x80;&#32;
00072 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">switch</emphasis>(scancode)&#32;{
00073 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;0x2A:&#32;<emphasis role="comment">//&#32;Left&#32;Shift&#32;Release</emphasis>
00074 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;0x36:&#32;<emphasis role="comment">//&#32;Right&#32;Shift&#32;Release</emphasis>
00075 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;this-&gt;<link linkend="_a14594_1afba07c783deebfb275c1437f7c23601d">shift_pressed</link>&#32;=&#32;<emphasis role="keyword">false</emphasis>;
00076 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>;
00077 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
00078 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Handle&#32;release&#32;of&#32;all&#32;other&#32;keys</emphasis>
00079 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">default</emphasis>:&#32;{
00080 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">char</emphasis>&#32;ascii&#32;=&#32;0;
00081 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(scancode&#32;&lt;&#32;<emphasis role="keyword">sizeof</emphasis>(scancode_no_shift))&#32;{
00082 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
00083 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">char</emphasis>&#32;base_char&#32;=&#32;scancode_no_shift[scancode];
00084 
00085 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Determine&#32;the&#32;character&#32;that&#32;was&#32;released&#32;based&#32;on&#32;the&#32;keyboard&#32;state</emphasis>
00086 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(base_char&#32;&gt;=&#32;<emphasis role="charliteral">&apos;a&apos;</emphasis>&#32;&amp;&amp;&#32;base_char&#32;&lt;=&#32;<emphasis role="charliteral">&apos;z&apos;</emphasis>)&#32;{
00087 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(this-&gt;<link linkend="_a14594_1afba07c783deebfb275c1437f7c23601d">shift_pressed</link>&#32;^&#32;this-&gt;<link linkend="_a14594_1a8a63dbc25a08a75f62ae0674df1deb30">caps_on</link>)&#32;{
00088 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ascii&#32;=&#32;scancode_shifted[scancode];
00089 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}&#32;<emphasis role="keywordflow">else</emphasis>&#32;{
00090 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ascii&#32;=&#32;base_char;
00091 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00092 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}&#32;<emphasis role="keywordflow">else</emphasis>&#32;{
00093 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(this-&gt;<link linkend="_a14594_1afba07c783deebfb275c1437f7c23601d">shift_pressed</link>)&#32;{
00094 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ascii&#32;=&#32;scancode_shifted[scancode];
00095 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}&#32;<emphasis role="keywordflow">else</emphasis>&#32;{
00096 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ascii&#32;=&#32;base_char;
00097 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00098 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00099 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(ascii&#32;!=&#32;0)&#32;{
00100 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a14594_1a11ec84b7abf113ec270f124564776e1f">keyboardEventHandler</link>-&gt;<link linkend="_a14590_1a28547100b7420e1f73b745df873cd411">onKeyUp</link>(ascii);
00101 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00102 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00103 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>;
00104 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00105 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00106 &#32;&#32;&#32;&#32;}&#32;
00107 
00108 &#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Check&#32;for&#32;key&#32;press</emphasis>
00109 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>&#32;{
00110 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">switch</emphasis>(scancode)&#32;{
00111 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;0x2A:&#32;<emphasis role="comment">//&#32;Left&#32;Shift&#32;Press</emphasis>
00112 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;0x36:&#32;<emphasis role="comment">//&#32;Right&#32;Shift&#32;Press</emphasis>
00113 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;this-&gt;<link linkend="_a14594_1afba07c783deebfb275c1437f7c23601d">shift_pressed</link>&#32;=&#32;<emphasis role="keyword">true</emphasis>;
00114 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>;
00115 
00116 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">case</emphasis>&#32;0x3A:&#32;<emphasis role="comment">//&#32;Caps&#32;Lock&#32;Press</emphasis>
00117 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;this-&gt;<link linkend="_a14594_1a8a63dbc25a08a75f62ae0674df1deb30">caps_on</link>&#32;=&#32;!this-&gt;<link linkend="_a14594_1a8a63dbc25a08a75f62ae0674df1deb30">caps_on</link>;&#32;<emphasis role="comment">//&#32;Toggle&#32;the&#32;state</emphasis>
00118 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
00119 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Prepare&#32;to&#32;send&#32;LED&#32;update</emphasis>
00120 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;this-&gt;<link linkend="_a14594_1aed7b5d279f6f1dffee10d5fb92ed6b1c">led_byte_to_send</link>&#32;=&#32;0;
00121 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(this-&gt;<link linkend="_a14594_1a8a63dbc25a08a75f62ae0674df1deb30">caps_on</link>)&#32;this-&gt;<link linkend="_a14594_1aed7b5d279f6f1dffee10d5fb92ed6b1c">led_byte_to_send</link>&#32;|=&#32;0x04;&#32;<emphasis role="comment">//&#32;Bit&#32;2&#32;for&#32;Caps&#32;Lock&#32;LED</emphasis>
00122 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
00123 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a14594_1afd6cdddb62a2a2d2b31043eb32887b41">dataPort</link>.<link linkend="_a14634_1a523b6a757b27418dc015ed13e74bef60">write</link>(0xED);&#32;<emphasis role="comment">//&#32;Send&#32;&quot;Set&#32;LEDs&quot;&#32;command</emphasis>
00124 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;this-&gt;<link linkend="_a14594_1a703464394033a8f4f664d9289ae2e9f8">waiting_for_led_ack</link>&#32;=&#32;<emphasis role="keyword">true</emphasis>;&#32;<emphasis role="comment">//&#32;Set&#32;state&#32;to&#32;wait&#32;for&#32;ACK</emphasis>
00125 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>;
00126 
00127 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">default</emphasis>:&#32;{
00128 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;It&apos;s&#32;a&#32;printable&#32;key</emphasis>
00129 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">char</emphasis>&#32;ascii&#32;=&#32;0;
00130 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(scancode&#32;&lt;&#32;<emphasis role="keyword">sizeof</emphasis>(scancode_no_shift))&#32;{
00131 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
00132 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">char</emphasis>&#32;base_char&#32;=&#32;scancode_no_shift[scancode];
00133 
00134 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Check&#32;if&#32;it&apos;s&#32;an&#32;alphabet&#32;character</emphasis>
00135 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(base_char&#32;&gt;=&#32;<emphasis role="charliteral">&apos;a&apos;</emphasis>&#32;&amp;&amp;&#32;base_char&#32;&lt;=&#32;<emphasis role="charliteral">&apos;z&apos;</emphasis>)&#32;{
00136 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;It&apos;s&#32;a&#32;letter.&#32;Apply&#32;Shift&#32;XOR&#32;Caps&#32;Lock</emphasis>
00137 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;(shift&#32;^&#32;caps)&#32;=&#32;true&#32;means&#32;capitalize</emphasis>
00138 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(this-&gt;<link linkend="_a14594_1afba07c783deebfb275c1437f7c23601d">shift_pressed</link>&#32;^&#32;this-&gt;<link linkend="_a14594_1a8a63dbc25a08a75f62ae0674df1deb30">caps_on</link>)&#32;{
00139 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ascii&#32;=&#32;scancode_shifted[scancode];&#32;<emphasis role="comment">//&#32;Uppercase</emphasis>
00140 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}&#32;<emphasis role="keywordflow">else</emphasis>&#32;{
00141 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ascii&#32;=&#32;base_char;&#32;<emphasis role="comment">//&#32;Lowercase</emphasis>
00142 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00143 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}&#32;<emphasis role="keywordflow">else</emphasis>&#32;{
00144 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;It&apos;s&#32;not&#32;a&#32;letter&#32;(number,&#32;symbol,&#32;etc.)</emphasis>
00145 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Only&#32;Shift&#32;applies</emphasis>
00146 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(this-&gt;<link linkend="_a14594_1afba07c783deebfb275c1437f7c23601d">shift_pressed</link>)&#32;{
00147 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ascii&#32;=&#32;scancode_shifted[scancode];
00148 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}&#32;<emphasis role="keywordflow">else</emphasis>&#32;{
00149 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ascii&#32;=&#32;base_char;
00150 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00151 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00152 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a14594_1a11ec84b7abf113ec270f124564776e1f">keyboardEventHandler</link>-&gt;<link linkend="_a14590_1ae2b923ef0eb58e29f57a155debadac6a">onKeyDown</link>(ascii);
00153 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00154 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>;
00155 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00156 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00157 &#32;&#32;&#32;&#32;}
00158 
00159 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;esp;
00160 }
</programlisting><para>
References <link linkend="_a14590_1a28547100b7420e1f73b745df873cd411">driver::KeyboardEventHandler::onKeyUp()</link>.</para>
Here is the call graph for this function:<para>
    <informalfigure>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="0" fileref="../../d6/d56/a14594_a248fa0da9acac54a3a8880c7b66b3f2b_cgraph.png"></imagedata>
            </imageobject>
        </mediaobject>
    </informalfigure>
</para>
</section>
<anchor xml:id="_a14618_1aa89d41d69840cb4f1c8692fa6ded28f4"/><section>
    <title>handleInterrupt()<computeroutput>[2/2]</computeroutput></title>
<indexterm><primary>handleInterrupt</primary><secondary>driver::KeyboardDriver</secondary></indexterm>
<indexterm><primary>driver::KeyboardDriver</primary><secondary>handleInterrupt</secondary></indexterm>
<para><computeroutput>virtual uintptr_t hardware_communication::InterruptHandler::handleInterrupt (uintptr_t esp)<computeroutput>[pure virtual]</computeroutput>, <computeroutput>[inherited]</computeroutput></computeroutput></para><para>
Referenced by <link linkend="_a13640_source_1l00169">hardware_communication::InterruptManager::handleInterrupt()</link>.</para>
Here is the caller graph for this function:<para>
    <informalfigure>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="0" fileref="../../db/df3/a14618_aa89d41d69840cb4f1c8692fa6ded28f4_icgraph.png"></imagedata>
            </imageobject>
        </mediaobject>
    </informalfigure>
</para>
</section>
<anchor xml:id="_a14594_1a22b7b080ab1c8b0f2ed4beba75b34691"/><section>
    <title>reset()</title>
<indexterm><primary>reset</primary><secondary>driver::KeyboardDriver</secondary></indexterm>
<indexterm><primary>driver::KeyboardDriver</primary><secondary>reset</secondary></indexterm>
<para><computeroutput>int driver::KeyboardDriver::reset ( )<computeroutput>[override]</computeroutput>, <computeroutput>[virtual]</computeroutput></computeroutput></para><para>
Implements <link linkend="_a14582_1a98d2e779c02364fc58c172d0d2a32bdd">driver::Driver</link>.</para>
<para>
Definition at line <link linkend="_a13646_source_1l00178">178</link> of file <link linkend="_a13646_source">kkeyboard.cpp</link>.</para>
<programlisting linenumbering="unnumbered">00178 {<emphasis role="keywordflow">return</emphasis>&#32;0;}
</programlisting></section>
</section>
<section>
<title>Member Data Documentation</title>
<anchor xml:id="_a14594_1a8a63dbc25a08a75f62ae0674df1deb30"/><section>
    <title>caps_on</title>
<indexterm><primary>caps_on</primary><secondary>driver::KeyboardDriver</secondary></indexterm>
<indexterm><primary>driver::KeyboardDriver</primary><secondary>caps_on</secondary></indexterm>
<para><computeroutput>bool driver::KeyboardDriver::caps_on<computeroutput>[private]</computeroutput></computeroutput></para><para>
Definition at line <link linkend="_a13688_source_1l00023">23</link> of file <link linkend="_a13688_source">kkeyboard.hpp</link>.</para>
</section>
<anchor xml:id="_a14594_1a58fc9113701ffc04637996780c843ff0"/><section>
    <title>commandPort</title>
<indexterm><primary>commandPort</primary><secondary>driver::KeyboardDriver</secondary></indexterm>
<indexterm><primary>driver::KeyboardDriver</primary><secondary>commandPort</secondary></indexterm>
<para><computeroutput><link linkend="_a14634">hardware_communication::Port8Bit</link> driver::KeyboardDriver::commandPort<computeroutput>[private]</computeroutput></computeroutput></para><para>
Definition at line <link linkend="_a13688_source_1l00019">19</link> of file <link linkend="_a13688_source">kkeyboard.hpp</link>.</para>
</section>
<anchor xml:id="_a14594_1afd6cdddb62a2a2d2b31043eb32887b41"/><section>
    <title>dataPort</title>
<indexterm><primary>dataPort</primary><secondary>driver::KeyboardDriver</secondary></indexterm>
<indexterm><primary>driver::KeyboardDriver</primary><secondary>dataPort</secondary></indexterm>
<para><computeroutput><link linkend="_a14634">hardware_communication::Port8Bit</link> driver::KeyboardDriver::dataPort<computeroutput>[private]</computeroutput></computeroutput></para><para>
Definition at line <link linkend="_a13688_source_1l00018">18</link> of file <link linkend="_a13688_source">kkeyboard.hpp</link>.</para>
</section>
<anchor xml:id="_a14618_1ae86f4eae0ce9272b2027d44bdfd71e33"/><section>
    <title>interrupt_manager</title>
<indexterm><primary>interrupt_manager</primary><secondary>driver::KeyboardDriver</secondary></indexterm>
<indexterm><primary>driver::KeyboardDriver</primary><secondary>interrupt_manager</secondary></indexterm>
<para><computeroutput><link linkend="_a13682_1a6c5563315b1a2f5c67ae8b78d06e3c7f">InterruptManager</link>* hardware_communication::InterruptHandler::interrupt_manager<computeroutput>[protected]</computeroutput>, <computeroutput>[inherited]</computeroutput></computeroutput></para><para>
Definition at line <link linkend="_a13682_source_1l00026">26</link> of file <link linkend="_a13682_source">kinterrupt.hpp</link>.</para>
<para>
Referenced by <link linkend="_a13640_source_1l00011">hardware_communication::InterruptHandler::InterruptHandler()</link>.</para>
</section>
<anchor xml:id="_a14618_1afeede822d3e98957e76e627a54ec2f7a"/><section>
    <title>interruptNumber</title>
<indexterm><primary>interruptNumber</primary><secondary>driver::KeyboardDriver</secondary></indexterm>
<indexterm><primary>driver::KeyboardDriver</primary><secondary>interruptNumber</secondary></indexterm>
<para><computeroutput>uint8_t hardware_communication::InterruptHandler::interruptNumber<computeroutput>[protected]</computeroutput>, <computeroutput>[inherited]</computeroutput></computeroutput></para><para>
Definition at line <link linkend="_a13682_source_1l00025">25</link> of file <link linkend="_a13682_source">kinterrupt.hpp</link>.</para>
<para>
Referenced by <link linkend="_a13640_source_1l00011">hardware_communication::InterruptHandler::InterruptHandler()</link>.</para>
</section>
<anchor xml:id="_a14594_1a11ec84b7abf113ec270f124564776e1f"/><section>
    <title>keyboardEventHandler</title>
<indexterm><primary>keyboardEventHandler</primary><secondary>driver::KeyboardDriver</secondary></indexterm>
<indexterm><primary>driver::KeyboardDriver</primary><secondary>keyboardEventHandler</secondary></indexterm>
<para><computeroutput><link linkend="_a14590">KeyboardEventHandler</link>* driver::KeyboardDriver::keyboardEventHandler<computeroutput>[private]</computeroutput></computeroutput></para><para>
Definition at line <link linkend="_a13688_source_1l00027">27</link> of file <link linkend="_a13688_source">kkeyboard.hpp</link>.</para>
<para>
Referenced by <link linkend="_a13646_source_1l00013">KeyboardDriver()</link>.</para>
</section>
<anchor xml:id="_a14594_1aed7b5d279f6f1dffee10d5fb92ed6b1c"/><section>
    <title>led_byte_to_send</title>
<indexterm><primary>led_byte_to_send</primary><secondary>driver::KeyboardDriver</secondary></indexterm>
<indexterm><primary>driver::KeyboardDriver</primary><secondary>led_byte_to_send</secondary></indexterm>
<para><computeroutput>uint8_t driver::KeyboardDriver::led_byte_to_send<computeroutput>[private]</computeroutput></computeroutput></para><para>
Definition at line <link linkend="_a13688_source_1l00025">25</link> of file <link linkend="_a13688_source">kkeyboard.hpp</link>.</para>
</section>
<anchor xml:id="_a14594_1afba07c783deebfb275c1437f7c23601d"/><section>
    <title>shift_pressed</title>
<indexterm><primary>shift_pressed</primary><secondary>driver::KeyboardDriver</secondary></indexterm>
<indexterm><primary>driver::KeyboardDriver</primary><secondary>shift_pressed</secondary></indexterm>
<para><computeroutput>bool driver::KeyboardDriver::shift_pressed<computeroutput>[private]</computeroutput></computeroutput></para><para>
Definition at line <link linkend="_a13688_source_1l00021">21</link> of file <link linkend="_a13688_source">kkeyboard.hpp</link>.</para>
</section>
<anchor xml:id="_a14594_1a703464394033a8f4f664d9289ae2e9f8"/><section>
    <title>waiting_for_led_ack</title>
<indexterm><primary>waiting_for_led_ack</primary><secondary>driver::KeyboardDriver</secondary></indexterm>
<indexterm><primary>driver::KeyboardDriver</primary><secondary>waiting_for_led_ack</secondary></indexterm>
<para><computeroutput>bool driver::KeyboardDriver::waiting_for_led_ack<computeroutput>[private]</computeroutput></computeroutput></para><para>
Definition at line <link linkend="_a13688_source_1l00024">24</link> of file <link linkend="_a13688_source">kkeyboard.hpp</link>.</para>
</section>
<para>
The documentation for this class was generated from the following files:</para>
libk_header/driver/<link linkend="_a13688">kkeyboard.hpp</link>libk_src/driver/<link linkend="_a13646">kkeyboard.cpp</link></section>
</section>
