<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_a04358_source" xml:lang="en-US">
<title>kmouse.hpp</title>
<indexterm><primary>libk_header/driver/kmouse.hpp</primary></indexterm>
Go to the documentation of this file.<programlisting linenumbering="unnumbered"><anchor xml:id="_a04358_source_1l00001"/>00001 <emphasis role="preprocessor">#ifndef&#32;_OSOS_DRIVER_KMOUSE_H</emphasis>
<anchor xml:id="_a04358_source_1l00002"/>00002 <emphasis role="preprocessor">&#32;&#32;&#32;&#32;#define&#32;_OSOS_DRIVER_KMOUSE_H</emphasis>
<anchor xml:id="_a04358_source_1l00003"/>00003 <emphasis role="preprocessor">&#32;&#32;&#32;&#32;#include&#32;&lt;cstdint&gt;</emphasis>
<anchor xml:id="_a04358_source_1l00004"/>00004 <emphasis role="preprocessor">&#32;&#32;&#32;&#32;#include&#32;&quot;<link linkend="_a04349">hardware_communication/kinterrupt.hpp</link>&quot;</emphasis>
<anchor xml:id="_a04358_source_1l00005"/>00005 <emphasis role="preprocessor">&#32;&#32;&#32;&#32;#include&#32;&quot;<link linkend="_a04352">hardware_communication/kport.hpp</link>&quot;</emphasis>
<anchor xml:id="_a04358_source_1l00006"/>00006 <emphasis role="preprocessor">&#32;&#32;&#32;&#32;#include&#32;&quot;<link linkend="_a04346">basic/kiostream.hpp</link>&quot;</emphasis>
<anchor xml:id="_a04358_source_1l00007"/>00007 <emphasis role="preprocessor">&#32;&#32;&#32;&#32;#include&#32;&quot;<link linkend="_a04361">driver/kdriver.hpp</link>&quot;</emphasis>
<anchor xml:id="_a04358_source_1l00008"/>00008 &#32;&#32;&#32;&#32;
<anchor xml:id="_a04358_source_1l00009"/><link linkend="_a04358_1ac9670c34ae4e43ca669484a7a317e968">00009</link> <emphasis role="preprocessor">&#32;&#32;&#32;&#32;#define&#32;KMOUSE_COLOR_BLACK&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;0x0</emphasis>
<anchor xml:id="_a04358_source_1l00010"/><link linkend="_a04358_1a6d83e86a8c6b6046bae502774a4e9e83">00010</link> <emphasis role="preprocessor">&#32;&#32;&#32;&#32;#define&#32;KMOUSE_COLOR_BLUE&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;0x1</emphasis>
<anchor xml:id="_a04358_source_1l00011"/><link linkend="_a04358_1ae245d853ffcebef06bd052849e35471c">00011</link> <emphasis role="preprocessor">&#32;&#32;&#32;&#32;#define&#32;KMOUSE_COLOR_GREEN&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;0x2</emphasis>
<anchor xml:id="_a04358_source_1l00012"/><link linkend="_a04358_1a9660baab3bfc34866b252eff71da777d">00012</link> <emphasis role="preprocessor">&#32;&#32;&#32;&#32;#define&#32;KMOUSE_COLOR_CYAN&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;0x3</emphasis>
<anchor xml:id="_a04358_source_1l00013"/><link linkend="_a04358_1a1d9a56551248abc6954bf18c76ddcb74">00013</link> <emphasis role="preprocessor">&#32;&#32;&#32;&#32;#define&#32;KMOUSE_COLOR_RED&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;0x4</emphasis>
<anchor xml:id="_a04358_source_1l00014"/><link linkend="_a04358_1abfe7fa11c53fb1ea1270f0ed00bb18b8">00014</link> <emphasis role="preprocessor">&#32;&#32;&#32;&#32;#define&#32;KMOUSE_COLOR_MAGENTA&#32;&#32;&#32;&#32;&#32;&#32;&#32;0x5</emphasis>
<anchor xml:id="_a04358_source_1l00015"/><link linkend="_a04358_1a5bc124f24ecf7e9b0b06d181a6fd7a3e">00015</link> <emphasis role="preprocessor">&#32;&#32;&#32;&#32;#define&#32;KMOUSE_COLOR_BROWN&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;0x6</emphasis>
<anchor xml:id="_a04358_source_1l00016"/><link linkend="_a04358_1ab7f5f57837c11ae93f9a3c6ef0bba5a8">00016</link> <emphasis role="preprocessor">&#32;&#32;&#32;&#32;#define&#32;KMOUSE_COLOR_LIGHT_GREY&#32;&#32;&#32;&#32;0x7</emphasis>
<anchor xml:id="_a04358_source_1l00017"/><link linkend="_a04358_1a804c656f97148c66dee375ad20d6326e">00017</link> <emphasis role="preprocessor">&#32;&#32;&#32;&#32;#define&#32;KMOUSE_COLOR_DARK_GREY&#32;&#32;&#32;&#32;&#32;0x8</emphasis>
<anchor xml:id="_a04358_source_1l00018"/><link linkend="_a04358_1a5882f98f21668e74fbc61e9a3cc4d4c5">00018</link> <emphasis role="preprocessor">&#32;&#32;&#32;&#32;#define&#32;KMOUSE_COLOR_LIGHT_BLUE&#32;&#32;&#32;&#32;0x9&#32;</emphasis>
<anchor xml:id="_a04358_source_1l00019"/><link linkend="_a04358_1ac874f858f617e42a6376c7092940376c">00019</link> <emphasis role="preprocessor">&#32;&#32;&#32;&#32;#define&#32;KMOUSE_COLOR_LIGHT_GREEN&#32;&#32;&#32;0xA</emphasis>
<anchor xml:id="_a04358_source_1l00020"/><link linkend="_a04358_1ac9391d6382197266f9d814ed3d21bac2">00020</link> <emphasis role="preprocessor">&#32;&#32;&#32;&#32;#define&#32;KMOUSE_COLOR_LIGHT_CYAN&#32;&#32;&#32;&#32;0xB</emphasis>
<anchor xml:id="_a04358_source_1l00021"/><link linkend="_a04358_1acb168549620efee2737255317c814059">00021</link> <emphasis role="preprocessor">&#32;&#32;&#32;&#32;#define&#32;KMOUSE_COLOR_LIGHT_RED&#32;&#32;&#32;&#32;&#32;0xC</emphasis>
<anchor xml:id="_a04358_source_1l00022"/><link linkend="_a04358_1a5a90c65c80e669968e259e84b095c408">00022</link> <emphasis role="preprocessor">&#32;&#32;&#32;&#32;#define&#32;KMOUSE_COLOR_LIGHT_MAGENTA&#32;0xD</emphasis>
<anchor xml:id="_a04358_source_1l00023"/><link linkend="_a04358_1abc652aa810e06ef28716a20cb70d51d4">00023</link> <emphasis role="preprocessor">&#32;&#32;&#32;&#32;#define&#32;KMOUSE_COLOR_YELLOW&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;0xE</emphasis>
<anchor xml:id="_a04358_source_1l00024"/><link linkend="_a04358_1abb30f17e5bf0289632c5abbd2d2dd99a">00024</link> <emphasis role="preprocessor">&#32;&#32;&#32;&#32;#define&#32;KMOUSE_COLOR_WHITE&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;0xF</emphasis>
<anchor xml:id="_a04358_source_1l00025"/><link linkend="_a04358_1a637dd833f5f7af42afa1f42349a4d89e">00025</link> <emphasis role="preprocessor">&#32;&#32;&#32;&#32;#define&#32;MOUSE_POINTER_COLOR&#32;KMOUSE_COLOR_GREEN&#32;</emphasis><emphasis role="comment">//Here&#32;actually&#32;you&#32;will&#32;choose&#32;which&#32;color&#32;should&#32;your&#32;mouse&#32;pointer&#32;have</emphasis>
<anchor xml:id="_a04358_source_1l00026"/>00026 &#32;&#32;&#32;&#32;
<anchor xml:id="_a04358_source_1l00027"/>00027 &#32;&#32;&#32;&#32;<emphasis role="keyword">namespace&#32;</emphasis><link linkend="_a04375">driver</link>{
<anchor xml:id="_a04358_source_1l00028"/>00028 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;MouseEventHandler&#32;is&#32;an&#32;INTERFACE</emphasis>
<anchor xml:id="_a04358_source_1l00029"/><link linkend="_a05265">00029</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">class&#32;</emphasis><link linkend="_a05265">MouseEventHandler</link>{
<anchor xml:id="_a04358_source_1l00030"/>00030 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>:
<anchor xml:id="_a04358_source_1l00031"/>00031 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a05265_1aa0fd3739c52bcd4d553cefaf41760a9b">MouseEventHandler</link>();
<anchor xml:id="_a04358_source_1l00032"/>00032 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">virtual</emphasis>&#32;<link linkend="_a05265_1abbfe4a7ae2911f989513178530314211">~MouseEventHandler</link>();
<anchor xml:id="_a04358_source_1l00033"/><link linkend="_a05265_1a2f12c5f63356c3045fd6cb46fd89374f">00033</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">virtual</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_a05265_1a2f12c5f63356c3045fd6cb46fd89374f">onMouseDown</link>(uint8_t&#32;button)=0;&#32;<emphasis role="comment">//expected&#32;to&#32;be&#32;overriden&#32;</emphasis>
<anchor xml:id="_a04358_source_1l00034"/>00034 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;button:&#32;Left=1,&#32;Right=2,&#32;Middle=3</emphasis>
<anchor xml:id="_a04358_source_1l00035"/><link linkend="_a05265_1a09b77fe86bfa79313b5c5b91d09eb514">00035</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">virtual</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_a05265_1a09b77fe86bfa79313b5c5b91d09eb514">onMouseUp</link>(uint8_t&#32;button)=0;&#32;<emphasis role="comment">//expected&#32;to&#32;be&#32;overriden&#32;</emphasis>
<anchor xml:id="_a04358_source_1l00036"/><link linkend="_a05265_1a68f635b3b65f927d37d4e0835f7e0b30">00036</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">virtual</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_a05265_1a68f635b3b65f927d37d4e0835f7e0b30">onMouseMove</link>(int8_t&#32;delta_x,&#32;int8_t&#32;delta_y)=0;&#32;<emphasis role="comment">//expected&#32;to&#32;be&#32;overriden&#32;</emphasis>
<anchor xml:id="_a04358_source_1l00037"/>00037 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;};
<anchor xml:id="_a04358_source_1l00038"/>00038 
<anchor xml:id="_a04358_source_1l00039"/><link linkend="_a05269">00039</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">class&#32;</emphasis><link linkend="_a05269">MouseDriver</link>&#32;:&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_a05285">hardware_communication::InterruptHandler</link>,&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_a05249">driver::Driver</link>{
<anchor xml:id="_a04358_source_1l00040"/><link linkend="_a05269_1a8e30a6f6c5839fcf9c3ab63aa167d046">00040</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a05301">hardware_communication::Port8Bit</link>&#32;<link linkend="_a05269_1a8e30a6f6c5839fcf9c3ab63aa167d046">dataPort</link>;
<anchor xml:id="_a04358_source_1l00041"/><link linkend="_a05269_1a2877a9f46dd83a5f05f17fd83a0a7725">00041</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a05301">hardware_communication::Port8Bit</link>&#32;<link linkend="_a05269_1a2877a9f46dd83a5f05f17fd83a0a7725">commandPort</link>;
<anchor xml:id="_a04358_source_1l00042"/><link linkend="_a05269_1aaa1d55d296d88995ac49a8a9a75a79d4">00042</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;int8_t&#32;<link linkend="_a05269_1aaa1d55d296d88995ac49a8a9a75a79d4">buffer</link>[3];
<anchor xml:id="_a04358_source_1l00043"/><link linkend="_a05269_1a313426dd9aa1af1540cbffc2e77c58c1">00043</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;uint8_t&#32;<link linkend="_a05269_1a313426dd9aa1af1540cbffc2e77c58c1">offset</link>;
<anchor xml:id="_a04358_source_1l00044"/><link linkend="_a05269_1a7942997bd5ead2767e9627d91789dd70">00044</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;uint8_t&#32;<link linkend="_a05269_1a7942997bd5ead2767e9627d91789dd70">buttons</link>;
<anchor xml:id="_a04358_source_1l00045"/><link linkend="_a05269_1a804f5657a062e0a18f3b56781f884c66">00045</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a05265">MouseEventHandler</link>&#32;*<link linkend="_a05269_1a804f5657a062e0a18f3b56781f884c66">mouseEventHandler</link>;
<anchor xml:id="_a04358_source_1l00046"/>00046 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_a04358_source_1l00047"/>00047 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;public&#32;:
<anchor xml:id="_a04358_source_1l00048"/><link linkend="_a05269_1a4a671e7e2b235f6bec473cb960401bd6">00048</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">static</emphasis>&#32;uint16_t&#32;<link linkend="_a05269_1a4a671e7e2b235f6bec473cb960401bd6">old_char_under_mouse_pointer</link>;
<anchor xml:id="_a04358_source_1l00049"/>00049 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">static</emphasis>&#32;uint16_t&#32;<link linkend="_a05269_1a1a2a455ca7146dea3148afa8cb6c9ed5">mouse_block_video_mem_value</link>(uint16_t&#32;<link linkend="_a05269_1a4a671e7e2b235f6bec473cb960401bd6">old_char_under_mouse_pointer</link>,&#32;uint8_t&#32;mouse_pointer_color);
<anchor xml:id="_a04358_source_1l00050"/><link linkend="_a05269_1ac2077f6309c79d5f585fb966b57fe065">00050</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">static</emphasis>&#32;int8_t&#32;<link linkend="_a05269_1ac2077f6309c79d5f585fb966b57fe065">__mouse_x_</link>,&#32;<link linkend="_a05269_1aa02009b37420687ef18db8a05ff9181f">__mouse_y_</link>;
<anchor xml:id="_a04358_source_1l00051"/>00051 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a05269">MouseDriver</link>(<link linkend="_a05293">hardware_communication::InterruptManager</link>*&#32;<link linkend="_a05285_1ae86f4eae0ce9272b2027d44bdfd71e33">interrupt_manager</link>,&#32;<link linkend="_a05265">MouseEventHandler</link>*&#32;<link linkend="_a05269_1a804f5657a062e0a18f3b56781f884c66">mouseEventHandler</link>);
<anchor xml:id="_a04358_source_1l00052"/>00052 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_a05269_1a8c25e4a4b42d1d39b332ba6d4cbd6a22">~MouseDriver</link>();
<anchor xml:id="_a04358_source_1l00053"/>00053 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;uint32_t&#32;<link linkend="_a05269_1a1b2f08490b7954e5ca504cd8bb6862c0">handleInterrupt</link>(uint32_t&#32;esp)&#32;<emphasis role="keyword">override</emphasis>;&#32;<emphasis role="comment">//&#32;function&#32;mainly&#32;defined&#32;in&#32;InterruptHandler&#32;class.</emphasis>
<anchor xml:id="_a04358_source_1l00054"/>00054 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_a04358_source_1l00055"/>00055 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_a05269_1a446769df0b3b537a525476c7c8be47bc">activate</link>()&#32;<emphasis role="keyword">override</emphasis>;
<anchor xml:id="_a04358_source_1l00056"/>00056 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;<link linkend="_a05269_1aabe3740996bf70fda96f0a25228954a6">reset</link>()&#32;<emphasis role="keyword">override</emphasis>;
<anchor xml:id="_a04358_source_1l00057"/>00057 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_a05269_1a4329c1cdedc72adf0b95cb3911c4acf6">deactivate</link>()&#32;<emphasis role="keyword">override</emphasis>;
<anchor xml:id="_a04358_source_1l00058"/>00058 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;};
<anchor xml:id="_a04358_source_1l00059"/>00059 &#32;&#32;&#32;&#32;}
<anchor xml:id="_a04358_source_1l00060"/>00060 
<anchor xml:id="_a04358_source_1l00061"/>00061 <emphasis role="preprocessor">#endif</emphasis>
</programlisting></section>
